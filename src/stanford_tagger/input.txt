setting classpath for java classes ( jar file ) in XUL , to access via javascript
I am implementing firefox extension using XUL . I have set of java classes that is zipped as jar which needs to be accessed through javascript . If I copy my jar into jre's lib / ext then javascript will be able to invoke my java classes . If I remove from ext and package this jar in xpi , Javascript is unable to find the classpath for my jar file . Please let me know how to set the classpath for my java classes ( jar file ) in XUL environment at the earliest .
javascript / XUL invoking java ? interesting ... any ref ?
I suggest taking a look at this extension XQuery USE ME 1.4 . 7 and the following articles Calling java from XUL applications Java in Firefox Extensions
Thanks , Is there any easy way to set the classpath such that javascript can find it . - Anand .
What is the disadvantage of DWR ?
While using DWR in a intranet , will disadvantages like perfomance or security issues occur ? Direct web remoting is a tool which uses Ajax request to contact a server from a js file .
One thing I would watch out for is that your server will most likely get hit by more HTTP requests than if you have the ( normal ) full page HTTP delivery . Let me explain . When your web page is AJAX-enabled , your clients will end up creating more HTTP requests for ( say ) form filling , page-fragment regeneration etc . I've seen scenarios where developers have gone AJAX-crazy , and made the web page a largely dynamic document . This results in a great user experience ( if done well ) , but every request results in a server hit , leading to scalability and latency issues . Note - this isn't particular to DWR , but is an AJAX issue . I've used DWR , and it works nicely . Unfortunately , I found that it worked so well , and so easily , that everything becomes a candidate for remoting , and you can end up with huge numbers of small requests .
I agree with this answer . I used DWR in an web-based application . The application gives a great user experience , but I think the application doesn't work fast , because of all the JavaScript and httprequest .
I worked on a project with DWR - a really nice tool . I'm not convinced about the pace of development though . They did post on the development log that they're working on getting 3.0 out the door , but the last stable release - 2.0 - was out in summer 2006 . It's a bit worrying taken from a support perspective - bug fixes especially .
Main problem I've experienced is trying to script a load test on a system where the main bulk of the work is done via DWR calls . The format of the calls is difficult to replicate when compared with just replying a bunch of urls with changing parameters . Still DWR is an excellent framework and makes implementing Javascript -> Java RPC pretty damn easy .
DWR is a great tool when your site has a lot of ajax calls . Each page that makes dwr rpc calls needs to include : a ) an interface file corresponding to the calls being made . and b ) a js file bundled with dwr that contains the dwr engine code that makes these calls possible . for e.g. script src= " / dwr / engine.js " / script one technique that is frequently used while optimizing web applications is to use the browser cache as much as possible when a resource ( like a js file ) has not changed on a server . engine.js is something that will never change unless you upgrade your dwr to a newer version . But , by default , engine.js is not a static file served by your webserver . its bundled as part of the dwr tool itsef and is served by the dwr controller / servlet.this doesnt aid client side caching . So , it is beneficial to save engine.js under the document root of your webserver and let the webserver serve it as a static file .
More about caching engine.js on DWR's site : http://directwebremoting.org/dwr/browser/engine/static.html
One feature missing of current DWR 3.x that any user should take good care is that when an instance of a bean has properties of NULL value , those properties will be still injected to the JSON and these redundant data DO affect the performance . When a property has the value of NULL , usually it should not be sent to frontend . Details of problem : http://dwr.2114559.n2.nabble.com/Creating-Custom-bean-converter-td6178318.html
The biggest difference among other solutions to transfer objects ( marshaling ) is object references . For instance , if you use it to transfer a tree : A |-B |-C in a list { A , B , C} : B.parent = A C.parent = A then A is the same object in Javascrit ! On the bad side , if you have complex structures with circular dependencies and lot of objects : A -B , B -C , C -B , C . A ,... it could crash . Anyway , I use it in a real project used by many hundreds of companies in production to transfer thousands of objects to a single html page in order to draw a complex graph and it works nicely with a good performance .
Clientside Javascript --> Serverside Java --> user is served a . doc
I am helping someone out with a javascript-based web app ( even though I know next to nothing about web development ) and we are unsure about the best way to implement a feature we'd like to have . Basically , the user will be using our tool to view all kinds of boring data in tables , columns , etc . via javascript . We want to implement a feature where the user can click a button or link that then allows the user to download the displayed data in a . doc file . Our basic idea so far is something like : call a Java function on the server with the desired data passed in as a String when the link is clicked generate the . doc file on the server automatically " open " a link to the file in the client's browser to initiate the download Is this possible ? If so , is it feasible ? Or , can you recommend a better solution ? edit : the data does not reside on the server ; rather , it is queried from a SQL database
What type of web server are you using ?
a java enabled one , i presume
Yep , its possible . Your saviour is the Apache POI library . Its HWPF library will help you generate Microsoft word files using java . The rest is just clever use of HTTP .
Your basic idea sounds a bit Rube-Goldbergesque . Is the data you want in the document present on the server ? If so , then all you need to do is display a plain HTML link with GET parameters that describes the data ( i.e. data for customer X from date A to date B ) . The link will be handled on the server by a Servlet that gets the data and produces the . DOC file as its output to be downloaded by the browser - a very simple one-step process that doesn't even involve any JavaScript .
no , the data is being queried from a SQL database
Which means the server can simply run the same query again - it has done it before , it's not the javaScript that directly accesses the DB , is it ?
Passing large amount data as GET / POST around might not be the best idea . You could just pass in the same parameters you used to generate the HTML page earlier . You don't even need to use 3rd party library to generate DOC . You could just generate a plain old HTML file with DOC extension and Word will be happy to open it .
thats a nice trick :) but the file format won't really be DOC now , will it :)
that's a good idea , but it would be nice to keep the table formatting
True , but if the user sees the results opening in Word , nobody cares ( from experience ) . We did the same trick for export only excel spreadsheets - no problem with comma-semicolon separator unlike in csv .
Sounds like Docmosis Java library could help - check out theonline demo since shows it something similar to what you're asking - generating a real doc file from a web site based on selections in the web page . Docmosis can query from databases and run pretty much anywhere .
How can I get a signed Java Applet to perform privileged operations when called from unsigned Javascript ?
Use the java.security.AccessController class . There is a doPrivilegedAction and doPrivilegedExceptionAction that do exactly what you need . For example : AccessController.doPrivileged ( new PrivilegedAction() { public Object run() { .. do something that only works with signed applets .. } } );
It's worth adding : make your privaction'd run() method as small and self-contained as possible . Obviously you could just have your signed applet's init() method call a privileged run() which in turn does the actual applet , but that's just begging to be abused , misused accidentally , or outright exploited . Also , the fact that signed applets lose their special permissions when called by JavaScript is not specific to a particular browser or platform . That's just how it is , everywhere , all the time .
Java date format to JavaScript date format
" dd / mm / yy ( 07 / 06 / 2009 )" does not compute , but I won't edit it because I'm not sure on exactly what you intend .
Could you give some information on how you are passing the Java date to the Javascript code ? e.g. are you writing it out using a JSP ? That will help a lot in answering your question .
Did you mean " dd / mm / yy ( 07 / 06 / 09 )" ? Otherwise I don't understand the difference between the two sample dates you gave .
After reading this question about twenty times , I think Ed means How do I convert a string used to format dates in Java ( using SimpleDateFormat ) to an equivalent string used to format dates in JavaScript ( using Date.format ) ?
( However I am still down-voting this question because if you need to do this , you re doing it wrong ) .
If you are using java , take a look at the Simple Date Format class .
The javascript code in this page implements some date functions and they " use the same format strings as the java.text.SimpleDateFormat class , with a few minor exceptions " . It is not the very same as you want but it can be a good start point .
A similar topic has been answered here : Converting dates in JavaScript I personally have found this to be a rather large pain and took the author's suggestion and used a library . As noted , jQuery datepicker has one that is a viable solution if you can afford the overhead of download for your application or already using it .
I really think a libary is the way to go on this one as well . FWIW , dojo has a good one as well . http://docs.dojocampus.org/dojo/date/locale
If you just need to pass a date from Java to JavaScript , the best way to do it , I think , would be to convert the Java date to milliseconds using date.getTime() , create a JavaScript date initialized with this milliseconds value with new Date ( milliseconds ) and then format the date with the means of the JavaScript Date object , like : date.toLocaleString() .
I have a similar problem with Java Date -> Javascript Date -> DatePicker . This helped get me a lot closer . Thanks !
Best solution . Solved the fact that SimpleDateFormat doesn't provide a zero based month .
See this : http://www.javascripttoolbox.com/lib/date/examples.php
If you just want to format dates my date extensions will do that well - it also parses data formats and does a lot of date math / compares as well : DP_DateExtensions Library Not sure if it'll help , but I've found it invaluable in several projects .
You could use my plugin jquery-dateFormat .
This JavaScript library should be able to help you . http://plugins.jquery.com/project/fIsForFormat ( I don't know why they have it as a jQuery Plugin , because it works standalone . ) You'd simply split the original formatted date into its individual elements and then create a new Date Object with those elements . Then , use this library's " Date.f() " method to output it into any format you could want . For example :
This works fine for me :
Check out moment.js ! It's " A lightweight javascript date library for parsing , manipulating , and formatting dates " . It is a really powerful little library . Here's an example ... Here's another example ... Also , its worth mentioning to checkout date.js . I think the two libraries complement each other .
Communication between Java and Javascript without Netscape or IE ?
In the lab I work in , we use Mozilla 1.7 for Sun Java Desktop System and Firefox 2.0 . 0.4 . My goal is to modify an existing Java application ( run via executable jar ) to communicate with our web-based login system . I am open to the idea of using both Java Applets and JavaScript to accomplish this task , but I have not found a way to integrate these two technologies in any browser but Netscape Navigator and Internet explorer . Is there a way to do this using either of the two aforementioned browsers ? A more concrete example : 1 . Launch application 2 . Click a " login " button 3 . Be prompted for a password 4 . In the background , have the application connect to the web-based login server , enter the username ( known by the app ) and the password , navigate to the time clock section and " click " the Punch In button 5 . Pull the timestamp of the login ( typically displayed on the browser ) and display it in the app
From your question it is not clear why you need a browser to begin with . It is nearly trivial to perform a GET or POST from java with the login credentials and retrieve this time stamp . With out modification to the web service you can parse the out of the text returned from the GET or POST and then present the time stamp .
Look at HTTPURLConnection and perform POST of the same values login form contains to the same URL .
It looks like the GET and POST is the solution I've been looking for . I am able to find the credential fields and enter text , but how does one simulate a button click ? The line in the source code is : It seems I would either invoke the onclick property of the button or make a direct call to doLogin() , but I am unsure how to do either . Thanks for the help so far .
You need to look at what the JavaScript function doLogin is doing . It is most likely submitting the form .
Open new browser window on click of a form button
I want to open a new browser and load a page from the file system ( which will be created on clicking that button ) . My app is a java servlet . Basically I am allowing users to change some HTML on their website . On clicking the button the user get's to see a preview page , that shows what the page looks like with the changes made . What would be the easiest way to do this and what issues can you see , and possibly how we would we get around them . I see an issue , for example , if the browser window tries to open the file immediately , it won't even exist . So there needs to perhaps be some delay before trying to read the file .
This can be done using java script window.open('url','name ' ,.... ) you can pass parameters in this function . google for " javascript window.open function " Cheers
Maybe you can use jQuery / AJAX or a similar technique to post the data to the server first and then open it in a new window . see the jQuery documentation for an example : jQuery Post Example
if there is not much data to pass for preview page , you may pass it as url params instead of using jQuery . If data is large it is better to use jQuery . :) as http://www.xyz.com?name= " name " .....
I'm not familliar with java servlets , but can't you keep the uploaded html in a server-side session variable , display the contents in your preview page , then save the contents of the variable out to the file system once the user accepts the changes ?
You could use JavaScript . On the button you add : and within the script part of the page you write a function like and in your Servlet you just wait for the file to appear before delivering it .
How to stop reloading Java applet when changing " overflow " style
When I change the " overflow " style on document.body from " hidden " to " auto " , it forces a reload of a Java applet that is on the page . I have set overflow to hidden because most of the time I don't want scrollbars to be visible on the page , but I'd like to enable them without losing state in my applet . Is this possible , or is there another way I should be going about this problem ?
It's not possible . Different browsers behave in different ways ; some reload the applet with the slightest DOM change while others keep it running even if you set display : none . In my experience the Java Plugin has very little control over this . You have to save the state of your applet either by : Reading the state into a JavaScript variable via LiveConnect and then writing it back to the applet afterwards Storing the state in static variables and checking their value when the Applet starts up
Split java strings in Rhino
I'm trying to split a java string in a Rhino javascript program which give me the error js : Can't find method java.lang.String.split() . The Rhino docs mentioned that all the javascript String.prototype methods ( like match , split , etc . ) are available on java string if they're not already provided by java.lang.String . Any ideas on what's going on here ?
It may be that you're using it incorrectly . Doesn't split require a string parameter ?
Take a look at the Java docs : http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html Doesn't seem to be a 0 parameter constructor for the split method . You gotta pass it a regular expression . Also , for further clarification , the split method returns a string array , it's not a void method like the way you've used it in your sample code .
split takes an argument , which is the regular expression you want to use to split your tokens . http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html
Rhino provides only the methods that java.lang.String is missing and split obviously isn't one of them . In order to use JavaScript's implementation of split , you'll have to convert Java string to JavaScript one : var s = String ( new java.lang.String ( " 1 2 3 ")) ; // Also valid : var s = "" + new java.lang.String ( " 1 2 3 ") ; print ( s.split() ); // 1 2 3
Not exactly the same context , but may help someone . I use the JavaScript function split() in Rhino . To get things working , I follow the pattern : I suppose that "" + forces Rhino to use a JavaScript type of String . When I forget to add "" + then I got the message
How to drag from browser area and deposit to the explorer area ?
Sometime ago I was facing the problem the other way around : how to drag an item ( folder / file ) from an explorer window ( be it windows explorer , linux nautilus etc . ) to the browser window - that is , the drag starts in one application and ends in the browser . Since I had control over the browser , I was able to intercept the dragend event : the one which interested me . Now , I want to do this from the browser to the file explorer application : much like when you drag an image from firefox and drop it in a folder . My main problem is that while I can check when the drag event exited the browser window , I have no ideea how to get the location where the drag event finished . My ideea is to create a signed java applet and somehow track the mouse movement on the desktop - but this seems a little more than overkill . Any pointers on this ?
You won't be able to do this with JavaScript . JS is sandboxed in the browser and can't interact with anything outside .
That I know . I am going to use JS only to detect the dragexit event from the html document , and pass control to the java signed applet . At least , that's the idea at this time .
According to your justification is is not simple , but it can be managed . There is class called DataFlavor . You had to use D D mechanism introduce in java using Transferable objects and provide correct mime-types and corresponding conversion . The problem is which mime-type will be accepted by explorer . I hope this help .
I guess it will accept most of the main mime-types . I believe now that when the dragexit happens , I need to pass control over to the java applet and from there construct the Transferable objects .
Need a Java and Javascript diff tool written in Java
We need an accurate diff utility for Java and Javascript files , written in Java . It should be invokable from within an Eclipse ( version 3.2 or 3.3 ) application . Preferably we need the Java source code for this utility also . The utility should be able to compare two files ( old and new , say ) and determine the following accurately : Number of LOC added to the new file Number of LOC deleted from the old file Number of LOC changed in the old file Number of change deltas , i.e. , contiguous blocks of code added / changed / deleted .
You might want to rephrase that to something like " does anyone know of a free Java diff tool that can do the following ... " . As it stands , it looks like a request for us to make one for you in which case you should probably head on over to RentACoder :-)
Isn't there one already built in or use one of the many plug-ins that do it ? Google Search ?
See Diffj .
Eclipse has a very good diff / compare plugin installed by default . Have you looked into using and / or extending that ( it's opensource ) ? I would not think that adding some statistics reporting to the existing plug-in would be all that difficult , though sometimes plug-in development ( even just simple extension ) can be deceiving . Good luck .
I needed a Java diff implementation and found this : http://javacook.darwinsys.com/javasrc/textproc/Diff.java which I adapted .
What are FTL files
I am new to a project and have to learn it inside out . I see a lot of files with the extension . ftl in them . I'n not sure what they are . I know they can be modified and the user sees changes in the front end
Freemarker template files I believe . http://freemarker.org /
http://filext.com/file-extension/FTL points to http://freemarker.sourceforge.net , does that help ?
Have a look here . Following files have FTL extension : Family Tree Legends Family File FreeMarker Template Future Tense Texture
freemarker combines java objects and view side ( HTML / JQuery ) contents in a single viewable template on a browser .
FTL stands for FreeMarker Template . It is very useful when you want to follow the MVC ( Model View Controller ) pattern . The idea behind using the MVC pattern for dynamic Web pages is that you separate the designers ( HTML authors ) from the programmers .
An ftl file could just have a series of html tags just as a JSP page or it can have freemarker template coding for representing the objects passed on from a controller java file file . But , its actual ability is to combine the contents of a java class and view / client side stuff ( html JQuery javascript etc ) . It is quite similar to velocity . You could map a method or object of a class to a freemarker ( . ftl ) page and use it as if it is a variable or a functionality created in the very page . ping me for more details ..! cheers ..! :)
. FLT is a file extension which is a mod for Faster than light , installed by Slipstream Mod Manager , which requires Java .
Java frameworks vs. Javascript frameworks
I am a big fan of the Dojo Toolkit but I see here often that there are Java frameworks that do the same thing but they are not as extensive or as user friendly as Dojo in my opinion . What are the main differences ? Can I use Dojo for the GUI and Java as the back-end ? Is there a list of Java frameworks for web development ?
http://tinyurl.com/l2apzg see the list of some java web frameworks
This is a fairly big misconception . The first chapter of every pretty much any javascript book describes how it's almost entirely unrelated to java .
Then I guess you don't understand my question . I saw multiple java gui frameworks that actually do the same thing as dojo and I am wondering what is better . I didn't say java is related to javascript . I am just searching for the framework I like the most .
Maybe if you haven't titled your question as Java vs Javascript ...
it's java vs. javascript frameworks . pharhaps the title should be java framekworks vs . javascript frameworks if it wasn't clear enough .
isn't this equivalent to " Comparing Apples with Oranges "
I dont think unless using Applets , java can do the same as javascript because they have different purpose . Even applets dont exactly do the same thing . Read this
Well - there Google Web Toolkit . A lot of discussion about this here : http://code.google.com/intl/nb-NO/events/io/sessions.html
GWT takes the Java code and translates it -literally- to Javascript code
Agree to all the comments , all i wanted to say is Java ! = JavaScript
Javascript is a completely different thing from Java Javascript is intended for browser behaviour , Java is a complete different thing . Some Java Web frameworks use Dojo ( like MyFaces ) when rendering rich components and Java is in charge of the backend . You can find many useful alternatives for Java Web Frameworks in stackoverflow What Web Application Framework for Java is recommended ? I personally prefer Spring MVC but there are many options
Where do you see MyFaces uses dojo ?
When MyFaces renders the HTML it includes some dojo libraries , it is mentioned in its documentation and even some components explicitly are named
Is it really a " completely " different thing , or are we intended to overlook what they have in common ? However , I think that Java is rather a subset of Javascript than the other way round . ;)
I have found this library to fit my needs . I just need a server side back-end and it looks very lightweight .
I don't think this is an answer for you own question , hehe . I didn't down-voted you though
Why not ? Dojo handles REST channels . I can write my own framework around it .
You shouldn't compare Java and Dojo , they are quite different animals . Dojo is a Javascript toolkit / library so you should rather compare it to ExtJS for instance . And yes , you can use whatever js script you like in the HTML / jsp pages of your web application . Regarding Java frameworks , first and foremost look into Spring .
" Java is to Javascript what car is to carpet . "
Where did you hear this ? Greg Hewgill posted it here : http://stackoverflow.com/questions/245062/whats-the-difference-between-javascript-and-java/245068#245068 , but he didn't remember where he got it from .
I believe the credit goes to Chris Heilmann : http://www.wait-till-i.com/2005/11/08/do-hr-people-even-read-their-job-ads-when-they-get-published /
* " Java is to Javascript what subway is to car " *
It is quite possible to combine Dojo and a Java web framework . My company's application uses both Dojo and Spring MVC . The two technologies address different sets of problems . Dojo is a client-side framework for managing UI components ( widgets ) , AJAX requests , and providing a browser-independent abstraction on top of JavaScript and the DOM . Spring MVC is a server-side framework that receives requests from the browser , provides entry-points into server-side business logic , and directs page flow through the application . Having said that , there are other Java web frameworks that overlap some functionality that is also provided by JavaScript tools like Dojo . JSF with ICEfaces or RichFaces come to mind . In those models , the server ( Java ) has more direct control over how components are rendered and how their state is held . One explicit goal of RichFaces , for example , is to help developers who don't know JavaScript ( or don't want to write it ) develop AJAX applications . But I wouldn't say one approach is better than the other . They just focus on different developer audiences .
JavaScript Frameworks . Those listed here include : Prototype jQuery Ext Script.aculo.us MooTools Yahoo ! UI Library ( YUI ) Dojo Toolkit Backspace They are among the most popular ones . I use MooTools .
Obtaining in IE the length of a Java array passed from an applet to its Javascript wrapper
I have the following method in my applet : Which I call from Javascript as follows : This works in Firefox but IE gives me Any ideas anyone ?
Knowing nothing about Java I can only ask if you've tried " for ( i in files ) { / * do stuff * / } "
Don't you mean File [] ( not Files[] ) ? Other then that , it would help if you alert ( files ) . Also , if you have a javascript debugger ( DebugBar , for example ) that would help the most .
@annakata : Yes , I've tried it . It doesn't work in either Firefox or IE . @laginimaineb : Corrected question . Thanks ! Also , alert ( files ) doesn't help much but I'm going to try kizzx2's suggestion below to peek into files ' structure .
You can use Firebug Lite in IE to investigate what's going on with files First , include Firebug Lite in your file Now log it in the console with Now you can investigate what object was actually being returned by getFiles() I give this suggestion because IE said length is null not or not an object instead of files is null or not an object , so maybe files have other methods that you can use . Use Firebug to reflect those .
Not sure how widely supported passing a Java array to javascript is . A workaround is to return the array as a delimited string as shown in the following example http://www.rgagnon.com/javadetails/java-0183.html
Already seen this link . Approach is not viable since getFiles returns an array of non-string objects .
I realise that , you build the string from the string attributes required from the File array , eg . the file path . you can then get the details required from the file using that path
Work-around found . Instead of returning an array , return a list instead . Then iterate through it using the get and size methods . Works in both IE and Firefox . So , the applet method should be : And to use it Javascript-side :
Should have checked https://developer.mozilla.org/en/LiveConnect first . Clearly stated there that arrays are dodgy in a certain LiveConnect version .
Can I create a ' window ' object for javascript running in the Java6 Rhino Script Engine
I want to run some Javascript on my Java6 server - i.e. using the javax.script API , specifically the Rhino Script Engine . ( Although another solution would be acceptable ) The script file is created supported by a third party , so I don't want to download it and edit it in case it changes over time . The script directly references the ' window ' object ( and probably the ' document ' object etc . ) which Rhino does not seem to support . Can I do this , and if so , how ?
... of course , they won't do a lot of good unless you populate them with the properties that the script is trying to access . You can't just populate them with the standard browser APIs - most of them don't make sense outside the context of the browser .
See John Resig's blog : Bringing the Browser to the Server
That looks awesome ! I'll try that - cheers .
Can Not Read id on JSF Components
I have a little problem I am trying to use MartkItUp JQuery rich text editor on JSF textarea component . My form looks like this : The problem is that on output it gives me the id for textarea like that When I try in JQuery to point to it nothing happens . I had a plain textarea before , and there was no problem . Now , I have a lot of them . How do I point to id in JQuery , thats looks like comment : commentBody P.S : I know i can point to this text area by $('textarea ') . markItUp ( mySettings ); however i am looking for solution to point to specific text area by it's ID .
try this : this will select text area having ID ending with commentBody . to select control with ID starting with particular string replace $ with ^
Got an error when was trying to use your method . But either way , thanks for trying to help
Try this , $ ( ' #comment : commentBody ') , for JQuery version 1.1 . 3 or greater .
It's worked well . Thanks
You can read about JSF IDs here , but in this case you may also find the h : form prependId attribute useful .
Exemplary work . +1
What compilers target JavaScript runtimes ?
I am using GWT , which includes a Java-to-JavaScript compiler . Before this project , targeting the JavaScript runtime from a different language hadn't occurred to me , and I'm enjoying the GWT experience . A quick search revealed Java2Script as another Java-to-JavaScript solution . Are there any other mature compilers that target the JavaScript runtime ?
We develop http://websharper.com that compiles F# to JavaScript .
OpenLaszlo is on open source XML -> Javascript ( technically DHTML , also can compile to Flash ) compiler . I've played with it a little bit and it seemed interesting , although have never used it seriously ( bad IDE support when I tried it ) . Objective-j is a similar project that resembles objective-c , although runs as javascript ( not sure if it compiles it or has a js interpreter ) . I don't know much about it , but do see posts about it on the Ajaxian from time to time .
objective-j compiles either at runtime or ahead of time . It's mostly javascript with a few extra constructs though .
Objective-j is interpreted ( by a javascript engine ) . It looks a bit weird for my tastes personally , but this http://280atlas.com is written in objective-j , and it looks awesome . Though i m sure a similar thing is possible in GWT .
Objective-J code looks ugly . I hate Objective-C code as well so ... OpenLaszio looks great actually , I might even try it some time .
Script # JSC cappuccino ( sort of )
While there are other products which compile to javascript ( noted in the other comments ) , I believe that GWT is , by far , the most mature one out there , in terms of real-world usage . The simple fact that a number of Google's core applications use GWT ( e.g. : the new adwords GUI , Google wave , etc ) means you can have confidence the product is going to be maintained for at least the next few years , it isn't just going to fade away anytime soon . Another thing to keep in mind is that GWT is far more than a java-to-javascript compiler , it also is an optimizing compiler , it has hosted mode , it is fully interoperable with native javascript , it does image bundling , it does code spliting in the new version , etc .
Google suspended Wave development less than 3 months after its public release , so in retrospect I'm not sure that was the best example of GWT's anticipated longevity . :-)
Parenscript is " a translator from a small Lispy language to JavaScript " . It's not Common Lisp -- it's mostly just Lisp syntax for Javascript , though for simple things you can write the same code to target both , if you're careful . I'm not sure I'd call it " mature " , either .
Pyjamas compiles Python to JavaScript . HotRuby runs Ruby source code under JavaScript and Flash . Orto is ( was ? ) a JVM implemented in JavaScript . ( Original site is down ; link is to a blog entry . ) The ZK framework , which likes to compare themselves favorably against GWT , uses Java and XML to generate JavaScript . ( They claim that it takes far less code than GWT to do the same stuff . ) And I have heard it well-argued that jQuery is a separate language that happens to be implemented in , and run under , JavaScript . :-)
You also have haXe . It features static , structural , strong and inferred typing ; algebraic data types ; lambda expressions with closure support ; a module system and can compile not only to JavaScript but also Flash , C++ , Neko , PHP . Java support is under development too .
Here's a shameless plug for a project I started and am continuing to develop : scxml-js , a Statecharts-to-JavaScript compiler
List of languages that compile to JS
The inventors of Clojure ( a JVM based Lisp dialect ) launched ClojureScript in mid-2011 . ClojureScript compiles Clojure source code into JavaScript , making use of the Google Closure compiler and the Closure framework . ClojureScript code can run both in the browser client , or on node.js servers .
Native Javascript method in GWT
I have a native Javascript method in one of my GWT Java classes , but I'm having trouble calling my Java methods from the native Javascript code . I tried to follow this as closely as I could , but I can't get it to work . I compiled it and ran it in Firefox , and the error console said " Error : this.lc is not a function " . I tried changing all the methods to public , but that didn't seem to make a difference . What am I doing wrong ?
In all the code I've done in the past , I've never used ' this ' to identify my class , I have passed the class in . Eg : Change this : To this :
Perfect ! This makes sense , but I wish it was documented better on the GWT site .
I found a better way . It's similar to what you do in JavaScript , where you set " var that = this " . Using this approach , you don't have to pass this to listenForPostMessage() :
Javascript_Java_Interaction applet " Codebase " problem
I saw an article about Javascript_Java_Interaction today at : ============================================================================================ ========================================================================================== It displayed the applet on the page [ Javascript_Java_Interaction.html ] , but if I type in some text and click the button , nothing happens , the problem is in the following line : So I copied the class file into the same dir as the html files [ C :/ Dir_Fit / ] and changed the above line to : now it works , it will display an alert window . So , my question is why it didn't work when I specified the codebase ? According to Java document if the class file is in a different dir , you can tell it by codebase , the applet will show up but if you type in some text and click the button , nothing will happen , I've tried different ways to specify the code base : Yet , none of them works , why ? I don't want the class file to be in the same dir as the htmls . What's the fix ? Frank
It might have something to do with the changes made in Java 6 Update 10 . After the release my applets started to fail with ClassNotFoundExceptions independent of the browser - strangely they worked with 6u7 before that . First I thought about a messed up installment or configuration but then others have experienced the same thing in their system . My trial-and-error came up with the very same result as your observation , namely if I specify even an empty codebase attribute , my applet fails . Googling around ( today ) does not come up with any meaningful results or bug reports issued . I would guess the rules for the codebase attribute usage changed between versions - maybe the old one wasn't restrictive enough or wasn't conformant to some specification .
scripting in java - javascript from a server-side class file in Java 1.5
I have three types of get requests that are delivered to a class file on web application from a mobile device . Because the mobile device provides no cookies , the log file hit only has If I can instantiate javascript in my class file , and generate a javascript function call to urchinTracker() from inside the class file , I can replace that useless cookieArrayLength=0 ; with some useful data urchin can read from the log file into analytics reports . We have been looking at scripting in Java with Rhino ; Safari Bookshelf has : Scripting in JavaTM : Languages , Frameworks , and Patterns which helped us immediately demo that we can run javascript in class files -- this works out-of-the-box on Java 6 . Anyone know any resources for scripting with Rhino on Java 1.5 or 1.4 ? Alternately , any suggestions for running javascript from java 1.5 would be appreciated .
thanks for the resource links ; we are able to use the stripped-down Rhino in Java 6 via javax.scripting to compile test.js ( javascript ) to class file and call tests() locally but have not been successful in compiling the __utm.js and calling urchinTracker() compiling from source and trying again , but at the moment it looks like / users / 58787 / unknown-google may be right in comment below .
We followed Rhino docs to run JavaScript interpreter from Java 1.4 and 1.5 .
See Server-side JavaScript for list of projects that runs JavaScript at the server-side . For your usage , using Rhino seems like the way to go .
[ I'm posting in an answer , because I don't have enough points to post a comment on the question itself . ] Are you sure that the urchinTracker() function will operate outside of a web browser ? Running the Rhino JavaScript interpreter ( which isn't too difficult ) won't be enough if the function relies on various browser objects , like the Document Object Model ( DOM ) or XmlHttpRequest . I suggest that you at least scan the internals of the urchinTracker() function to see if this is the case .
not sure yet , but was unable this morning to pass values via urchinTracker() through javax.scripting ( Java 6 test environment ) so it is unlikely to work on dev . will know by tomorrow ...
This is correct . __utm.js has dependancies on various browser objects . Thanks !
Just wanted to point out the envjs project : " envjs is a pure JavaScript browser environment that runs in Rhino . " Blog Posting : http://ejohn.org/blog/bringing-the-browser-to-the-server Discussion Group : http://groups.google.com/group/envjs Source Repository : http://github.com/thatcher/env-js/tree/master
Java ScriptEngine : using value on Java side ?
In a Java program I'm invoking a user-defined JavaScript program : Now I would like to use ' result ' : how can I have an access to it ? Can I identify it as an array ( Can I iterate threw its members ) , a String , an Integer , etc ... ? Thanks EDITED : I just know that my user gave me a script returning the last value . I don't know anything about this value . Is it a String , an array , etc .. ? I don't known but I want to use it .
This link may be helpful . It seems that the best you can do is to rely on an implementation specific class .
Except perhaps for simple values , I would rather let the scripting engine coerce its values to Java types . Even if you can't edit the script , you could take the return value and pass it through your own generated script to do the coercion . This assumes you know something about the value being returned . EDIT : since nothing is known about the return value , I would first test it using Java ( getClass() ) to see if it was one of the java.lang types . If the returned object is from some API private to the library , I would introspect it using the scripting language ( in this case JavaScript ) , possibly coercing it to a Java type or pushing its properties into some Java data structure during the process . My JavaScript is rusty , but John Leach's tutorial looks quite good : JavaScript Introspection . ( You may be able to use Java reflection , but since the engine implementation could vary between Java versions / JREs / JavaScript engines , I wouldn't rely on it . )
Passing variable name into GWT's JSNI
Using the JavaScript Native Interface of GWT I can perform the following : Which will return the contents of a JavaScript variable called foo . How can I expand upon this to accept the variable name as a parameter ? ie : Simply using the variable name inside the native code like one would to call : results in the JavaScript hunting for a declaration of a variable named foo and not one named with the value of foo . Thanks very much !
Does not work ? You may also want to look at the GWT ' Dictionary ' class . It's ideal for loading values , i.e. parameters from the host page .
Brilliant ! I'll look into the Dictionary too although we're aiming for re-usable JSP tags which can grab particular session attributes and dump them to pages where they're needed . It's not perfect but the Dictionary still requires two things to think about and the tags give us easy validation against a TLD . Thanks !
Should web developers still learn JavaScript ?
Now that frameworks like GWT , Morfik etc exist which compile Java client side code into major JavaScript dialects , is it still worth learning JavaScript ?
In my book , yes . I'm a strong believer in understanding the underlying technology beneath whatever toolkits you're using . Abstractions are leaky - you'll run into trouble down the line if you try to get away with only understanding a high-level toolkit , and not the underlying technology . Sooner or later you'll need to debug your project at the JavaScript ( or whatever ) level .
Not really worth it's own answer , so put here . If you use one of the Java -> Javascript converters , you lose a lot of javascript features such as dynamic typing , and the ability to use functions as proper objects . I don't really see why people look at javascript as a low level language . Combined with frameworks ( written in javascript ) such as jQuery , it's a easy to use and powerful language .
@Macha : Well said . JS in it's own right is extremely powerful ( and very different from Java ) . Why cover it up with abstractions ?
Agreed . Using stuff like Gwt without knowing JS is like using some database tool without knowing SQL . While that may work , you're going to get better results if you actually know what's going on .
Understanding the technology behind your framework reduces the time spending on debugging the things you do with your framework . so in my opinion it's always good to know whats going on behind the scene .
Yes , ... and I speak with experience : I've never learned javascript and only used parts of it , when I encountered it in google searches for questions . Now that I'm building a Web application , I notice that not all abstractions away from javascript have the desired functionality , and I need to go into javascript to solve it . I notice that I miss the fundamental knowledge I have with other languages , just like I miss the ' javascript programming language ' book ( I'm not sure it exists but I have similar copies for C , C++ and Java ) . So today I ordered Javascript : The good parts and I will learn it ...
I would suggest cross-referencing the two ; for the language features that Crockford leaves out of The Good Parts , I wouldn't spend too much time studying them while reading The Definitive Guide . You may eventually need to understand those features , but part of Crockford's point is that a bunch of things in the Javascript language were poorly designed and really shouldn't be there . I've found that , for the most part , I've agreed with him . ( I also learned a fair amount from him . )
Dreas : Thanks for the tip , I will get the book soon so I will see if I still miss some fundamentals . Note that I've learned already a lot of different languages , so I will probably understand more of it that a full beginner .
I think the reality of browser bugs will make being able to diagnose and understand the generated JavaScript necessary for a long time . I worked with a Spreadsheet company for OS / 2 , and they had to read the generated assembler from the C++ code because the IBM compiler would generate buggy machine code at times . So while they may not have known enough Assembler to write a whole project in it , they certainly had to know enough to track down problems . That being said , there are also many web frameworks that require you to code your own javascript , and a given toolkit won't necessarily do everything that you need to do without directly writing some javascript . You can choose frameworks that avoid it if you prefer , but it isn't at all obvious that , unlike say Assembler for application development , the Web development community has decided to abstract away any involvement with it . You may well end up on projects that need it .
ABSOLUTELY . In my opinion , abstraction is important , but knowing how that abstraction works is equally as important . I've seen developers who live and die by their frameworks ( javascript : jquery , yui , etc ... or php : zend , cake , etc ... ) , but have no clue how to do anything productive without them . Who would you rather be ( or hire ) ? The guy who knows how everything works , but improves his productivity by using frameworks and libraries ... or the guy who uses these resources with no idea how they actually work ?
Actually , drawing a parallel to assembly language is a bit missing the point . Assembly was platform specific and the move to C enabled a certain level of platform agnosticism , allowing the developer to be more productive on multiple platforms . Hence , there was a real productivity effect . Learning all your rich web chops on something like GWT is more limiting . It is , after all , based on Java , and the web is way larger in scope than just Java . You'd be seriously limiting yourself if all you know is GWT but not the inner workings of the generated Javascript ( Can't comment on Morfik as I don't know it ) . However , employing something like JQuery in order to be more productive when coding Javascript is much better . JQuery can be used on any browser running on any OS , so it doesn't limit you .
I'd say yes . I've met people who claimed to know javascript , when all they could do is do a couple of jquery function calls . Javascript ( ECMAscript ) is a beatiful little ( ok , not so little ) language . Abstracting a bit from javascript - define " worth learning " . This kind of thinking was always a conundrum to me . Are you , per chance , afraid of learning something new ? I guess , this kind of thinking is what really separates a coder from a programmer .
A web developer who does not know Javascript is like an auto mechanic who does not know how to change a tire .
JavaScript is the core of interactive client-side development . It is absolutely essential . After you know JavaScript you might decide to try out other things that compile to JavaScript if you find them easier . Also if you want to work professional in web development for some company then you are going to have to know JavaScript . Besides , JavaScript is getting more and more popular as the execution of the language in the browser gets faster and as it becomes more popular in Server-side development as well .
Accessing the JavaScript Table DOM in a Java Servlet
HTML tables can be interpreted by Excel . That said , all you need is the markup and a content-type of " application / ms-excel "
Apparently you are generating the table in the JSP so why don't you just output the data you are creating the Table from ? For the actual JavaScript implementation just take a look at Ajax functionality and Dom Manipulation with jQuery ( http://jquery.com )
I don't understand , is there a question in here ?
POST the table to the server . If you want to access the DOM like you would in JavaScript , you are going to need Rhino . But I recommend just sticking with something easier to drop in like JDOM . Then echo back the table with the content-type modified in the header to be " application / ms-excel " .
I'd serialize the data from the cells into a simple JSON object , then use one of the many JSON libraries available on the Java-side to convert it back into a usable object . Something like this : This uses the Public Domain JSON.stringify() routine , available directly here . You can now take this string , pass it to a server , and re-hydrate the object in Java-land . You'll get a multidimensional array of values corresponding directly to the contents of the table . NOTE : This retrieves the entire table . If you just want to get the table's body , you'll have to modify the above code to iterate over the tBodies , like this :
Issue with IE security on page opened from javascript
I have a Java web application running in JBOSS with Tomcat with two web applications ( contexts ) running on it . A button press on one of the applications opens runs a javascript command to open a new window with a page from the other . The problem I seem to be having is that this raises a security alert in IE . with the following message : I can't really ask my customer to add an exception to " http:// " what are the likely causes for it not picking up the site ? The browser is correctly pointed at the full url for the page ( Ie www.something.net:8080/blah/somepage.jsp ) the browser is IE7 with enhanced security running on windows 2003 .
" I can't really ask my customer to add an exception to " http:// "" - you can ask , but they won't be able to do it . IE doesn't let you enter exceptions that are that wide-ranging .
Do the two applications have different domains ? IE is preventing the cross-site scripting . Can you not just have a link to the other site ? EDIT : If this is on Windows Server 2003 , then the only way that I've managed to get around it is to disable to enhanced browser security . If this is the case , then you shouldn't really be browsing from a server in the first place . Edit2:I'm guessing that it is the enhanced browser security that is doing this . Check out this link : http://support.microsoft.com/kb/815141 on info about it . Your choices are to either to disable it , add an exception for that site , or use another browser .
No they both have the same domain one is www.example.com/app1/page.jsp the other is www.example.com/app2/anotherpage.jsp
see edit2 in answer
My issue is that there is no " site " to add as an exception . It's complaining about " http:// " not another website .
Can you post the code ?
Unfortunately I can't post the source A : Because of an NDA B : The Javaprojects are Huge The javascript that loads the page is just window.open ( " URL ") ; nothing special
Thats irritating I just noticed that SO had parsed " h-t-t-p " as a link ...
IE Enhanced Security Configuration is deliberately designed to prevent general purpose browsing from servers . Folks who want to do workstation-style browsing and just happen to be on a server SKU should disable ESC . What's the exactly line of code ? window.open ( " http://fullURL " , etc ) , or something like var v= window.open ( " about :b lank ") ; v.location.href =etc ?
it's window.open ( " path ") ; If thats the case then I needn't worry about it though I was just testing that an install had worked by running it locally .
You need to uninstall " Explorer Enhanced Security " , which is on by default in Windows Servers , before IE will act like a normal browser . :) Workstations shouldn't get this problem .
Gantt Chart - JavaScript / JSP / Java / Groovy / Grails
I'm looking to add the ability to create a gantt chart to my web application . Currently my application is Grails based running on Tomcat . Research around SO seems to indicate that JFreeChart ( http://www.jfree.org/jfreechart ) and Google Charts both might provide me with the ability to create charts that I could mold into what I need . Before I went down that route , though , I wanted to see if there was something that is more specifically tailored to project management type charts . [ Edit : I am open to using JavaScript modules as well ]
If you are not averse to Javascript , you could take a look at http://code.google.com/p/jsgantt /
Wow . That's pretty slick . I'm definitely going to consider that .
try : http://www.fusioncharts.com/free it is free ( and you can get commercial one ) it is flash based .. you can customized it from your gsp .
Have a look at http://www.bryntum.com/products/gantt . 100% JavaScript based on ExtJS , not free though . DISCLAIMER : I wrote it .
Unkown error when calling Java applet from JavaScript
Here's the JavaScript ( on an aspx page ): pdfXML is got from pdfData which is a hidden field on the page containing the XML that contains base64 encoded pdf data which is passed to the java applet . All the other values being passed have within range sensible values . The XML is like this The contents of the element PDF is a lot bigger than displayed here The signature of the Java method is : It seems that when the size of the PDF data gets large the applet fails to be called and the error ' Unknown Error ' is thrown in the JS . The PDF doc the data of which is producing this error is about 4Mb in size . Many thanks in advance for any help .
Does the WriteDocument method exit successfully ? It might be worth adding a try / catch inside if it's not possible to tell .
Since QA saw this error I've stuck some logging in right at the beginning of the WriteDocument function ( it's a signed trusted app so I can write to a log file in the user's home directory ) and that doesn't happen . I'm beginning to suspect that the failure is happening at the method invocation . I just don't know why ? I've added some further clarification to the question .
Does your applet tag contain mayscript= " mayscript " ?
Also you could try to get the form field value from within the applet and not pass it in as parameter ?
No it doesn't . I wasn't aware of that attribute and it's usage . I wasn't aware the Java applet could access form elements directly . That might be something to try . I'm still a little concerned that I don't know why this is happening .
Thanks for responding chaps but I've sorted the problem . How ? I took JRE 1.6 update 12 off and stuck update 7 ( which is the version we reccomend to those who use our website ) on my machine . Why update 12 stopped working I don't know . Why update 7 is stable I don't know . [ sigh ] It's things like this that make me glad I work mostly with a ' long time between releases ' framework like . net .
Which serverside Java technology to use with ExtJS
We are plannnig to upgrade the UI framework for our 6-8 year old application written using Struts / JSP / EJB to ExtJS . Just curious as to what is the most popular Java technology on the server people have been using . We were looking into several alternatives like DWR RestEasy Restlet Struts-Json We are diving more towards using DWR but just wanted to know if the programming community has some food for thought on this . For backward compatiblity reasons the migration will happen incrementally and during that period we will try to make ExtJS coexist with the old Web1.0 style pages . We are not changing anything on the business tier but just the web tier will change from JSP to ExtJs pages .
If you're going to use ExtJS anyway , have you considered using ExtGWT instead ? That'll give you much better Java integration .
but that would be at expense of loosing control over generated content . What if your website is not just EXT , but has twitter Bootstrap frontend as well ?
ExtGWT if you are willing to go with GWT , or I would recommend Metro ( or any Java RESTful implementation - JSR 311 ) + ExtJS , it works great .
We've been using Restlet with good success , and it can be used on applications that aren't 100% RESTful ( we've got areas where we're a bit cavalier ) . It's not a full solution , but it comes with decent integrations to other technologies . For instance we generate our XHTML / CSS pages using Restlet's support for the Apache FreeMarker template generator . Our generated pages happen use jQuery , and ExtJS ought to work equally well . Restlet has a GWT module too .
Also have a look at Jersey . It's a very useful implementation of JAX-RS ( JSR 311 ) that is easy to integrate into an existing project like yours . If I were you I'd create a separate package ( or even EAR / WAR ) with classes that just talked to your existing EJBs and were exposed as REST services that ExtJS can communicate with .
I wonder , how would you serve non REST content through Jersey e.g. templated htmls and other stuff . I mean something similar to what @Jim ferrans did with RestLet .
You could use it with a templating library like Mustache ( http://mustache.github.com/)
I've been using for similiar project jabsorb , which is very similiar to DWR , but conforms to JSON-RPC .
You might want to check out Myna ( http://mynajs.org ) . This is a Server-Side JavaScript application platform that is deployed as a J2EE war file . Being server-side JavaScript it integrates well with Ext . In fact , all the internal management UI is written in Ext . Myna has several features you may find useful : Web-based adminstrator application . No need to edit XML files Web-based Database adminstrator . Can run queries , create / edit / drop tables , and generate Myna and SQL code from GUI Centralized Datasource management and pooling DB connections A Web Service class that supports SOAP , XML-RPC , JSON-RPC , and MYNA-JSON with Ext.Direct coming soon ! Support for handling PUT , POST , GET , and DELETE HTTP requests Support for loading POJO's in your JavaScript code ( Via Rhino ) Runtime Object Relatinal Mapping . No need to edit XML files or recompile classes when the database tables change Javascript preprocessor supports multi-line SQL queries with implicit prepared statements and typed parameters Queries support paging and returning total rows , which works well with Ext's grids and PagingToolbar Full Disclosure : I'm the primary developer for Myna
My team also was using using Struts in the past . We have moved forward and are using DWR , and we love it . Our experience with DWR and Ext has been great . So much boiler plate code , both with DWR on the Java end , and Ext on the JavaScript end , has been reduced . There is also a ExtJsWithDwr project to help with integrating the two : http://github.com/BigLep/ExtJsWithDwr .
Regexp to match Javascript string literals with a specific keyword using Java
After much revision ( see edit history , viewers at home :) , I believe this is my final answer :
It does when I test it ... test case 3 matches properly as 2 string literals . Here is where the original regex came from http://blog.stevenlevithan.com/archives/match-quoted-string
Oops , I see . Yeah , it's relying on the non-greedy behavior for that , which you can't use the same way because you're anchoring to a keyword . Editing ...
That should work but the problem in my case would be false-positives . The probability of a string literal having the special keyword is about 1% . And I have to process a lot of files with hundreds of lines every time . If no one can come up with a way to pre-screen the literals for the special keyword before processing them , I'll go with your solution .
Maybe further developments will help ...
It seems to match a lot more than needed . In my test case chunk above , it matched : " test " ; var v2 = " testkeyword " ; var v3 = " test " ; var v4 = " testkeyword " ;
Tim's modification of your Regexp above works correctly .
Cool . Glad to have helped , anyhow .
How about this modification :
Perfect ! Works as needed !
You need to write two patterns for either single or double quoted strings , as there is no way to make the regex remember which opened the string . Then you can or them together with | .
Consider using code from Rhino -- JS in Java -- to get the real String literals . Or , if you want to use regex , consider one find for the whole literal , then a nested test if the literal contains ' keyword ' . I think Tim's construction works , but I wouldn't bet on it in all situations , and the regex would have to get insanely unwieldy if it had to deal with literals that don't want to be found ( as if trying to sneak by your testing ) . For example : Separate from any solution , my secret weapon for interactively working out regexes is a tool I made called Regex Powertoy , which unlike many such utilities runs in any browser with Java applet support .
The test case you mentioned does not apply to my situation . I'm guaranteed that ' keyword ' will appear just like that , in ASCII . Doing two tests ( first test for string literal , then test for presence of keyword ) will produce a lot of false-positives in my case because probability of a literal having a keyword is about 1% .
Interesting observation . Do you happen to have a test case that will break Tim's solution ? It seems to be holding up to all of my test cases .
Hooking a GWT event onto an element in an external iframe
I am writing a GWT app that involves interacting with an external document in an iframe . As a proof of concept , I am trying to attach a click handler to a button . The following works in javascript Trying to do the equivalent in GWT , I did the following : The following is the ElementWrapper class : The code to find the button works fine but the actual click event handler is not getting invoked . Has anybody had a similar issue before , and how did you resolve it ? Thanks in advance , Tin
You could use JSNI to reuse your JavaScript piece of code . Your javascript code would call a gwt method on an object that would throw it on behalf of the button in the iframe . As to why GWT code does not work -- I guess that is because they use some layer on top of regular browser events that probably cannot span more than 1 frame . That's just a guess though . You could file this as a feature / bug request agains GWT team . If I am right your code looks just fine .
Cool , thanks for the reply . I guess I'll explore the JSNI path , though I want to stay away from writing custom javascript as much as possible .
After researching this further , I found that the iframe is irrelevant . The same behaviour doesn't work on a normal button on the host page . I basically fixed it by using JSNI to replicate part of GWT's event handling mechanism . The following works : Where CustomElementWrapper is : Finally , the ClickEventManager , where the actual work happens is : Personally , I hate this solution because I appear to be duplicating GWT's event handling and quite possibly introducing nasty javascript memory leaks . Any ideas on why my first post doesn't work ( remembering that the iframe aspect is a red herring ) , would be appreciated . Thanks , Tin
Thank you , thank you ! This was exactly what I needed to get it to work in IE7 !
I expect the problem is that the GWT method onAttach() is not called when you use the wrapping as in your first example . You can try to use the static wrap method on the Button widget . Although to use this the input must be of type button . Or have a look at the implementation of the wrap method . Here is the modified code when using the wrap method :
Hilbrand is right about the problem being that the GWT method onAttach() was not called . I implemented your original solution , adding the following method to ElementWrapper : And called added wrapper.onAttach() after the ElementWrapper is created . Works like a charm !
Thank you ! I knew there had to be a cleaner way :)
Please see my previous answer . A slight modification to your original solution will make it work .
You may find this helpful : You will then be able to make arbitrary containers into widget containers : And bind events to arbitrary elements : Specifically in your case , try this : It's always mystified me that GWT makes doing this so difficult and poorly documented .
Instead of using iframes i suggest you simply make a http request from GWT via com.google.gwt.http.client.RequestBuilder . Like so :
Best way to grab website content externally
There's a search site whose search results are generated dynamically by javascript . So the user enters a query , and the site displays the content on the page , without refreshing . I need to grab those search results programmatically ( say from a Java program or a perl / python script ) . So ideally , I can launch my program with 100 queries as user inputs , and then the program would hit that website with each query and spit out on my screen all the search results as returned by the website . The obvious problem is that the site is in javasript instead of simple HTML , so sending a URL request and parsing the resultant output is not going to work ( as the source code for this page is always just a bunch of reference to various . js files ) . Given the above conditions , what are my options ?
Almost all search provider has some APIs , but the free ones impose some constraints about how often can you search , how many times in a day and how many results you get .
This site has no API . And assume there's no limits on how many searches I can do or how often .
Can you give some hints about which site you want to use for searching ? If the search is a local search , you could ask a publicly API-ed search provider to search only within this site .
Ok . Here's the site : http://tinyurl.com/ley3eh
Install Firebug , study the requests that are made by the site's javascript and mimic them in your program . Chances are there is a single request that needs to be made and the resulds would come in some nice form like JSON
Unless the search provider gives you an API to work with ( either via backchannel agreement or a publicly available one ) , then nothing you do will be likely to work for very long . You may go to great pains to fool the site into believing you are an ordinary website user . Then , they will make some minor change to how their site works ( because they have no idea someone is using it in the fashion you are ) and all of a sudden your hack won't work . Sometime later , they may notice that you are using them in this fashion , and detect your usage and flat out block it . Basically , unless they give you an API , you are essentially stealing , and should expect to receive all the courtesy that deserves ... none . Lest you think I am judging you , I'll let you know I speak from experience ;)
What about Dyanmic Data Exchange ? Can't you use that to grab any content from any window in windows ? So I can just grab the content from my browser , and parse it in my program ?
@Saobi , you do realize that DDE is very , very old and not used in modern web browsers ?
what problems will I run into with DDE ?
Javascript does http requests almost just like a browser does , once you figure out what they are you can try to re-create them in perl / python / etc . With Firefox+Firebug you can see the requests in the ' Net ' panel . Things you might have to take into account are user-agent string , cookies , the fact that sometimes the returned data is meant to be run / interpreted by Javascript etc . Maybe your language of choice has a nice httpbrowser class you can use ? Just took a look , searching for IBM , took the post data from Firebug , replaced newlines with ' ' and put it after the request url : but it returns and no data .. So it looks like you have to script a post request . Looking at their restrictions and guidelines , maybe you should just get in touch and ask if there's a public API ?
Ok I used the Net panel monitoring of Firebug . And whenever I submit a query on that website , the request is a POST , but the URL has search.dwr appended to it , not the actual query I submitted .
The search is handled by Javascript , so it can put together and use any url it wants , obviously . You'd have to look into the source to see how it does that , or just see what it posts where and try to mimic that in your code . Is the search site public ?
But that POST request I saw in Firebug , how can I dig deeper to see the equivalent http request ( preferably with a search query appended ) ? Yes this is a public site .
The POST request * is * the http request , the Net panel should also show what post data was sent along . You can try taking that apart and tacking it onto the URL it's posted to as GET parameters , but that won't necessarily work ( depends on if the server supports GET queries ) . But maybe you need to use curl or somesuch to do an actual post from your script . Basically the script has to behave like a browser .
Saw your sample search above . So it looks like this is not easily doable ? You managed to figure out the exact request to send . But that's not enough ....
That's right :-) As I said , you'd need to re-create the POST request in your scripting language . For PHP , I'd point you at http://www.php.net/curl and http://www.php.net/manual/en/function.curl-setopt.php , search for ' post ' .
Mozilla Rhino : Default JavaScript Compliance Level
to execute JavaScript in Rhino one has to create an execution context for the script . The constructor of the Context class uses the JavaScript compliance level VERSION_DEFAULT . As I cannot find a mapping of VERSION_DEFAULT to any of the actual VERSION_XXX constants in the API , I'm wondering which JavaScript compliance level VERSION_DEFAULT is . The release note of Rhino 1.7 R1 ( * ttps :/ / developer.mozilla.org/en/New_in_Rhino_1.7R1 ) states that one has to specify the JavaScript version explicitly , but it does not mention which version is used when Context.setLanguageVersion() is omitted .
it's open source ...
Maybe you should ask this question on the Mozilla Rhino mailing list .
Having had a look through most of the Rhino code , it looks like most of the testing against language version is negative testing , e.g. if ( getLanguageVersion() ! = Context.VERSION_1_2 ) { return paramCount ; } VERSION_DEFAULT is defined as ' 0 ' , so the one place where it looks like it would need to be set as 1.7 is to support the " let " and " yield " keywords because of this code from TokenStream : if (( result == Token.LET || result == Token.YIELD ) & & parser.compilerEnv.getLanguageVersion() Context.VERSION_1_7 ) { // LET and YIELD are tokens only in 1.7 and later result = Token.NAME ; }
How to relate ga : campaign and ga :p agePath ( content ) on Google Analytics Export API ?
Using custom reports you are able to drill down on a specific campaign and then choose the Landing Page or content page that the individual visitor choose . When I try to retrieve the same information through the Google Analytics Export API , I get an error if I try to relate those two dimensions in my feed . Is there any success story about getting this information together . I know is possible , we just don't know what is the correct combination . Since I had no progress on this issue during the last week I thought about giving a little more information . I am presenting below a screen shot of an actual report of the Google Analytics UI givin the information that I am trying to pull and I am getting no info . Basically the campaing information group by the pagePage landed . So I am able to know who clicked on my emails and where that person landed . I just found other people with the same questions on the Google Analytic Help Forum .
I just tried it with some GA data . It seems to be picky about what metric you join it to but ga :p ageviews works . Both ga : campaign and ga :p agePath are dimensions and you need to join them to a metric . You can reference GA documentation here regarding what are the valid combinations . As an example , I managed to retrieve a really long report using ( replace with your profile id ): Hope this helps .
Thanks for your reply . I am trying to execute your sample with my table id , but I cannot get it to work . I am getting an Authorization Required . I am authenticating with Google Analytics before requesting the URI . Let me know if you know what steps to take before executing the script . Thanks again .
You need to authenticate to GA separately by sending an extra header in the http request . See http://code.google.com/apis/gdata/articles/using_cURL.html and http://code.google.com/apis/analytics/docs/gdata/1.0/gdataProtocol.html
If you are using java or servlet , you can use authentication method in analytics api to authenticate first , and then you can retrieve data from the profile of that user .
Servlets and AJAX communication
i do have a communication probleme here between my java servlet and an ajax request . more about it : Absolute path to the index.html ( including javascript / ajax request ): http://localhost:9080/chat/index.html In the same folder the servlet : MyChat.class And the Request is working like this : var url = " http://localhost:9080/chat " ; var name = document.getElementById ( " username ") . getAttribute ( " value ") ; var message = document.getElementById ( " message ") . getAttribute ( " value ") ; var tosend = name+ " , " +message ; request.open('GET ' , url , true ); request.send ( tosend ); request.onreadystatechange = interpretRequest ; I'm having a formular where a user just types in the name and the message and " username " and " message " are tags in my html file . The ajax request works , that's sure , but it doesn't communicate with the servlet . I also don't have an idea where the output from System.out.println() goes . No log file is filled ... And the servlet looks like this : public class MyChat extends HttpServlet { private static final long serialVersionUID = 1L ; }
Try calling the servlet from the address bar to find out if the problem is in the JavaScript or the servlet . ( Something like localhost : 9080 / chat / index.html ? username=Lenni )
won't work because i'm getting the username from an input tag . looks like :
Well , then just dumb it down a little and return a Hello World and try that .
The URL you've specified isn't to your servlet . Just like the URL to the index page is http:// server : port / webapp name / resource the URL to your servlet needs a mapping in the web.xml file that corresponds to the resource part of the url . For example , if you had a controller servlet you'd expect something like the following in your web.xml : The URLs that would invoke the ' controller ' servlet would then follow the form http:// server : port / webapp name / anything . do .
just added the web.xml . it's within the folder where the html file is and my class file . as i start the request i'm getting a request status that is not 200 so ... request fails
The web.xml file need to be in a WEB-INF directory in the root of the web app . Take a look at this tutorial for the details on packaging a web app - http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/WebComponents.html
and where do i have to place the class file then ? :-(
The classes go in WEB-INF / classes . If you use ANT the WAR task will do it all for you .
Share an applet across many jsp pages
In my web application , a series of jsp pages are navigated . These jsp pages appear on the Right Hand side ( frame ) of the screen . On the left frame , I have an applet . This applet is common to all jsps . From all of the jsps , I want to invoke a method on the applet . The javascript code is inside of each jsp . Is there a way to do this ? Any approaches , suggestion , Code snippets most welcome . The applet basically displays an image . Based on the user interaction in the jsp pages , the image needs to change / rotate and so on . But the applet is common to all and should not be loaded on each of the jsps load . Thats why I am looking for a way for all jsps to communicate to the single applet ( via javascripts of course ) .
Its possible.See here for details How to invoke invisible applet methods
But I dont want to embed the applet in each of the jsps . That is the catch . The applet needs to be invoked from a jsp where it is NOT embedded .
Let's say that the Applet is in Frame F1 , your javascript is in Frame F2 then you can call your Applet method from F2 with : Your Frameset : The page with with the applet is Bye .
Using Bing as local search
So if I'm reading your question right , you need a way to go from zip code / city / state to longitude and latitude ? If that's the case , there are a number of free and paid databases out there that have this information . The free ones are generally not 100% up to date , but the paid ones are pretty reasonably priced and would include periodic updates with the latest and greatest data .
so you're suggesting I do the geocoding on the server because it's limited enough ?
@Russell - A couple ways you could do it . You could do the geocoding on your server with a database ( as I suggested in my answer ) or you could create a service on your server that you call via HTTPS which would then call out to Bing / Google via plain old HTTP . This would keep the pages as HTTPS , but just use normal HTTP under the hood - if that's acceptable from a security perspective on your end anyways .
That is actually how we interface with Bing now , but it doesn't do geocoding . We could do the geocoding with google , but it has request limits that our server would surpass .
Yahoo has geocoding with rate limit of 5000 per day on a REST service . http://developer.yahoo.com/maps/rest/V1/geocode.html Have you looked into Yahoo ! Maps with YQL ?
signed applet gives AccessControlException : access denied , when calling from javascript
I have an easy self-signed an applet ( done with keytool and the jarsigner ): Basically , what it does , is that it executes ' notepad c :/ hello.txt ' . Then i embed the applet in html : When i visit the page , JRE starts and asks me if i want to start this applet and if i trust it . I press ok . Then notepad starts - as it should . No problem here . But then i add this into the HTML-page : Now when i press on this text , calc should start - right ? But this gives me : whats up with this ? Why does it give me a security exception now , but it could start notepad before ?
The Java 2 security model requires ( roughly ) that every frame on the stack must be granted a permission for the access control context ( acc ) to have that permission . JavaScript is on the stack and does not have file access permissions .
He could also have used the AccessController.doPrivileged API to elevate the privileges of the javascript function call to the one of the signed applet . http://www.inf.puc-rio.br/~roberto/java/jdk1.2/docs/guide/security/doprivileged.html
Thanks a lot , this solved my problem in a nice and clean way .
Solved the problem with , in Java : and then in JavaScript :
I agree : it is prohibited to manipulate a signed applet from javascript , and the workaround is to rewrite the applet tag in javascript in the page document . I found this source with a bit of theory proving we are right http://docs.oracle.com/javase/tutorial/deployment/applet/security.html#jsNote
Actually , calling applet from javascript behaves as calling unsigned applet ( as specified in the jsnote : http://docs.oracle.com/javase/tutorial/deployment/applet/security.html#jsNote . That is fine and is valid when you're using a class you are not allowed to change , but since you're the author of the java class you can always wrap that specific method you need to call from javascript to be executed in the privileged mode , like this : And it should work ok . ( This is what is suggested in the upvoted comment by @Jean -Philippe Jodoin but the link provided there is broken )
Communcation between Java and applet
How do I get the ( updated ) value of Java Class's variable which is dynamically modified from an applet ? The problem here is , since the applet is loaded in separate class loaders the updated value is not available when the applet is loaded a second and subsequent times .
Do you mean server side Java , or JavaScript as your tag indicate ?
In fact simple desktop java .... java script is there to indicate the use of applet by the java script from an html page
I'm not sure what you are trying to achieve - are there two classes , one in an applet and another , where ?
Is this question still open ? If yes , please make clear what you want to do . Is your applet embedded in your desktop Java application , or in a web browser ?
See Java-to-Javascript Communication , Java - Javascript interaction , and Interaction without LiveConnect for JavaScript interaction .
See http://rostislav-matl.blogspot.com/2011/10/java-applets-building-with-maven.html for working example .
Open an HttpURLConnection in a browser
I am working on a jsp page which uses a bean to create an OAuth authenticated HttpURLConnection and am able to connect successfully . Is there anyway that I can take that open HttpURLConnection and somehow display the contents in a browser window ?
The only way to display the contents of a stream from another web page in a jsp is if you do not get the output stream yourself . If I remember right , the output stream for a jsp is automatically retrieved when an output character outside the scriptlet tags is envountered by the parser . This would be better done in a servlet proper rather than a jsp . Just get the url connection , get the output stream and pipe it to the servlet's output stream using a loop .
Wicket & jQuery Overlap / Collision
I am currently working on a web app using Wicket and started using jQuery core ( UI also ) in it today . I ran into an issue I troubleshooted as a jQuery function ( show() , slideDown() ) colliding with some of the javascript Wicket auto-generated for an external form link . Before I get deeper into this project I am wondering if anyone has had similar experiences . Are there a lot of places where the jQuery effects / actions collide with Wicket generated javascript / HTML ? Are there clean ways to avoid this , or mitigate it ? I have seen Wicketext as possibly a cleaner " integrator " of the two , but mostly it seems to just be a way of doing more of the jQuery-ish code in the Java instead of JS .
This is an interesting problem since jQuery occupies it's own namespace . I'm guessing that there is a conflict with the $ jQuery variable . To get around this you can have jQuery occupy a different namespace like so : You can do this after you've loaded both sets of code and the $ will be returned to its original value . A bit of a headache but it can fix things in a pinch . See using jQuery with other libraries for more info .
Thanks codeincarnate ! I'll give it a try on monday and see what happens .
So this didn't work , but I believe it to be another issue with Wicket generated JS . Had it been a library collision I think your answer is spot on so I am accepting it .
Upload image thumbnail to server , without uploading whole image
As far as I know , what I ask here isn't possible , but I thought I'd ask anyway in case I'm missing something . Suppose you want to let users upload JPG images , and these images are scaled into smaller icons and the original images are always discarded and never required again . Is there any way that would commonly work in most modern browsers that would let the user select a single image on their hard drive , have that LOCALLY turned into a thumbnail and upload the created thumbnail to a server ? In a case where the server just needs a small image , it would be wasteful both in user time and server resources to proceed uploading the whole image , only to immediately discard it . It would be much better to just scale it on the client . I can imagine three options . Just plain HTML / Javascript , using Flash or using Java . If this were possible with Flash , that would seem like the best option . But reading flash.net.FileReference documentation , it seems that you can upload a file from the HD yes , but you cannot look inside the file you are uploading . On the other hand , if you enable " can access local files " in Flash publishing options , it seems that you can then no longer access the net , so that doesn't work . With HTML / Javascript , it is possible to load images and display them on a canvas , but if you try to access the pixels of these images , you get security violations , so that doesn't seem to work . Java I hesitate to use , because only 96.52 % of my users have it installed , and the file upload dialogs I have seen implemented in Java ( at Facebook for example ) have not worked well ( unresponsive interface ) . I wonder though if Java is the only thing allowing resizing images from local HD ?
I think if there was a reasonably reliable and user-friendly way to accomplish this , it'd be done on sites like Facebook already . People are used to having to upload the original image ... it's always nice to be able to improve on an established UX , but if you can only match it , you're not exactly losing out . JavaScript is out , because JS cannot read anything directly from the client ; it can only direct the browser to load a pre-defined local path , or load bytes from the server . Flash's security sandbox also prevents this , as you pointed out . Java has a different set of problems - people rarely install applets these days unless they trust the site more than their own family members . It's also apparently extremely difficult to build something reliable and usable , as evidenced by Facebook-esque companies which have practically unlimited resources to throw at the problem and still fail . So , in summary - no , and don't worry too much about it .
If the jpeg image is progressive , you could stop uploading after a certain amount of resolution is acquired . This will require a bit of your own processing of the jpeg loader and http handling code . It's also a pretty big " IF " , since most jpegs are not progressive by default .
" If this were possible with Flash , that would seem like the best option . " As I understand it , it is possible with Flash Player 10 . Here's an example : http://blog.kukiel.net/2009/02/file-manipulation-client-side-with.html Flash Player 10 currently has a general market penetration of about 85-90% , so if you hesitate to use Java because only 96.52 % of your user have it installed , I guess you wouldn't want to require Flash Player 10 either .
Good Link . Since FlashPlayer 10 , it's possible to manipulate , or , better said , interpret data on client side .
Another way is to use Google's Gears , ex . : Gears Uploader .
I think that you can upload the image to server , then show it in the browser , then the user will be resize it using javascript , but not real resize , only capture the coordenate of it , then you can use the coordeante to resize the image in the server and save the new image ( thumb ) and discard the original .
How to evalute prototype js files through rhino script engine in Java
I am having problems evaluating a script.js file which is dependent of prototype.js . When i am trying to evaluate the script.js file through rhino script engine in java i got Script Exception like " TypeError : $H is not a function , it is java.lang.String . " . How do I evaluate the files and how to include prototype.js and to define the prototype objects ?
have you evaluated them in the correct order ? They need to be evaluated from the bottom up
You cannot evaluate prototype.js using Rhino only . prototype.js have many references to the HTML DOM which is not implemented in Rhino / Java . For example ( from prototype.js ): document.createTextNode ( '') The document global object is not defined in Rhino context and createTextNode is not defined too . The solution is to remove all Objects / Functions from your copy of prototype.js that references the document , window or navigator objects . ( assuming your js file does not use them )
You could also get away with declaring some dummy objects for document , window , navigator and so on . This way you do not have to change prototype.js .
Yes , that's cool :)
Take a look at env-js , which is a mock browser environment for Rhino . It's based on some work by John Resig to get JQuery working in Rhino . I wouldn't be surprised if Prototype worked as well .
GWT conditional compile
I'm using the same source code for a GWT 1.5 and GWT 1.7 application . I'm wondering is there a way to conditionally compile parts of the java code for one or the other version . I know there is a way to do it for widgets and browsers in the module XML file .
I don't think so . Why would you compile for two GWT sources ? We went from 1.5 to 1.7 without problems .
We did to . But in one case the old ( 1.5 ) and the new ( 1.7 ) compiled code does not behave the same . It's a combination of java and native inserted scripts . Moving the old ( 1.5 ) code to the new interfaces removing all deprecated calls is currently to much work .
If you really want to do that I guess the approach would be to use a Generator . With a generator you can have deferred binding ( a bit a poor man's introspection ) . To get access to the 1.5 or 1.7 code you then have to define the generic API in an interface and use GWT.create on it to get the concrete implementation .
The solution is very simple .
if ( version.startsWith ( " 1.5 ")) { // do something the 1.5 . * way } Is actually kind of a bad idea . Ideally you should use absolute string values here , because the GWT compiler will evaluate equality and trim unreachable code inside an if conditional from the compiled output . Using . startsWith means that all the code will end up in the final application . Unfortunately GWT version is not a compile time property . Perhaps the best way to do it would be to create an empty Generator implementation that just returns " ClassName15 " or " ClassName17 " from a call in your module for " ClassName " . You can then , at compile time , call About.version() from the generator and find out what the version is at compile time .
Thanks for pointing that out , but this is the only solution I have found . And it is only for a small code snippet . So the solution works just fine for me .
How to parse javascript for links with java ?
I'm writing a program ( in Java ) that needs to extract links from webpages . I'm using htmlParser ( http://htmlparser.sourceforge.net/) but I'm only able to extract html links ( defined with a href= " ... " ) and I don't know how to handle javascript code to extract links from ... can you help me ??
There are some missing parts in your question . Is it formatting issue ?
Please edit your question : it's hard to understand what you mean .
I can't understand why it's hard to understand what I mean , is it because of my poor english ? Please tell me more .
You can use Rhino with DOM environment , written in JavaScript . By the way it is written by John Resig .
I've never played with DOM , but I'll take a look at your link , thanks .
HTML Parser from sourceforge is useful . I have used it to parse a whole bunch of HTML already . However , parsing JS is different . Cheers .
This is probally the most comprehensive tool out there . Rhino . Everything you want to do can be done with Rhino .
Kill Java Applet via Javascript
I am working for a developing firm and am doing a major redesign on a Web Application , which reloaded everything after each click , to make extensive use of Javascript , so it actually feels like a real Web application . One of the Features is to use a web-based Painter ( think of MSPaint on the Web ) , which I embed on the Page on Demand . After the image is painted and uploaded , the Web-app then unloads the applet and proceeds to show the directory where the file was uploaded to . This is where Trouble starts . It all works on IE and Safari , but not on Firefox 3.5 ( 3.0 works perfectly though ) . Firebug tells me that the expando property is missing . The Web-app Tiparlo which I was working on before had a similar Problem ( in fact , any manipulation done on an applet via jQuery is faulty ) but solved that Problem by wrapping a div around and controlling ( hide and show ) the div instead of the applet . This , unfortunately isn't applicable on this Web-app , because the Applet has to be destroyed and not just hidden and shown , as it takes up too much resources to be run the entire time where it is not needed . To make it short : Is it possible to make an Applet destroy itself via Javascript ? Alternatively : Is there a workaround on the jQuery / expando / applet problem ? I know that applet is deprecated in HTML 4.01 strict but changing it to object is not an option right now . EDIT : I have added a Picture of Firefox + Firebug to show you the actual Error Message . Posting Code does no god , since it works flawless on every other Browser and is a Firefox 3.5 specific Problem . Here be pictures Note : You can ignore the JS Bug coming from button.js .
What happens if you destroy the DIV that surrounds the applet ? ( not hide it , destroy it with removeElement and delete
I tried that , but to no avail . My Theory : I imagine that by hiding the parent div , the Browser itself takes care of hiding the children too and not Javascript . But , when deleting the parent div , it is also Javascript's Job to delete the child applet hence causing the expando Bug to arise . I have been looking at the jQuery Bug Tracker and that particular Bug is listed on the Roadmap for the 1.3 . 3 release . Since I cannot wait for it to fix itself ( be fixed by jQuery dev Team ) , I have to find a workaround .
I would suggest that you create a class that monitors the applet to be killed . run the monitor as some sort of servlet and get javascript to post ' kill applet ' commands when it needs to be killed .
You could always load the applet in a an iframe and just navigate away from the page where the applet is loaded . This will kill it . Your other option if you want to call the destroy from javascript would be to put something like this in . This is not a nice way to kill an applet but on newer browsers it does not throw a JS error , on older ones like IE6 it will throw a js error .
Yep , this one solves the problem ( generates a new one but I can handle that one ) .
What was the new problem it created , just curious .
If you kill the applet after the javascript call finishes it will probably avoid the error . You can do this with java.util.Timer.schedule() .
why not use the nuilt in Applet's stop() method ?
How to wait for a Java applet to finish loading on Safari ?
This doesn't work in Safari : myMethod is a public method declared in MyAppletClass . When I first load the page in Safari , it shows the alert before the applet has finished loading ( so the message box displays undefined ) . If I refresh the page , the applet has already been loaded and the alert displays function myMethod() { [ native code ] } , as you'd expect . Of course , this means that the applet methods are not available until it has loaded , but Safari isn't blocking the JavaScript from running . The same problem happens with body onLoad . What I need is something like body onAppletLoad= " doSomething() " . How do I work around this issue ? Thanks PS : I'm not sure if it's relevant , but the JAR is signed .
I use a timer that resets and keeps checking a number of times before it gives up . Note that this assumes that the applet will run in Safari . I've had some instances where an applet required Java 6 that simply hangs Safari even with code similar to the above . I chose to do browser detection on the server and redirect the user to an error page when the browser doesn't support the applet .
Thank you . It's a shame there isn't a cleaner way of doing this !
You can also simply check for applet . At least , you can in Firefox . I haven't checked in Chrome & IE . That way , you don't have to modify the applet to have a particular method .
I had a similar problem some time ago and adding MAYSCRIPT to the applet tag solved my problem . Take a peek at this page : http://www.htmlcodetutorial.com/applets/%5FAPPLET%5FMAYSCRIPT.html Hope it helps !
I don't see how this is relevant to waiting for the applet to load . Also , the example on the page doesn't work in Firefox 3.5 . 4 on Snow Leopard .
AFAIU that only applies to IE . In other words , not OS X & not Safari .
Here is a generic function I wrote to do just this : Call it like this :
You could also try document.getElementById ( applet_id ) . isActive to test if the applet is loaded in the above example , it worked for me . :)
But if you do that , document.getElementById ( applet_id ) will return null when it doesn't exist , and then it will throw a null reference exception of " . isActive " . I didn't want to have to test by exception , that is very , very slow in JS .
As far as my tests go , ` typeof ( document.getElementById ( applet_id ))` always return ` object ` . Did you mean ` typeof ( document.getElementById ( applet_id ) . someFunction )` ?
I think that depends on what your applet is and how it's configured . You may have to test both the element and the function . You can't just test typeof ( document.getElementById ( applet_id ) . someFunction ) by it's self , as document.getElementById ( applet_id ) may return null early in the life cycle , throwing an invalid object exception when trying to access . someFunction .
ESRI frameworks : java vs javascript
I'm about to develop a web mapping application with ESRI Products like ArcGIS Server and Image Server . I can't find a good comparison between the Java Web ADF and the Javascript Framework . They're of course different because one is a full environment and the other is only client side but it's much more concise and the step to start is minimal . Another problem is that the Java Web ADF is not compatible with our current application server ( JBoss 4.2 . 2 ) and require an old 4.0 . 2 version . Someone out there has experience that can help me ? Many thanks .
Seems that everybody hate the Java Web ADF , http://www.spatiallyadjusted.com/2008/01/30/esris-web-adf-is-one-horrific-development-platform /
I don't have direct experience with the Java Web ADF , but I have worked with the . Net version and am now working with the Flex API . The main problem with the Web ADFs that I have seen and heard from other developers is that they're very cumbersome to use . The newer frameworks ( Javascript , Silverlight , and Flex ) are much lighter-weight , easier to use , and you can up to speed much quicker with them . For example , a test application I wrote withg the . Net ADF took me almost three weeks before I gave up on it . At that time I gave up using the ADF and just did WebService calls against ArcGIS Server since that was easier to do than to try to figure out the ADF . Contrast that to using the Flex API on a similar project , which I just started last week , and I have an almost complete app as of this morning . I would avoid the ADFs and go with the Javascript API .
What you need depends on what you want . If you want to create just a viewer ( as opposed to an application in which users can add ( e.g. draw ) geographical data ) , by all means , use the javascript api ! I've been working with the web adf ( v9.3 ) for some time now and am still frustrated at every turn . Primarily for its lack of proper documentation , but also for various other reasons , such as these : It requires you to use the jsf reference implementation , but it does not allow you to use some of its basic functionality , such as ( f :) subviews . This makes it impossible to use any templating systems , such as facelets . Lots of stuff you want to be able to configure is hardcoded in esri's jar files . For example , the map MUST be directly under form > which must be the first element of the DOM tree . If not , map-movement listeners such as the ContinueousPanListener are unable to find the map and hence fail at updating the map position . It's impossible to code your jsp pages in xml style , since the web adf inlines pieces of at a lot of places in your code , with xslt . Its learning curve is very steep and without the proper docs , you'll be looking for days or even weeks on how to do the most trivial things . Some of these end up to be downright impossible or impractical , because you're not adopting esri's mindset . The default interface is not very intuitive . You may still end up doing lots of work in javascript to get the way the application draws to your liking . The undo functionality requires a versioned database , which is impractical / impossible for application that serves more than 10 or so users at the same time , plus , the round trip to the server for every undo action is a waste . In short : You can make some interesting apps and if you know your stuff , there's work a plenty to be found in the sector , but if its just for ' some project ' , I'd switch to some .. any ! other framework , such as openGeo ..
I accepted your answer because is the most complete , but thanks to everybody for yours time .
Web ADF was ESRI's first attempt to create an ArcGIS Server simplified API . However , as time progressed , the Web ADF ended up with its own abstractions that were as complicated as the " standard " ArcGIS Server ArcObjects API and not as powerful . Therefore , I would recommend the later incarnations ... javascript , flex , etc
Its depends on the requirements . I java web adf you could have more flexiblity to use arcobjects compared to java script api . i am using . net adf i was wanted to move to jsapi . but due to limitation of arcobject usage in jsapi i am still with web adf . I think still jsapi is not grown as compared to web adf . for just viwer small task js api is fine . but if you are creating complex tasks geoprocessing then its worth to stick with web adf .
there is good blog post on ESRI Developer Blog today . have a look .
If you need to edit geospatial data then you have to use the Web ADF which is access to the ArcObjects . If you are just working with viewing data maybe some redlines that are not saved to your geodatabase then JavaScript API works nice . Geoprocessing can be done in the JSAPI . You can also publish models and use them in the JSAPI . I hear that the newer APIs - JavaScript API will have the ability to edit in the near future . As is mentioned the web ADF is broad and fairly complex . It has a good learning curve to it . I have just started getting my head around it and figuring out the logic . I am using the . NET ADF v9.3.1 I have not had many problems with it once I started figuring out the API . It is not for the casual user .
You can do editing via the JSAPI using a geoprocessing service too . Version 2.0 ( due out with ArcGIS Server 9.4 ) will have editing capabilities built in . That said , if a plan involves exposing editing of geospatial data via a public facing webpage , that plan needs to be rethought . If you are working internally , ArcGIS Engine is probably a better option .
Stay far , far away from the Java Web ADF . I would rather stick hot irons in my eyes than develop with the ADF . It doesn't work well with other JSF frameworks , any custom functionality results in you trying to develop javascript - but only by first embedding the javascript within XSL page fragments . It is cumbersome , confusing , but - at least it is slow . ESRI is not recommending the Java Web ADF for any new applications .
We've just gone through the same thing and it would appear the ESRI REST APIs are the way to go if you want a lightweight services based application with a ' rich ' front end , rather than the ADF bloat . There's a good summary of all the ESRI frameworks on their UK site here .
Editing with the REST API and the client API's ( JS , Flex , Silverlight ) will be available at version 10 ( verison 9.4 renamed ) which will be released in Summer 2010 . This thread is a bit old now , but I concur with those who suggest not using the Java ADF . Use the JavaScript , Flex or Silver light API's as they scale much better . If you need to perform GIS actions on the server then use the SOAP API in a custom web service . Only look at ArcObjects when you definitely have to and then make sure you use a Server Object Utility or extension to give yourself the best chance of making a online application that runs quickly . http://edndoc.esri.com/arcobjects/9.2/net_server_doc/developer/samples/web_applications/arcgis_simple_server_object_extension/8e8b2bf6-1877-4c48-80fe-266f5fa70f57.htm
Is it possible to create arbitrary Java objects from JavaScript in ie ?
LiveConnect is a Mozilla technology that bridges Java and JavaScript . Amazingly , they've started maintaining it again for recent versions of Firefox . In Firefox I can write e.g. or use the Packages . namespace if it's not a java.something or I could go crazy and call a factory method in swing easily instantiating any Java object . Is there an equivalent that works in ie ?
Why don't you try it ?
" Java has as much in common with JavaScript as a car has with a carpet . " If you can do this in Firefox , it's leaking abstractions badly , not to mention allowing external webpage to run locally executed code on visitor's computer .
Of course I tried it , and of course it doesn't work this way in ie . It should be obvious that the question means ' what is the syntax for doing the same thing in ie ' .
@Esko : If it is a leaky abstraction , then Firefox is leaking all over computers everywhere . The security model protects you from doing silly things like being able to access the local file system : ` var f = new java.io.File ( " test.txt ") ; document.write ( f.exists() ); ` results in : ` Error : uncaught exception : Error calling method on NPObject ! [ plugin exception : java.security.AccessControlException : access denied ( java.io.FilePermission test.txt read ) ] . ` However , ` var s = new java.lang.StringBuilder ( " Hello ") ; s.append ( " , World ! ") ; document.write ( s ); ` works just fine : ` Hello , World ! `
@joeforker : I really wished this worked everywhere . Imagine having the entire Java class library ( minus anything forbidden by access control ) at your disposal in client-side JavaScript !
@Grant As of JDK 6 update 10 , applets * have * that . Packages object exposing the entire Java class library , even in ie . Who knew ?
As far as I know , I don't think this is possible - Java and Javascript are completely different . It just so happens that the JS API contains a Date object , as does the Java API . Edit : The Java Scripting API ( http://java.sun.com/javase/6/docs/technotes/guides/scripting/programmer%5Fguide/index.html#jsengine ) seems to be the closest you can get to what you're trying to do .
@Tom : His code is actually creating a Java ` Date ` and referencing it from client-side JavaScript . Consider : ` var r = new java.util.Random() ; document.write ( r.nextBoolean() + ' ; ' + r.nextDouble() + ' ; ' + r.nextFloat() + ' ; ' + r.nextGaussian() + ' ; ' + r.nextInt() + ' ; ' + r.nextLong() ); ` Client-side JavaScript doesn't have a ` Random() ` object , and it certainly doesn't have any ` next* ( )` methods available .
You are using LiveConnect which is a Mozilla-specific JavaScript / Java bridge . It is not supported in other browsers .
What you can do in Internet Explorer is load an applet into the page which exposes methods that do the things you want to do . You get a reference to the applet , then invoke methods on that reference . In your applet you'd need a public method getDateFromApplet() that returns a java.util.Date . Note that what I present should work , but it has been years since I did this ( it worked in NS4 , 6 and IE 4+ at the time ) . I didn't use getElementById() however , I used var applet = document.myAppletName ; . The other complication to this is that if you want this to execute on page load , the applet will almost certainly not be ready , which requires code something like : Lastly , it might ( should ) be possible to do this with the object tag , but as I said , it has been years since I needed to interact with a Java applet in this way from client-side JavaScript , so I haven't tested it .
The applet should just call a method on the page when it is ready ?
How about if " the thing I want to do " is the Rhino eval() statement bundled with Java 6 :-)
@joeforker : 1 ) I'm not sure the applet can call a method on the page . You have to wait for the applet to be ready , then call into it from JavaScript . 2 ) Yes , the applet could potentially have a single public ` do() ` or ` eval() ` method that you just pass Java as plain text to and have it execute inside the applet on the browser .
If JavaScript tries to call applet methods before it's ready , the plugin will make the call wait until it's ready .
Still works , years ago MS released a javascript / java applet rpc proxy , called MSRS ( microsoft remote scripting ) . I had to mantain a web application built using MSRS , and works well in IE7 . The javascript library calls a public method of the java class , so I think your approach to this question will do the job too . http://www.ashleyit.com/rs /
You could possibly use DWR or some other reverse ajax library that will allow you to create Java objects on the server side via Javascript objects .
Interesting interpretation of the question .
As of Java 1.6 update 10 , the Inter-Language LiveConnect Bridge attaches a Packages object to applets within the page , just like the Packages object available in Firefox . So in a page with at least one applet , even in Internet Explorer , returns the current date . It's also possible to register new converters for convenient access to non-Java languages running in the Java virtual machine . Of course JavaFX implements such a bridge . It's not supposed to be necessary to wait for the applet to load before calling it from JavaScript but it's probably a good idea . The Java plugin will make JavaScript wait until the applet finishes loading or has an error . It is possible for the applet to call JavaScript in the web page as soon as Applet.init() is called .
You could make the properties of your objects available through a JSON response from your servlet in JAVA ? Since JS can readily use JSON and it is light weight it makes for an easy way to crate JS Objects from your Java Objects . Also look at the Rhino JavaScript engine and making Java resources available from JavaScript . https://developer.mozilla.org/en-US/docs/Rhino_documentation
captcha Image link on html page
HI , I am using a bot program in which i want to find out the link of captcha image so that i can display on a Jframe . When i am looking to page source their is no image link of captcha on it.It is generated on by javascript . Please some body help me . Thanks in advance .
What about if you inspect the dom using firebug ? It should show up then , then you can grab it dynamically with javascript if you need to .
Not to put too fine a point on it , but the captcha is there _for a reason_ . If you need the content behind it , contact the publisher ; they clearly don't want it grabbed by bots .
Why do you want to do this ? It is likely that looking at the requirement rather than the technical solution would be the best option here . If you have a bot that wishes to spider information " protected " by a Captcha then contacting the providers and asking for direct access to the data would likely be a much better option that the cat mouse game you will enter without the providers permission to access said content . You could use a JavaScript interpreter to run the script . Java 6 comes with one built in or you could embed the complete HTML frame in a browser for the manual part .
How is this an answer .
Java < -> Javascript for non-Applets ?
I'm working with an existing Java codebase which , while it can be invoked from an HTML page using an APPLET tag , does not actually subclass the Applet class . The same jars are also used in a non-browser context , so they did not subclass Applet . Now I need to communicate some values from Java back to the Javascript of the invoking page . Normally one would do this using JSObject , but so far as I can one has to use JSObject.getWindow which only works for subclasses of Applet . Is there either : a way to use JSObject from something which isn't an Applet subclass ? some other mechanism to communicate back to the Javascript of the invoking page ?
Call JSObject.getWindow ( this ) in the applet . Then pass the JSObject into the code that needs it in the usual fashion .
I think you're actually going to need to implement an applet in a jar file to handle the communication between your code and the browser itself . Perhaps just use the non-applet jar as a class lib and make the applet jar a simple wrapper that proxies your calls between the browser and the Java code .
What's wrong with returning a value ? From Javascript You can access the Java-object by using getElementById ( " id-of-embed-tag ") . Then you can invoke any public method on that object . The Java object returned by that method will be available to your Javascript code .
Thats an approach I had not considered . I'd end up polling from the Javascript until something changes , but that might work .
URL decoding in Javascript
I want to decode a string that has been encoded using the java.net.URLEncoder.encode() method . I tried using the unescape() function in javascript , but a problem occurs for blank spaces because java.net.URLEncoder.encode() converts a blank space to ' + ' but unescape() won't convert ' + ' to a blank space .
Try decodeURI ( "") or decodeURIComponent ( "") ! - )
Just because it takes a string as argument ! - )
Using JavaScript's escape / unescape function is almost always the wrong thing , it is incompatible with URL-encoding or any other standard encoding on the web . Non-ASCII characters are treated unexpectedly as well as spaces , and older browsers don't necessarily have the same behaviour . As mentioned by roenving , the method you want is decodeURIComponent() . This is a newer addition which you won't find on IE 5.0 , so if you need to support that browser ( let's hope not , nowadays ! ) you'd need to implement the function yourself . And for non-ASCII characters that means you need to implement a UTF-8 encoder . Code is available if you need it .
decodeURI[Component ] doesn't handle + as space either ( at least on FF3 , where I tested ) . Simple workaround : Indeed , unescape chokes on this URL : it knows only UTF-16 chars like %u2318 which are not standard ( see Percent-encoding ) .
Try
How to register a JavaScript callback in a Java Applet ?
I am brand new to Java -> JavaScript communication , as I planned to explore it this week . A good opportunity here ... :-) After some tests , it seems you cannot pass a JS function to a Java applet . Unless I am doing it the wrong way ... I tried : where Call is ( are ) defined as : When I pass a JS function ( all tests in FF3 ) , I get a null on the Java side . Note that the following Java routine allows to display the JS code of DumberTest function ! To the point : I made a JS function : I extract the name of the JS function from the toString result and pass it to Java applet . I don't think we can handle anonymous functions because Java call JS functions by name . Java side :
win.eval() will call a predefined javascript .
eval is more generic , hence less efficient than call for this precise task , and it is more complex to pass parameters to the JS function .
Why is it not advisable to use JavaScript in JSP ?
Why is it not advisable to use JavaScript in JSP ? One rationale that I can think of is turning off the feature in browser would stop the code from executing . Is there any other reason behind this ?
downvoted - questions like this should give references to any such assertion
@Alnitak - could you be more specific
JSP is a server side technology . That is - Server parses / compiles all the information and then sends it to the client ( i.e. your browser ) . And then .. If received data contains ANY javascript then browser interprets it in its own javascript VM and server is long forgotten by then since HTTP is stateless protocol . Considering " not recommending JS in web " I wouldn't bother about it . Most of the sites use JS extensively thus turning it off on the client side would render them mostly useless .
Afaik , there is no problem in using javascript in jsp , and many sites do use it . Especially if your site is a web app , you will have to use both side by side . They are completely independent . You just have to make sure that what you are using each for is appropriate . As for the part about turning off javascript in a browser making the site unusable , it is true whenever you use javascript , with or without jsp .
If you have many clients , then it may be a good idea to put calculations on the clients with JavaScript . If you do everything on the server , you are just going to waste the many processing powers provided by the client's browsers , and the speed advantage of Java would be for naught if too many clients make the server busy . ( Thanks to @Subtenante in the comments for pointing this out ! ) . But on the other side , Java running on the server is faster than JavaScript on the client , and it won't suffer from redundant code on the client , for testing which browser the client runs . JavaScript has its uses as trex pointed out , though . Since it runs on the client , it can for example validate form fields before sending it to the server .
Java is faster than JS , ok , but you have one server , and there may be LOTS of clients . Heavy functionalities may show a gain of performance when left out to the client , relieving the server from it .
Thanks for the comment . I agree with you , and amended my answer . I feel today that i don't in particular like my answer very much . If i could , i would delete my answer and tell the questioner to select another one from below :) But i hope you agree with my answer now :)
He's got to mean " don't use java scriptlets " , which is the stuff between % % > . The biggest reason has got to be maintainability and debugging ; scriptlets make everything make both very difficult . On the other hand , if you implement taglibs , you can extract any logic to a real java class , which is easily debugged , and you will still be able to open things up in a visual xml / html editor , since taglibs are a valid xml structure . Now , it is a bad idea to do validation on the client side ( in javascript ) . Users can disable javascript or even access a url directly to get around validation , which opens you up to exploits .
" Now , it is a bad idea to do validation on the client side ( in javascript ) . " It's bad to * only * validate on the client side . Doing it in * addition* , however , makes for better responsiveness ( no need to wait for the server to reject it and reduction of load of the server ) .
I would not disagree with this .
Online exam web application
I am developing an online exam using JSP / Servlets which is nearing completion . I'm planning to add timer function for the entire exam that shows elapsed time in minutes . How do I implement this with a fool-proof technique to implement this , because using javascript would mean that the user can turn off the feature in the browser . Any help on this would be highly appreciated .
You can find a very good script here : http://codecanyon.net/item/online-skills-assessment/9379895 It is a good starting point for people looking to develop Online Exam System
Server Side Store the time elapsed in the users session . Your pages can display the time remaining in javascript , People can mess with the javascript but they have no capability of messing with your timing logic always get the time remaining from server . Current Time - Start Time on all answers etc
Record the time that the user started and finished on the server . The user will have to press a button to indicate that they've started the exam , which can trigger the server to stamp the start time ; when the final answer is submitted , the server can record the total time taken .
You can make javascript a requirement in the user's browser , and use javascript+AJAX - every minute , get the updated time from the server or make sure the times are synchronised .
you can make javascript a requirement OR use ajax ???? huh ?
my bad ... meant ' and '
At Terracotta , we recently developed a reference web application for online exam-taking . We also implemented a client-side timer with Javascript and the code is open-source if you'd like to take a look . The main page for the docs and live demo is http://reference.terracotta.org The project source for the last release is here : http://svn.terracotta.org/svn/forge/projects/exam/tags/release-1.0.1 The actual Javascript timer code is here . Hopefully that's enough pointers to go on .
The better way to manage timer is on client side instead of server side . What will happen if the network is very slow ? A guy with poor internet speed can not finish exam since your logic is on server side . You may look Skill Evaluation Lab exam software timer management and implement like this .
I prefer you buy available online scripts in market as starting point for it . This will save you time , cost and testing efforts . Below is one of the fine scripts that I worked it and it worked like charm . Using this as base I developed a online testing portal of over 1000 users using computer adaptive test . http://codecanyon.net/item/online-skills-assessment/9379895 It is a good starting point for people looking to develop Online Exam System
Session management in GWT without using Java on the server ?
I am using GWT for my client side application . I am not using GWT / Java for the server . However , I am not sure how I can handle session management . The GWT application resides on one page , all server calls are done via AJAX . If a session expires on the server ... let's assume the user didn't close the browser , but left the application open , how could my server notify the application that the session has expired and that the client side portion should show the login screen again ? What is meant by client side session management ? That seems inherently insecure . I'm not looking for code . I'm looking for ideas , techniques , potential solutions etc . I've considered Comet http://en.wikipedia.org/wiki/Comet_(programming ) , but that doesn't seem like that will work very well without using Java on the server side . Maybe , I'm wrong ? I don't want to poll the server either . Any thoughts or insight ?
What should happen if the session expired on the server-side , then the next time the client sends a request to the server , it will either create a new session , or , more likely , send back a message to the client that it is trying to access a page without a session , and send them to the login screen . However , you will still need to wait until the client sends a message to the server .
Without knowing how you're doing your RPC is working , its hard to give good advice . If your AJAX service requires a user to be authenticated ( IE have a valid session ) , it is ok to just send a 401 error saying that the user is invalid . Client-side can interpret the 401 error as a message that it should set the user up for re-authentication .
I'm not using RPC , the GWT request object is just a wrapper around XMLHttpRequest . Great idea ! I've never thought about changing the http status code . I may end up using this .
We handled this in our application , by detecting when the server sent back a redirect to the login screen ( it would come through the response to the Ajax call ) , and popped up a dialog asking the user for their password again , but pre-filled their username . We then posted that to the same place the login page does , as if it was the login page , and so the user was logged into this new session automatically . Finally we just re-submitted the ajax call again , so it was a seamless process to the user ( eg : they didn't have to click the action again ) . Since we stored all the state on the client , and not in session variables we didn't have any problems trying to persist data across sessions .
different WAR files , shared resources
Suppose you have several applications which share the same code and most of the other resources , but have a somewhat different look and feel , some labels change , etc . ( think branding ) . If each web app is to go in its own WAR file , where do you put the shared resources ? I already use the classpath to share classes and property files . But what about javascript and css files ? Is the best way to create and deploy one extra WAR file that will serve these shared files to whatever other application requires them ? I also thought of a build script that does some magic and from a common source spews out the ( slightly ) different WARs , but I don't like it because it just complicates stuff unnecessarily when you need to build / test / run a single application . Any other tips and tricks would be appreciated .
You can deploy both WARs in the same EAR and put common resources in the EAR . Then put the appropriate dependencies in the manifest of the web apps to link to the jar files in the ear .
If you don't want to go the EAR route , using tomcat , etc ; there are a few other ways to achieve the consistency you want . If you want to share just js and css , look into pack : tag . You could host the . js and css from an apache server , set up your httpd.conf so your webapps can call it , then use pack : tag from your application wars - DRY and compression in one step .
Thanks for the replies so far , but I'm afraid I forgot to mention that the WARs will be deployed in different environments that are completely isolated from each other . So maybe having a common WAR deployed next to the actual application is the only option . I think I'll go with the following : WAR1 , WAR2 containing app-specific stuff CommonWAR containg common stuff ( no kidding ) EAR1 : WAR1 + CommonWAR , to be deployed in env1 EAR2 : WAR2 + CommonWAR , to be deployed in env2
The CommonWar serves no purpose in this case . Just put your common resources in each WAR in it's lib directory , or in the EAR itself . A war is not meant to just package resources , the EAR serves that purpose . Although less configuration is required if you simple put it in each WAR .
Yes , but if I put the common resources in each WAR file then I duplicate those resources : won't do that . If I put the common resources in the EAR file then it must contain all the WAR files that depend upon those resources : can't do either , one WAR must be deployed per environment .
Since you are deploying the CommonWAR in each EAR anyway , the same duplication exists , and you have wrapped the code in a WAR for no reason .
The CommonWAR is deployed in two EARs , but it is the * same * CommonWAR , so it is NOT duplicated " for development " . To be honest , I have reverted to 2 EAR files and one WAR file , see my updated post :)
Update Yes , me again . I have actually changed my mind ( again :) ) . I am currently trying ( being more prudent here ): ( Common ) WAR : containing the application , common ( most part ) + some specific stuff EAR1 : CommonWAR + specific configuration file for env1 EAR2 : CommonWAR + specific configuration file for env2 The configuration file is picked up by the WAR . It is on the the EAR classpath and only contains one property ' application ' with a value . The single WAR will then use this information where appropriate to distinguish between the two apps ( config , style sheets , ... ) . With my solution of EAR1 = CommonWAR + WAR1 , EAR2 = CommonWAR + WAR2 , it was too difficult or impossible to lookup static resources in the CommonWAR without using a web url ( e.g. images in PDF documents generated with iText ) .
A strategy that I have seen used for such product-line like configurations is using WAR overlays when building with maven . You define a common WAR that contains the common stuff and overlay it with those other WARs that contain the specific stuff to generate different WARs for every application . This method is probably most useful if you deploy the WAR-variants on different machines . But I'm not sure whether I can actually recommend this . Remember to specify the overlays configuration if you actually override stuff , since otherwise the overriding order is not deterministic . It might even change with a maven-war-plugin upgrade . ( It did in our case . )
How about putting your css and js in the classpath and serve them with a servlet ? Then you can build the common resources as a jar and that jar can even contain the servlet ( resource dispatcher if you like ) and the war files can contain the jar file in the WEB-INF / lib folder .
You can also dispatch images this way
Which JavaScript library you recommend to use with Java EE + Struts + iBatis ?
Which JavaScript library you recommend to use with Java EE + Struts + iBatis ? Something like Ext JS , Dojo , frameworks that can be easily integrated with Struts .
What are you using the JS library for ? Do you need widgets and advanced UI components ? What are your licensing restrictions ?
I need JS for display enhancements , and I need free libraries
There exists a framework that is supposed to tie in nicely with Java Server / Middleware called JSON-RPC However I have never used it and cannot vouch for it .. Aside from that my favourite framework is cough jQuery edit after reading more closely , the JSON-RPC is not quite what you are looking for .. but it still might be useful for ya to look into ;)
Here's a good article on Dojo for Java Developers .
Some more recent : http://www.sitepen.com/blog/2008/05/06/dojo-json-rpc-java AND http://www.sitepen.com/blog/2011/01/03/many-comet-solutions-for-your-real-time-apps /
You must choose the Javascript library based on what you expect from the library , not based on the server libraries . The tipical JS libraries ( Ext JS , JQuery , Prototype , Dojo , YUI , etc ) work on the browser and don't have any dependence on server tecnology . If you are looking for a way to use your server POJO's from javascript take a look at DWR . This library is now part of the dojo foundation , but I've used it with jQuery and Prototype with ease .
would suggest you go for Struts 2 . It has built in dojo and also has options to plugin other libraries like prototype , jquery , gwt , yui , etc . Should be really handy , since you're using Struts as your web layer ..
Sorting domain names
Has anyone implemented sorting a list of domain names ? I have seen some applications sort them as flat strings , but the problem is that you end up scattering all the related hosts in a domain : a.me.com a.you.com b.me.com b.you.com So , the basic logic I came up with reverse the order of the labels , then sort . FQDNs of one label should be treated as hostnames , and probably sorted separately , maybe at the top . Ideally I am looking for javascript and java versions . I also don't know if this design works well for the newer internationalized domain names .
Err , what's wrong with doing exactly what you suggest , reversing the strings and sorting alphabetically ?
You could split the domain names into individual fields and do successive sorts . You can create a domain name object to have three fields and create a list of domain names to sort . For each of the three fields , do a sort . At the end , you have a sort list of domain names with related hosts together .
split by " . " then piece together " . com.au " and " . co.uk " vs " . com "
@Bala : Three fields ?
From the few examples given , I assumed there were three fields ( foo.bar.com) . If there were only two fields ( foo.com) , then the third field would be null .
I don't know about Java and Javascript in particular , but many languages provide some sort of array data structure that can be lexicographically sorted . So , like you said , convert " a.example.com " into { " com " , " example " , " a " } , and just let the default sorting rules run . A lexicographical sort will then do exactly what you want . If you have a list of local domains as well as FQDNs , I agree you'd want to separate those out . Anything that doesn't have a period in it could be filtered out first . Or , you could resolve those all to FQDNs and then just sort the whole list . Some Python code that does this ( should map to Javascript fairly closely ): This prints :
Based on Tom's answer ... The print statements work ( when uncommented ) in the SquareFree JavaScript Development Environment , a handy place to test out javascript fragments ...
Thank you for the translation , Stobor !
This is how it's done in Perl :
Best source code formatter for Javascript ?
I've been digging through Stack Overflow as well as a number of Google searches , and I cannot find a satisfactory code formatter for Javascript . I have found several related tools , such as syntax highlighters and pretty-printers , but I am looking for a tool that I can ideally create a wrapper for in Eclipse and simply run from the menu bar . Hence , if any Java-based ones are available , that is a big plus . Free and / or open-source is preferred as well . I am looking for something that my development group can use to maintain a consistent code style . Thanks . [ EDIT ] Thank you for the incredibly fast responses ! I would upvote you both if I had any karma . But especially kRON for linking to the format customizations page . [ EDIT ] Related question on Stack Overflow .
In one breath : Aptana Studio ! Yes , it's Java based and free ( Eclipse , as standalone or plugin ) . You can also customize the formatting .
If you already use Eclipse , I recommend you to try Aptana , you can install it as an Eclipse Plugin .
If you also need Java programming i can recommend ' IntelliJ IDEA ' It offers excellent JavaScript formatting and refactoring out of the box .
This is by far the best I've come across : http://jsbeautifier.org Its an online tool , but source is available .
Have you tried jsfiddler . It's great for trying things out with Javascript . Built in JSLint something called Tidy . Not sure whether that infers jstidy Piotr Zalewa is the guy who wrote it . May be worth giving him a Tweet @zalun to confirm .
If you need source code , you might check out the code I present in the article A JavaScript Formatter .
If you are using notepad++ , you can try jsminnpp plugin
For Eclipse IDE you can use JavaScript Code Formatter based on Goolge's Style Guide For IntelliJ IDEA you can use the same js code formatter xml file , but previously you have to install a special plugin Eclipse Code Formatter Plugin , which solves the problem of maintaining a common code style in team environments where both IDEA and Eclipse are used
Java method never called while using JSON RPC in Struts2
I'm trying to get some code working that a previous developer has written . Yep , he now left the company . :-( I have a JSON RPC call being made from the JS code . The JS all runs fine and the callback method gets an object back ( not an error object ) . But the method on the Java class never gets hit . The smd method does get hit though . I'm stumped as to why , or what I'm missing . I've read JSON plugin page over and over . I think I just need another set of eyes . Note : no errors in the Tomcat console , no JS errors . Anyone got any clues ? Cheers Jeff Porter
I'm guessing that you need to update the smd() method to actually call updateRowValueForField() rather than simply return immediately . Looks like the previous developer never actually hooked up the methods .
You forgot to include the javascript code . From the example : Are you sure you call service.updateRowValueForField ( key , value , fieldname ) and not something different ? Further , your method returns a void ( e.g. doesn't return anything ) . What did you expect to get ?
New version fixes my problems . Google JSON plugin
I know its old post ... but i am not able to get this work either ... i am on 2.2 . 3 and in javascript when i say service.doSomething ... it says doSomething not defined ... sounds logical as there is no method saying doSomething in Json service . That example is not correct .. something is missing there ...
How can I set globals to JSLint to ignore for a whole set of files ?
I'd like to run JSLint4Java as part of my build process . I have about 1000 JS files in a library , and don't really want to add a header to each of them -- especially since many of them are from an external library ( Dojo ) . If I don't add the header , though , JSLint complains about the same five globals on nearly every single file . Is there a way to tell JSLint to ignore them ? Some things I've thought of so far : Some sort of AntFileMap task that creates a virtual directory hierarchy that's an exact copy of another hierarchy , but has a filter applied to each file ( in this case , prepend with a / *globals * / header ) . Hack JSLint4Java to accept a set of globals which it prepends as a comment to the beginning of every file it processes . I've never seen anything like ( 1 ) . ( 2 ) seems relatively easy , but I'd prefer to use original tools if possible . Any better suggestions ?
Hi James , I'm curious if you ever worked out a solution to this .
From http://www.ohloh.net/p/jslint4java News 2009-12-02 . jslint4java 1.3 . 3 is released . Noteworthy alterations : Add support for the predef option , to allow specifying a list of predefined global variables . Sounds like what you might be looking for . Try the -- help option to get the syntax , maybe ?
You can also use LintRoller - a Node.js utility for checking entire directories or projects against JSLint , JSHint and other validations .
I've been playing with DWR and converters for a while and I really wanted to map my Java classes to JavaScript classes . Using DWR converters , I have the option to point out what is the name of my JS constructor given a Java class . So far so good ... The problem arises when my JS constructor is within a JS package-like name ( just like YUI's package system , eg my.beautiful.package.MyClass ) . DWR's current implementation doesn't allow me to use this kind of construct , giving me a SyntaxError when I try to use it . Is there an elegant way arround this limitation ?
I don't have a workaround , but for your information there is an opened issue about this : http://bugs.directwebremoting.org/bugs/browse/DWR-103 If I am wrong and it is not the same problem as what you described , let me know and I will delete this comment .
Thats right , I wonder if they will fix it only for version 3 . Here we use version 2 yet .
As far as I know the this isn't possible directly . I have in my current work project experimented with enhancing each returned object on the client side with methods from a Javascript class , which gets the result that I think you are interested in . I'll have to check at work on monday ( now is sunday ) that augmentProto is correct one to use , but I think it is . There may even be a better hook into DWR that'll allow you to do this on the fly automagically .
One thing that I did , I " globalized " all needed constructors used by DWR , ( using the notation as follows * my_beautiful_package_MyClass * ) although it works , its not that elegant =/
I'd like to use the Rhino JavaScript compiler to compile some JavaScript to . class bytecode files for use in a project . It seems like this should already exist , since there are groovyc , netrexxc , and jythonc tasks for Groovy , NetREXX ( ! ) and Jython , respectively . Has anyone used or written such an Ant task , or can anyone provide some tips on how to write one ? Ideally it would have some way to resolve dependencies among JavaScript or Java classes .
Why not simply use java task ? Any objections ?
Hmm , the main concern is handling dependencies among Java and JavaScript classes . Still , this might be enough to work for now -- thanks .
Here is a sample build.xml I use for my rhino applications . If you have lots of javascript files you just need to keep adding more tags ~ : ant compile jar run ~
I'm using RequireJS in my project , which includes a script that traces out dependencies between modules , and combines them into a single JavaScript file . Optionally , it can also minify the combined js file with the Google Closure compiler . Once it's in this form , where all dependencies are included in a single js file , the file can be easily compiled using jsc . Here's a segment of my ant script which I use to create the single combined js file , compile it to a class file , and then create an executable JAR : The complete build script can be found here .
* Punches in the arm* . According to wikipedia , I am required to do so after you jinxed me and before I can speak again . http://en.wikipedia.org/wiki/Jinx
You misread that - I get to punch you now . And get me my Coke .
Everything . JavaScript was named this way by Netscape to confuse the unwary into thinking it had something to do with Java , the buzzword of the day , and it succeeded . The two languages are entirely distinct .
Javascript was originally called Livescript , and the world would probably be a better place today if they hadn't renamed it !
I doubt it was to cause confusion - what's the benefit to the company of that ? I suspect the _intent_ was to ride on the success of Java , although the _effect_ was what you stated .
" ride the success of java " by calling something unrelated with a similar name ? That sounds very much like " causing confusion for marketing purposes " to me .
Sun tried this naming trick again with the " Sun Java Desktop " , which was essentially a branded version of Gnome and had nothing to do with Java .
@Pax - Put another way , it confused the unwary into thinking it had something to do with Java , the buzzword of the day .
Yeah , and it worked . @Greg Hewgill , the world might be a better place , but Javascript probably wouldn't be where it is today .
@Just Some Guy - Well said . I improved my answer by adding some of your wit .
The reason they changed the name was to in some way pacify Sun who at that point were involved with Netscape
Java and Javascript are similar like Car and Carpet are similar .
Awesome answer . I need to remember it !
from ddaa import wit # I wish I had come up with that one !
That is the best answer ever . If it is original ( i.e. you hadn't heard it from somewhere else ) you are a genius . I am going to start quoting this ...
Unfortunately , I can't claim originality . I don't recall where I first heard it , however .
Damn , this answer earned you 690 rep atleast . It is a great answer still .
Great answer . Simple and lets you get the idea .
He didn't . 200 max per day .
i don't think it's a flaw . he deserved his points . this is a short answer , and all he needs to know .
lol , very nice comparison .
I would vote this up twice if I could . Great analogy !
+1 ( just to help Tim ! )
I would have said car and bus .
@Ian Quigley : Ah , that must have been where I saw it ! Thanks .
Greg Hewgil , you're my new hero man !
I prefer the version about ham and hamster .
This is a bad answer . Javascript and Java are both languages for writing code , but they are used in different contexts . Car and Carpet are nothing at all like each other . Javascript and Java are easy to confuse for a beginner
2 years late , but thank you so much for this thoughtful explanation . It's way more useful and informative than the selected answer , and deserves far more votes IMO
I upvote both in such cases . We need the right answer , but holy shmoly , geeks like us we really need more of this humor
You might also here strongly-typed and loosely-typed instead of statically-typed and dynamically-typed .
One is essentially a toy , designed for writing small pieces of code , and traditionally used and abused by inexperienced programmers . The other is a scripting language for web browsers .
Overtly trollish , but somewhat funny .
Gave me a chuckle . Enough for +1
If we could do categorical votes , I'd vote +1 funny , but otherwise , meh .
I was about to berate you for dissing Javascript when it had come so far in the last few years . Then I rid the second paragraph and L'dOL . But , hang on a mo , Java is my main income earner ... :-)
I downvoted this , then read it properly , then upvoted it .
Poetry , Shog . Sheer poetry .
Perfect - +1 for humor , as someone else said , but -1 for actually answering the question .
downvoted for dissing Javascript , then noticing you were talking about JAVA and upvoted ( and lol'ed alot ) .
-1 factually incorrect and not that funny .
It's sad that I can only upvote once . This is going on my Facebook profile somewhere ...
ROFL ... That was funny .
But which language goes with which description(wasn't java meant to be used as a well not quite scripting but everything else for the net during some point in the 90s-by sun and netscape ) ? Also who writes small pieces of code in java ?
@Roman well of course , the proper Java way is to write at least 20 different classes using intricate inheritance and other cool OOP features to complete a FizzBuzz :)
Jeeez . I almost downvoted the answer , when I started to read the first sentence :D
twitted right after finishing laughing ...
Oh my gosh ... hilarious ! +1
Actually , javascript isn't just for browsers . It's a complete scripting language often used for many applications that requires scripts . And Java isn't just for inexperienced or idiots . It can acomplish many things within no time .
Brilliant . A heartfelt +1
They are independent languages with unrelated lineages . Brendan Eich created Javascript originally at Netscape . It was initially called Mocha . The choice of Javascript as a name was a nod , if you will , to the then ascendant Java programming language , developed at Sun by Patrick Naughton , James Gosling , et . al .
Javascript isn't just for HTML pages , Java6 now includes it , BIRT uses it for report scripting - I'm sure that there are other non-HTML uses beyond these two .
You're right . With the development of Rhino , and some of the other developments you mentioned , Javascript has come pretty far out of the browser sandbox .
Scripting is simply one particular kind of programming ... instead you should say perhaps that Java is a compiled programming language and javascript is a scripting or interpreted programming language .
Take a look at the Wikipedia link JavaScript , despite the name , is essentially unrelated to the Java programming language , although both have the common C syntax , and JavaScript copies many Java names and naming conventions . The language was originally named " LiveScript " but was renamed in a co-marketing deal between Netscape and Sun , in exchange for Netscape bundling Sun's Java runtime with their then-dominant browser . The key design principles within JavaScript are inherited from the Self and Scheme programming languages .
They have nothing to do with each other . Java is statically typed , compiles , runs on its own VM . Javascript is dynamically typed , interpreted , and runs in a browser . It also has first-class functions and anonymous functions , which Java does not . It has direct access to web-page elements , which makes it useful for doing client-side processing . They are also somewhat similar in syntax , but that's about it .
Like everybody's saying , they're pretty much entirely different . However , if you need a scripting language for your Java application , Javascript is actually a really good choice . There are ways to get Javascript running in the JVM and you can access and manipulate Java classes pretty seamlessly once you do .
In addittion to being entirely different languages , in my experience : Java looks nice at first , later it gets annoying . JavaScript looks awful and hopeless at first , then gradually you really start to like it . ( But this may just have more to do with my preference of functional programming over OO programming ... ;)
Same experience here .
Practically every PC in the world sells with at least one JavaScript interpreter installed on it . Most ( but not " practically all ") PCs have a Java VM installed .
A Re-Introduction to Javascript by the Mozilla team ( they make Firefox ) should explain it .
It's like they didn't bother to edit it even a little .
Java is to JavaScript as ham is to hamster
Where do you think ham comes from ? ;)
It comes from a big hamster ; it's so big that you could confuse it with a pig . ` ;) `
Don't be confused with name .. Java was created at Sun Microsystems ( now Oracle ) . But , JavaScript was created at Netscape ( now Mozilla ) in the early days of the Web , and technically , Java-Script is a trademark licensed from Sun Microsystems used to describe Netscape s implementation of the language . Netscape submitted the language for standardization to ECMA ( European Computer Manufacturer s Association ) and because of trademark issues , the standardized version of the language was stuck with the awkward name ECMAScript . For the same trademark reasons , Microsoft s version of the language is formally known as JScript . In practice , just about everyone calls the language JavaScript . The real name is ECMAScript . Both are fully different languages !!!
Actually , now that I read it over , I think I actually don't need to escape the string I'm sending back at all ... That is , StringEscapeUtils.escapeJavaScript would be useful if the resulting value was printed in the page , like : Or am I missing something and there would still be a valid reason to do the escape in the original case ? ( when it is returned as a series of bytes back to an ajax onreadystatechange handler and assigned to a js variable )
I'm not sure if I understand your problem exactly . Are you concerned about Person A logging off , Person B logs in from the same PC and browser instance , and then you want to prevent Person B from seeing whatever A was viewing ? If so , it should be sufficient to check the credentials of the user on every page load . Check that the current user is authorized to view the data being requested .
How will hitting the back button cause the user to see another user's data ? What is your use case ? Is it designed for a public terminal , where each user submits data and then leaves ? In this case , associate each input with a unique session id . Keep track of valid session ids in your server . Once the input is submitted , remove that session id from the valid ids . If it comes up again , then don't display the information .
I agree - it sounds like he's trying to solve a problem that shouldn't exist ... running the session as a singleton or something ?
Your problem is that you're trying to keep the client from seeing what's on his or her own computer . You can't keep them from looking at their browser cache . You can't keep them from disabling JavaScript ( and thus your scripting code ) . You can't keep them from using a browser that doesn't observe that " repost " convention that you mention . This is not a problem that can be solved with JavaScript or a server-side solution . That part of why " breaking the back button " is frowned upon : it doesn't actually solve anything .
Actually , you can turn caching off . Most browsers respect this , but it's not guaranteed .
As I mentioned in my post here , you can turn off caching but history may be treated differently by different user agents . The HTTP specification makes a distinction between the two but doesn't really define the concept of history as well as it defines caching .
I had a similar problem in . Net . I added the following javascript to my logout page : document.execCommand ( " ClearAuthenticationCache " , " false ") ; now if you press the back button you need to authenticate again .
Have you considered that a malicious user could simply turn off Javascript ?
It sounds like your real problem is that the re-post works . That would probably be because you : are trusting credentials from the browser rather than the current session , or are not checking that the current session is allowed access the data represented by a key / identifier value sent from the browser I recommend that after a user has logged in you never trust a user name submitted by the browser . Ideally use the security services of a framework like Spring Security but in their absence you can rely on HttpServletRequest.getUserPrincipal() . To make sure the current session is allowed access the data you could use an Access Control List mechanism provided by a framework such as Spring Security or include a WHERE OWNER= ? clause in your database queries .
If you're worried about someone seeing what was in a form in a previous page you could use a hidden form for the " real " post and use one that's just for display for the user . When the user submits the display form , you copy all of the fields to the hidden form , clear the display form , then submit the hidden one . I agree with everyone else - fiddling with the back button this is a bad way to handle protecting information .
I'm not 100% sure this is a fix to your issue , as I don't fully understand how you would get another user's data using back . However , I know that for the web apps I develop I try to exclusively use Redirect After Post to avoid back button and refresh duplicate form submissions .
Jeff Atwood described a way to prevent CSRF and XSRF attacks here . You could use this technique to solve your " users seeing what they should not see " problem .
I'm not sure I understand your problem correctly , but it sounds like you are allowing rePOSTs . One approach to prevent resubmission is to use tokens . Put a random token in the form and session . On submission check that the submitted token matches the token in the session if it does , replace the token in the session with a fresh one and process the request otherwise stop processing the request ) .
All of the different browsers have different behaviors and quirks when it comes to how history relates to the cache and the various headers available to control it . Firefox 3 works differently from Firefox 2 , re-displaying potentially sensitive data when a user clicks the back button in spite of using caching directives to prevent it . The best solution is to use a session cookie that is not persisted and inform the user of the need to close the browser window after logging out . Especially if they are at a public terminal . Painful , I know , but current browser offerings and the HTTP specification do not provide any mechanisms for dealing with browser history . History may be treated differently than caching by a user agent according to the HTTP specification . See 13.13 History Lists as defined in RFC 2616 Hypertext Transfer Protocol -- HTTP / 1.1 for the problem and rationale .
I think this is as much a user interface challenge as a coding problem . On top of whatever anti-caching techniques you employ , you need to make it clear to the user that they must hit a big , obvious " Logout " button ( or equivalent ) when they are done .
if this might help . This works for ASP , use an equivalent solution for other languages . % response.buffer = true% > % Response.CacheControl = " no-cache " % > % Response.AddHeader " Pragma " , " no-cache " % > % Response.Expires = -1 % >
Please see post below about equals sign ... ( what's with the 300 char limit on comments ? )
I have found two solutions to this . Here is the first one . Add back in padding to Base64 encoded strings . Inspiration for this came from http://fi.am/entry/urlsafe-base64-encodingdecoding-in-two-lines In this solution , the JavaScript stays the same ( base64 encode everything ) and the server side looks like : On the JavaScript side , you just need to make sure you base64 encode the values :
The second solution is just to URLEncode the Base64 encoded string . I'm using commons codec to do the encoding here . Java Code : But now I have to decode it on the JavaScript side as well ... Encode : Decode :
Is it possible to use JSTL to display a date in the client's timezone ?
In Javascript , I have this function to display the current date on our page header : I would like to do this via JSTL , but I'm not sure if it's possible . So far , I have this fragment of code : Because the date is now being created on the server , it may not represent the client's date . I believe that I can set the timeZone attribute of the formatDate function , but I'm unsure how to grab the client's timezone . Can somebody offer a suggestion ? Thanks !
All the information the server has is in the HTTP request which doesn't contain any info regarding time or timezone . So you have two options : Using a cookie you can store the timezone and then retrieve it in the server-side . The problem here is that you have to wait for the second request to use the timezone value . Using AJAX , with javascript and a XMLHttpRequest object you can push ' new Date() . getTimezoneOffset() ' value to the server , store it in a session var Maybe any of the options are too much if you just want to display time zone
That's certainly a creative idea , but more complicated than the SCRIPT I currently have ...
Yes , I poster this answer just if knowing the timezone is critical . All the information the server has is in the HTTP request which doesn't contain any info regarding time or timezone , so I guess it is impossible to know it if not using AJAX or a cookie
The only way I can see of doing this without asking the user for some information is to format the date with javascript . Not exactly the prettiest solution , I might add Alternately , you might consider displaying the time zone in the formatted date . This way , the user at least knows what time zone you're using .
How to load . js files into a Rhino context in Java
Are you aware that Rhino ships in Java 6 ? If you want to use it with Java 5 , you'll have to download the API separately . You can get engines for many popular scripting languages from scripting.dev.java.net .
" You can get engines for many popular scripting languages from scripting.dev.java.net . " No , we can't anymore . I know this is extremely old , but is there a newer link we should use ?
@hexafraction Try this question : http://stackoverflow.com/questions/11838369/where-can-i-find-a-list-of-available-jsr-223-scripting-languages
+1 Thanks , that and the web archive have [ helped] ( http://web.archive.org/web/20070610234337/https://scripting.dev.java.net/) , since the latter is just a bag of links , really .
Trouble accessing Java classes from Firefox extension's Javascript
you are incorrectly invoiking the method using ; which is passing an argument of type java.lang.Class [] into the signature that is expecting a String object . simply pass the parameters object in as it is .
public Method getMethod ( String name , Class ... parameterTypes ) throws NoSuchMethodException , SecurityException I guess he's right in that .
now I get this exception : InternalError : Unable to convert JavaScript value to Java value of type java.lang.Class []
try changing the two reflecting lines to ; var aStaticMethod = aClass.getMethod ( " main " , parameters.getClass() ); // gets the main ( String [] args ) method , here I get the exception * var myJava = aStaticMethod.invoke ( null , parameters ); removing the [] initializers since they already seem to have been created by the reflection call .
new error : There is no Java method java.lang.Class.getMethod that matches JavaScript argument types ( string , object ) . Candidate methods with the same name are : java.lang.reflect.Method getMethod ( java.lang.String , java.lang.Class [] )
assuming your complete class name is " your.package.Firefox " you could do :
how do I set the " args " value ?
ReferenceError : importPackage is not defined
in " plain " rhino this is supposed to work sorry :(
Hi , just following-up DFA's comment : Related info :: https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/LiveConnect_Overview/JavaScript_to_Java_Communication
I've already tried out all stuff from developer.mozilla.org , with no success ...
unEscape JavaScript escaped value in JAVA
in our web service we set a cookie through JavaScript wich we read again in Java ( Servlet ) however we need to escape the value of the cookie because it may contain illegal characters such as ' ' which messes up the cookie . is there a transparent way to escape ( JavaScript ) and unescape again ( JAVA ) for this ? thanks , Pieter Goddijn
Define " transparent way " .
In java you got StringEscapeUtils from Commons Lang to escape / unescape . In Javascript you escape through encodeURIComponent , but I think the Commons component I gave to you will satisfy your needs .
If you want to decode from encodeURIComponent see here http://stackoverflow.com/questions/607176/java-equivalent-to-javascripts-encodeuricomponent-that-produces-identical-outpu
Client JavaScript / ECMAScript : Server Java : I'll add further discoveries to my blog entry .
The most accurate way would be to Excecute javascript withing your java code . Hope the code below helps .
JSF Richfaces frontend performance tuning
I've developed a web application using MyFaces 1.2 . 6 and Richfaces 3.3 . 1GA ( just upgrated ) . Despite the ease of use , I found out that Richfaces components are very slow . I also found out that they didn't really take advantage of the browser caching mechanism , they keep sending some lousy JS file every request and other things . I really would like to apply some rules described in the " High PErformance WEbsites " book , but I can't change de generated js and HTML code . Does anyone have some tips for frontend performance tuning using Richfaces ? Thanks .
Have a read of this article . Are you using Firebug + YSlow to check what is being stored in the cache ? Using the web.xml org.richfaces.LoadScriptStrategy setting , you can tell Richfaces to either : Load all script in one file . Load no scripts ( you do it yourself instead - eg . in the manner prescribed by your book ) . Load scripts when needed ( the default ) . But some basic principles : Never put logic into your getters . They are called multiple times and should only return something already populated by another method . For example if you are chaining drop-downs together use an a4j : support tag on the first one with an action attribute that loads the data which is then retrieved when you reRender the second one . Use the ajaxSingle= " true " unless you actually want to send the whole form back to the server . Don't use a rich component if you only need a normal one . For example don't use rich :d ataTable unless you are making use of some of the features that it has over and above h :d ataTable .
+1 . And this is a second article by Dan Allen ( he is the author of both articles , and author of Seam in Action ): http://www.jsfcentral.com/articles/speed_up_your_jsf_app_2
You can use : org.ajax4jsf.DEFAULT_EXPIRE 31536000 So that all js , css files ( generated by richfaces ) are cached for 1 year on the browser . This really improved speed in our project . Also , we do not need to worry about if we change richfaces version as when we change richfaces version it will generate different files .
To add on to Damo , you can also add a small filter to cache such js or images to improve the performance . But exert caution in doing this , if files intended to cach involve frequent updates .
Sending MIDI messages in a Web page
Java is still probably going to be your best bet , even with the few users disabling it . I use NoScript , and I can whitelist a site . I would say that most users would probably do the same if you provide compelling content .
Found the following ( translated from Italian ) . I'd say Flash is the way to go . If you want to be ghetto you can just get 88 or so piano samples and play them against a timeline . http://translate.google.com/translate?prev=hp hl=en js=n u=http%3A%2F% 2Fflash.html.it %2Fguide%2Flezione%2F2936%2Fmidi-player%2F sl=it tl=en history_state0=
Which to learn first Java or javascript ?
With the intent on becoming fluent on both to do a mix of web and application coding . Would one facilitate learning the other ?
They are only loosely related one doesn't really feed into the other as much as one might think . Don't let the names fool you .
Java and JavaScript have just the similar name in common . Besides that , they are absolutely different .
Good points , @Copas and @Gumbo , but if one starts with 0 programming knowledge one does need to start _some_where ;-) .
You might make this CW because it doesn't really have an answer .
like the joke goes : java : javascript :: car : carpet .
@Lucas , I agree , should be a CW .
It depends on which one ( websites or programs ) that you want to make first . If you do want to make websites your not going to get to far with just JavaScript and HTML ( think about using JQuery ) . You might also want to learn ASP.NET , it will allow you to use C# ( very similar to Java ) to make rich websites with code that can run on the server and HTML / JavaScript to be displayed to the user . If you want to make programs look into Java or C# . I learned HTML -> JavaScript -> BASIC -> C++ -> C# -> ASP.NET . I started with websites then learned programming and in turn went back to making websites using C# as my programming language .
He does say he means to learn both , just wants tips on " which one _first_ " ...
@Alex : I updated my answer to reflect his real question . Thanks .
@Lucas : good points , though I disagree that " you won't get far " with Javascript ( and HTML and CSS ) , these days -- guess I'll add a note to my answer to that effect .
@Alex : What I meant by that was he wouldn't be able to do anything that must run on the server using JavaScript .
+1 Good answer , plus great links .
Wow , I didn't even know SSJS existed :-O
Beyond some of the basic syntax , they are not very similar at all . Go with whichever you find most interesting first .
Those two are very different techonologies . They have similar C-like syntax , but thats all that they have in common . Go for JavaScript if you want to make websites and Java if you want desktop / enterprise appliactions .
What do you want to be able to do first ? There are any number of languages which could be a first language and it really depends on what you want to do .
Apart from some superficial syntax and the name , the two have very little in common as languages . That being said , you can write useful ( if not very " modern ") webapps without JavaScript , but not without a server-side language like Java , so it might be better to start on that side ; it's also the overall more complex one , since it includes database access . Then again , there is Server-side JavaScript which would allow you to do everything in one language , but it's not a very common choice .
Java first , because you will be learning better programming habits that will be useful whatever second language you want to learn after . And it's less traumathic to make the transition from a static type system to a dynamic one than the reverse .
I would recommend start with Java . It would give you good basics in programming . With Java knowledge you can learn JavaScript , C# and other languages more easily . I don't think that would be the case if you would start with javascript .
Yeah , I wondered about the name coincidence . I guess I ll let the project dictate which one gets the most focus . You are correct about the infrastructure needs ( jvm vs web ) that each needs . Thanks y all
Naming is not a coincidence . It was a marketing decision . And JavaScript and Java are more similar than they might have been . The C syntax wasn't something Brendan Eich started with . He did make the language more Java-like as a result of the desire to have a " Java-like " syntax . I think that what we got with JavaScript ( a functional language with C syntax ) is really cool .
IMO , learn JavaScript first . You can be near guaranteed that you will come across a project / task where you need it . Definitely take a look at jquery , a great library for javascript . In terms of the application layer , if you are just learning now , Java is an OK decision to learn first , so is C# . Personally , I prefer the open source stack , Perl , Python or PHP as I believe there are a lot more resources out there to help you learn them . PHP will have the most resources , but Python is a better choice .
I would recommend learning a few different languages before learning JavaScript . Java for class-based object orientation ; LISP or similar for functional programming . JavaScript can accomodate several different paradigms and it's easier if you are already familiar with them . JavaScript does functional programming better than Python or Java , but not as easily as the " real " funcional programming languages . JavaScript has its own variety of prototype-based object orientation and does it well . You can force it to do object oriented programming in a Java-like way , but you're better off not calling functions " classes " and just calling them " prototypes " . It's difficult to model subclasses inheriting from base classes ; it's much easier to just accept the concept of objects inheriting from prototypes . JavaScript is much easier to learn and use if you are already familiar with the basic concepts . For instance , you should know about HashMaps from Java or the equivalent Dictionaries in Python or Property Lists in LISP . In JavaScript every object is a really super-efficient HashMap , so if your design can make use of that fact , use it .
Javascript source files on JBoss have the wrong content-type / mime type ?
I am writing a JSP application and am deploying it to JBoss 5.0 . When I attempt to retrieve my CSS or Javascript files , JBoss returns the wrong Content-type for the file , so Firefox refuses to execute code supplied in them . Here is my web.xml file : Using lynx to test the file download , I get the following : host > lynx http://devbox:8080/TestServlet/js/main.js -head -dump
I have found an answer by changing the following : to be this , instead : As a beginner to JSP , I'm not sure what tutorial I picked up the previous example from , but it had led to no amount of frustration . The lynx command now results in : This applies to CSS as well .
asynchronous file upload with java servlet
It is exactly the same . The client makes an HTTP request to the server ( by submitting a form ) . The server responds with some HTML ( which links to or embeds some JavaScript ) . Switching from PHP to Java is just a drop in replacement . You don't need to change any of the JavaScript . The user guide tells you how to set it up .
Could you tell me how to embed HTML to a redirect without JSP ?
Why would a redirect be involved ? The servelet just needs to output a text / html response .
A-Hah ! That just shows I'm really new to this AJAX thing . Was accustomed to redirecting to servlets and JSP . :) Thanks !
http://oreilly.com/pub/a/javascript/2002/02/08/iframe.html is the best idea to file-upload . i done file upload using hidden iframe . Please consult with attached link .
Ajax request parameters , what am I doing wrong ?
just a quick thought : Tried setting the parameter name to something other than the variable name ? " stepNumber : stepNumber " looks like it could cause some issues ...
trying that now I'll get back to you with an answer .
I've just noticed that the line " alert ( params.stepNumber ); " seems to show undefined . Am I not creating this array correctly ? I've also tried params[ " stepNumber " ] and thats undefined too .
I've changed the array to be step : stepNumber and it's not working . but at least params[ " step " ] is defined ...
Just as an aside ; for somewhat easier way to do Ajax with Java , you might want to check out DWR , http://directwebremoting.org
Thanks I'll have a look at DWR but at the moment I don't have the time to rip out my current code an replace it with other code .
After briefly checking the prototype documentation , your request looks valid . I recommend inspecting the content of the AJAX request directly . Use Firebug or an external HTTP sniffer like Charles Proxy to verify that the POST request contains your data . EDIT I totally missed it - you're definitely defining the object wrong . You can't reuse an existing symbol as an object property without properly delimiting it . When you don't do this ( let's assume stepNumber == 4 ) then your params object looks like this
I've looked at it incharlies proxy and I don't see an entry for the parameters ....
I've fixed this by changing the key to step , still not getting any parameters ....
Use getParameterNames() not getAttributeNames() . Read : http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletRequest.html and look at the interface function descriptions for the differences between them .
Thank you . Replaced the line in the java with : Integer pageNumber = ( Integer.parseInt ( request.getParameter ( " step "))) ; and it works like a charm .
Good Ajax framework for Java EE
I'm relatively new to Java EE and I'm in need of a framework that will simplify AJAX for me . At the moment I have code that uses the dojo toolkit to draw a graph , but I'd like to have the graph updatable via AJAX . is there a good framework that allows me to do Ajax call backs and insert and run javascript into a page ? If so is there a good tutorial on how to use this framework ? My only experience with Ajax is using Telerik under ASP.Net .
Dojo does AJAX too . Normally I'd recommend jQuery for this kind of thing but you're already using Dojo so you should probably use that . The two can be used together however , if desired .
There are some JSF component libraries that got more or less ajax support . ICEfaces for example , makes all the standard components ajax'ish and offers server push techniques . Check out the jsfmatrix to get an overview .
javascript : having trouble passing form values to javascript and processing it to httprequest
Here are some things to try : In your JavaScript , encode your URL paraemters with encodeURIComponent : Next , you may have to set the encoding on the request using setCharacterEncoding Last , I think if you call request.getParameter , it does the URLDecoding for you .
looks like you should be url encoding your request parameter values in your javascript tempUrl += " ? partnumber= " +partnumber+ " " + " itemdescription= " +escape ( itemdescription ) + " " + " itemshortdescription= " +escape ( itemdescription.substring ( 0 , 37 ))
escape and unescape are deprecated - https://developer.mozilla.org/En/Core_JavaScript_1.5_Guide/Predefined_Functions/Escape_and_unescape_Functions
thanks for letting me know :)
Launching a desktop application from a web site
Is it feasible to launch an application via a browser / URL ? What are the options for doing this ? I know the way to do it with IE and Windows ( which usually doesn't work ) . Ideally , I would like this to be browser independent . Our application is RCP , so in theory Java Web Start could work , we would just have to do some significant changes to how we deliver our application to users , which I would like to avoid . Our web server code is currently all Java if that makes a difference . I pretty much gave up on this until I clicked a url on Apple's site , which in turn launched iTunes . How does Apple do that ?
If this is OS independent , then you can't rely on any specific program being available . What kind of program would you want to launch anyway ?
Silverlight 3 and Adobe Air will let you launch applications outside the browser .
Is ext js compatible with . jsp , java backend ?
Is ext js compatible with . jsp , java backend ?
In short , yes , but see the following article , in terms for ease of use integration ( tag library ) wise : http://raibledesigns.com/rd/entry/ext_js_tag_library and the referenced article : http://blog.james-carr.org/2008/01/22/making-extjs-more-accessible-to-java-developers /
so , its yes . k , thanks .
Ext JS is a javascript library . It exists at the client side of the browser . So it doesn't matter whether you use PHP , JSP or ASP.Net , as long as a browser supports javascript , ExtJS will work there .
Perhaps a better way of understanding your lack of knowledge is to ask why or what is so special about javascript they would mean a java backend would not work ... Google " json " ...
I strongly recommend taking a look at Grails . It lives in the java world , and plays extremely nice together with ExtJS . For example , you probably will have to generate and parse a lot of JSON between server and ExtJS client , and Grails does that as if it was a language built-in .
Which mechanism may be used to access Java methods which conflict with JavaScript keywords ?
I've a Javascript source that uses a Java class that defines a " delete " method ( using jdk6 scripting ) . Since delete is a keyword , I cannot invoke that method . In JavaFX script any sequence of characters enclosed in > is treated as a lexical identifier . So you can use " insert " , that is a keyword , as an identifier : Javascript provides a way to protect keywords ?
In javascript you would do :
How to check whether JavaScript is enabled in client browser using Java code
can anyone help me in trying to check whether JavaScript is enabled in client browser using Java code .
A simple thing would be to do a call back from the page , such as an AJAX call . I don't think there's any other way to determine this , at least not universally .
Are you trying to do this server-side or on the client in an applet ? If a browser does not support javascript ( or has it turned off ) , it's highly unlikely they will have support for Java applets .
If a form submit is performed , you can put a hidden input in the form and fill out its value with javascript ( from OnSubmit ) and check that on the server side .
Assuming you're writing a Java web application , one technique that I've used successfully is to have the first page that's accessed typically a login form write a session cookie when the page loads . Then have the Java code that the form submits to check for the existence of that cookie . On the client : On the server :
In yourform for you can put code like this : The parameter should only be submitted if the browser has scripts turned off . In your Java applications you can check it like so :
I like this idea ... but is it a cross-browser solution ? It seems like something IE6 would love to mess up .
Why do you say that ? Have you tried it ?
If you have PHP support just copy and paste the code below . wish you a good luck and don't forget to make your code open
JSP or JavaScript equivalent to PHP's $_SERVER[ " HTTP_HOST " ] ?
I've go an absolute URL in my JavaScript that I have hard coded for window.location . I don't want to have to change this every time I am testing my app . In PHP I would have handled this by testing the $_SERVER[ " HTTP_HOST " ] variable to find out what server I am on , and adjust accordingly . However , I'm not as familiar with Java and am wondering if it has a similar method ? Or if maybe even JavaScript had a similar method ? The code is as follows : What I would like to do is : In PHP I would have just done this : Any ideas ? I suppose I'm operating under the assumption that you have to do an absolute URL to change the location of the current window in JavaScript . If there is another way to change the window location in JavaScript without an absolute URL , please feel free to offer that as well . Thanks in advance ...
You really should have search for this but in JSP it's :
Javascript :
The location object has several properties , and the one you'd want is hostname . Or , you can optionally just use a root-relative URL and just set the pathname property and not mess with the host business at all !
What you need is : An example :
Maybe this could help . It will replace any words you want by anything or nothing . It will work for your request too .
Difference between class ( java ) and closure ( javascript ) ?
I don't understand how closure is more powerful than class . It looks like I can achieve the same behavior of closure using class . Any help would be appreciated
Can you provide a link for the statement that one or the other paradigm is more powerful ? Please also define what you mean by " powerful " .
A closure and a class are two very different things . It is not correct to say ' A class is more powerful that a closure . ' or vise a versa . They do totally different things . A closure is in a basic sense , a function call that retains the local variable information from the scope it was created . A class is a definition of an object . The class defines behavior and the contents of instances of the class .
Doesn't a closure retain the variables from the scope in which it's declared ? ( not called , necessarily )
oops . thanks .
and it should be mentioned that javascript has a prototype system
I'm not sure what led you to this question , but something you've been told or something you read has severely misled you . Ignoring language altogether , a closure and a class are completely unrelated structures / conventions in programming .
syntactically may be , but you can emulate one with the other in java for example , and they are not tooo different from each other when you start thinking about it .
thank you for the koan .
Will I become enlightened when I figure out how to pronounce Qc Na ?
It sounds like one hand clapping .
@Sebasti nGrignoli - In particular , one that is applauding the felling of a tree in a vacant forest .
This is a good question but could be better worded : " What are some similarities and differences between Java objects and JavaScript closures " ? Similarities : they both have persistent state in their local variables . Their methods have access to those state variables . Differences : Javascript is a functional language , therefore functions within functions can be immediately invoked and returned . For example : So you can write code like this snippet copy / pasted from rhino shell :
Strut2 validation , Overriding css_xhtml theme
HI Folks , I'm using the Struts 2 validation . And for displaying the custom error messages I'm overriding the css_xhtml .. and the validation.js for client side validation . Every thing is going well but the validation is on form submit .. can i do it for all the form fields Onblur event .. Any suggestion highly appreciated Thanks in Adavance Cheers , Vinayak V B
you can use the jquery plugin to have onblur ( client side ) validation on your forms . Furthermore , you may use DWR validation for struts2 . You will have to go through some setup procedures that involve adding the DWR.xml in your configuration file but once all that is done , you will be able to have AJAX validation on your forms . Example
You could just call the forms onsubmit function through an onblur handler . Something like :
Trouble calling an applet method from page
I know it's not optimal , but I have to work with it , a page making calls to the applet . My problem is , when I do so , I recieve a rather cryptic error message : " uncaught exception : Error calling method on NPObject ! [ plugin exception : java.lang.reflect.InvocationTargetException ] . " Can anyone decode this ? Even multiple possibilities would be better than the junk I came up with . The basic call to the applet is from a javascript call : As you can see , the passData method is the exposed method I am trying to use . The applet itself works fine on the page , it's just when I try to call this , it doesn't do anything except throw that error . If I ask the person working on the applet ( it's not my portion ) is it possible for them to add constructive error throwing or am I not even at the point of connecting to the applet yet ?
InvocationTargetException indicates that the underlying method in your applet threw an exception . The Javascript to Java " boundary " uses reflection , so exceptions thrown by the Java code are wrapped like this . ( This makes it possible to distinguish them from exceptions thrown before you got into your Java code . For example , if you tried to call a non-existant method . ) You can get the original exception by catching the InvocationTargetException and then calling its getTargetException() or getCause() method ( they both do exactly the same thing ) .
Thanks , that's definitely going to help out . I'll leave the question open in case I get any more hits , but I'll check back tomorrow morning in case anyone has any more insight on it .
I'd suggest you look into what someOtherData is . If someOtherData isn't a correct type it could cause such an exception . It sounds like you're trying to pass a DOM object ? Take a look at this page in O'Reilly's JavaScript Guide to see available types .
The string I was passing was not being received correctly by the exposed Java applet method .
Could you elaborate ?
jQuery and Java applets
I'm working on a project where we're using a Java applet for part of the UI ( a map , specifically ) , but building the rest of the UI around the applet in HTML / JavaScript , communicating with the applet through LiveConnect / NPAPI . A little bizarre , I know , but let's presume that setup is not under discussion . I started out planning on using jQuery as my JavaScript framework , but I've run into two issues . Issue the first : Selecting the applet doesn't provide access to the applet's methods . Java : JavaScript : Running the above JavaScript results in $ ( " #applet -id ") . foo is not a function This is in contrast to Prototype , where the analogous code does work : So...where'd the applet methods go ? Issue the second : There's a known problem with jQuery and applets in Firefox 2 : http://www.pengoworks.com/workshop/jquery/bug_applet/jquery_applet_bug.htm It's a long shot , but does anybody know of a workaround ? I suspect this problem isn't fixable , which will mean switching to Prototype . Thanks for the help !
For the first issue , how about trying For the second issue here is a thread with a possible workaround . Quoting the workaround change that code to :
How does one record audio from a Javascript based webapp ?
I'm trying to write a web-app that records WAV files ( eg : from the user's microphone ) . I know Javascript alone can not do this , but I'm interested in the least proprietary method to augment my Javascript with . My targeted browsers are Firefox for PC and Mac ( so no ActiveX ) . Please share your experiences with this . I gather it can be done with Flash ( but not as a WAV formated file ) . I gather it can be done with Java ( but not without code-signing ) . Are these the only options ? @dominic -mazzoni I'd like to record the file as a WAV because because the purpose of the webapp will be to assemble a library of good quality short soundbites . I estimate upload will be 50 MB , which is well worth it for the quality . The app will only be used on our intranet . UPDATE : There's now an alternate solution thanks to JetPack's upcoming Audio API : See https://wiki.mozilla.org/Labs/Jetpack/JEP/18
Maybe you find this useful : https://github.com/milani/microphone.js
Flash is going to be your best solution . Hopefully this will help : http://www.kirupa.com/forum/showthread.php?t=17331
Yes I believe Flash or a Java-Applet are the only ways to do that . Since you cannot interact with a microphone you must use some sort of browser-plugin , its the only way to use the microphone . I'm not aware of any other plugin that would provide that features . A quick search on Google did not reveal any further possibilities . I think the easiest would be going with Flash .
Your only options are Flash , Java , ActiveX , or writing a custom Firefox extension . Flash is probably your best option - you could write or use an existing Flash app to do the recording and keep almost everything else in pure Javascript . Why do you want a WAV file ? If you're planning to process the actual bits of the waveform on the client , then that's probably a bad idea ; the client might be really slow and you wouldn't be able to really manipulate the file . If you want to send the sound back to the server , then it's much better to send a compressed file , and then uncompress it on the server .
Flash requires you to use a media server ( note : I'm still using Flash MX , but a quick Google search brings up documentation for Flash CS3 that seems to concur - note that Flash CS4 is out soon , might change then ) . Macromedia / Adobe aim to flog you their media server , but the Red5 open-source project might be suitible for your project : http://osflash.org/red5 I think Java is going to be more suitible . I've seen an applet that might do what you want over on Moodle ( an open-source virtual learning environment ): http://64.233.183.104/search?q=cache:k27rcY8QNWoJ:moodle.org/mod/forum/discuss.php%3Fd%3D51231+moodlespeex hl=en ct=clnk cd=1 gl=uk ( membership-required site , but open to Google , hence the link goes to the Google cache page ) .
As of Flash 10 you do not need a media server . You can capture the raw samples and send them to an arbitrary back-end with an HTTP post . https://code.google.com/p/wami-recorder /
You could download Real Producer Basic , which is free here ( http://forms.real.com/rnforms/products/tools/producerbasic ) , and imbed it as an activeX object since it's on your intranet . Flash will embed the same way , it's on all the office workstations , but since this is your Intranet , you could install it on all the machines with AD . Real audio files are very small compared to wav and sound great . Here's a link to the Real Sudio ActiveX how-to guide . http://service.real.com/help/library/guides/activex/producerx.html
This is a paid solution but it will do what you are looking for . http://www.javasonics.com /
Another solution if you don't mind your users installing a plugin is to use Runtime Revolution RevWeb plugin which supports recording audio in browser ( and is trivial to implement , I made a test applet to confirm this in about 10 minutes ) . http://revweb.runrev.com /
This is an old thread , but the issue remains relevant . It should be noted that there is a way to record audio to the server in Flash without a proprietary back-end . Here's an example project to get you started : https://code.google.com/p/wami-recorder /
I'd say this answer is better than the accepted one from 2008 , as it has the same effect but a dedicated server component is not required . It is still not a complete solution as it will not work on Apple mobile devices , which are widespread . Hopefully a reasonable cross platform standard which combines native recording , an open file format and plain HTTP post will emerge soon .
Write a Servlet that Talks to JMS ( ActiveMQ ) and OnMessage Update the Site
I am building a site that uses a simple AJAX Servlet to talk JMS ( ActiveMQ ) and when a message arrives from the topic to update the site . I have Javascript that creates an XMLHttpRequest for data . The Servlet processes the Get Request and sends back JSON . However I have no idea how to connect my Servlet into my ActiveMQ Message Broker . It just sends back dummy data right now . I am thinking the Servelt should implement the messagelistener . Then onMessage send data to the JavaScript page . But I'm not sure how to do this .
You probably need to get a JMS connection from JNDI , like this :
Okay ... this is a good way to connect to my Topic , thanks . I already have code like this is another Java Client . But I want the Servelt to implement the messagelistener . Then onMessage send data to the Javascript page .
The problem with having a servlet implement MessageListener is that servlets are synchronous and MessageListeners are asynchronous . Instead you should create some other object to act as the MessageListener and update some state somewhere ( possibly a database or a JMX MBean or a Stateful Session EJB ) when messages come in . Then the servlet can query that state to see if there's data to report back to the client , and your web page can periodically ping the servlet to ask for fresh data .
Thanks jodonnell .. I have never wrote a JMX MBean or Stateful Session EJB but after a quick google search I think this is the right path to look down . Thanks for the help .
Have you tried reading the answers for this question which links to the ActiveMQ Ajax support . Basically ActiveMQ has native support for Ajax so you can use its JavaScript library to directly subscribe from an ActiveMQ topic . Also see the ActiveMQ web samples which show how to do things like real time chat or real time stock portfolio screens using Ajax with ActiveMQ
As James Strachan says - http://activemq.apache.org/ajax.html is an ideal out-of-the-box solution for your problem . If you still want to create such solution manually you can just create JMS connection in your Ajax servlet ( connection per request ) . Consider using Spring JMS template for that reason ( http://static.springsource.org/spring/docs/2.5.x/reference/jms.html ) . Then just receive the message in the Servlet doGet / doPost method . Consider low timeout value for receiving in that case . Such solution will work for the Queues and durable Topics . For non-durable Topics consider external message listener . Spring MessageListenerContainer is an excellent tool for that purpose : Bean lastTenUpdatesCache will be a singleton bean implementing MesssageListener . This bean would be responsible for caching last ten messages ( just putting it into a java.util list ) . It will be injected into your Ajax servlet so in your doGet / doPost method you can ask it about last 10 messages sent to the topic .
Passing JS function to applet for as event listener
Is it possible to pass a function / callback from javascript to a java applet ? For example i have an applet with a button that when pressed it will call the passed js callback
You can use JSObject to call back into javascript from Java . From that page :
is it also possible to pass js function which is an object as the first argument of win.call instead the name of the js function ?
No , but instead of passing in the bare callback function you could create a new object containing it , pass that in then use the object.call ( name ) form .
I tend to use something I derived from the reflection example at the bottom of this page , as then you don't need to meddle with your classpath to get it to compile Then I just pass JSON strings around between the applet and javascript
thx for the link , it just contains all the possible methods
ps . to use JSObject you may need to include " MAYSCRIPT " tag to applet html tag .
JavaScript or Java String Subtraction
If you are using Java or JavaScript , is there a good way to do something like a String subtraction so that given two strings : you just get I know that I could just write code to walk the string comparing characters , but I was hoping there was a way to do it in really compact way . EDIT TO A DD: As I was analyzing the data I get when I use this I realized that I missed the statement of the case a bit . It should be : So , I actually only want to remove the sections that are identical . That said , the answer that I accepted is closest to my goal .
I don't see how JavaScript is relevant here ...
How isn't it ? You never need to remove a string from another string in javascript ? Granted , all solutions have been posted in java , but that doesn't invalidate the question .
LOL - okay then , let's tag this as Java / JavaScript / C# / VB.NET / Python / Ruby / erlang / Smalltalk / Lisp / etc ... My point is , JavaScript and Java have nothing in common other than syntax shared with C# , C , C++ , etc . and this is not really a JavaScript solution .
Should work ... EDIT : Apache commons libraries are also great to use As noted below , the StringUtils class does in fact have a method for this : StringUtils.remove()
Can't you just replace the occurrences of the first string in the second with an empty string ?
Depends on precisely what you want . If you're looking for a way to compare strings in the general case -- meaning finding common sub-strings between arbitrary inputs -- then you're looking at something closer to the Levenshtein distance and similar algorithms . However , if all you need is prefix / suffix comparison , this should work : ... or something roughly to that effect .
Thanks Chris and Daniel ( and all the rest of you ) . That was amazingly fast .
This seems like way too much code for what's requested - Erickson's approach ( replace string B in string A with empty string ) is much simpler and readable .
@Herb Agreed , I do like Erickson's ( and Chris's ) approach much better for readability . However , his doesn't enforce strict prefix / suffix . The problem I have is the question is a bit ill-defined : what does String difference really mean ?
If you're just trying to get whatever's after the last dot , I find this method easy in Javascript : subString will contain the value you're looking for .
At first glance , I thought of RegExp , but adding to the question , you removed that possibility by adding to the start-string ... So you'll have to make a procedure , that takes every character that are equal out of the resulting string , something like this : By the way it doesn't have a meaning to set Java and javascript as equals in any context , a popular way of putting it could be : Java and javascript has four things in common : j - a - v - a ! - )
Though this relies on that the character with code 1 does not appear in any of those strings .
Java : Scripting language ( macro ) to embed into a Java desktop application
I am writing a graphics application in Java . Eventually I would like to build in a scripting language so things are programmable . Which language library do you recommend ? Likely suspects are : Rhino ( JavaScript ) JRuby ( Ruby ) Jython ( Python ) Less likely candidates are : Whip up my own language using JavaCC LuaJava ( Lua ) Groovy JavaFX Script-Fu The target audience are probably not hardcore programmers , so less arcane language is preferred . My guess is that JavaScript is more acceptable by them even with its quirks just because they've seen it more . Lua seems to be popular in C / C++ , but at least LuaJava requires additional . dll / . so , which makes deployment complicated . EDIT : PhiLho wrote that there's a Java implementation of Lua called kahlua . Related questions : Which scripting language to support in an existing codebase ? ( in C / C++ ) Adding Scripting functionality to . net Apps What is the best scripting language to embed in a C# desktop application .
if the target audience is " no programming skills .... " choose jython ( python ) it is easy to learn . ( my 7 year old daugther learned it very quick ) Bruce Eckel made a chapter with jython in " thinking in java " . at the danger getting a " down-vote " python is easier as BASIC :-)
+1 for -BASIC ;o )
Lua is appreciated , among other things , by the simplicity of the language , making it easy to learn . LuaJava uses the original Lua implementation , making it complete , but as you point it , maybe delicate to install . I know at least a pure Java implementation of Lua : Kahlua . It is not complete ( lacking coroutine support among other things , but one can do much without them ) but perhaps already usable for your goal . Unlike , say , Groovy , it shouldn't add much overhead to your application ...
There's also BeanShell , which has the advantage of being a fully-approved JSR , and so perhaps more likely to stick around . http://www.beanshell.org /
Plus side : it's basically dynamic Java , so it's really easy to attach it to a Java program . Minus side : it's basically dynamic Java , so it might not be the easiest language to learn .
If I like Java , and I use Java , but I don't want my users to know that they are running Java app , is that sort of like being ashamed of ugly girl friend ? No , right ?
You might consider Jacl . It is based on Tcl which was originally designed to be an embeddable scripting language . So , one could argue it is much more suited for that purpose than other scripting languages that had the ability to be embedded tacked-on . Particularly if the target audience is " not hardcore programmers " , Jacl makes a fine choice . Intelligent people ( and especially those without hard-wired programming prejudices ) can easily pick up the Tcl syntax in a morning .
If you wanted to go all out you could utilize scripting for the Java Platform as defined by JSR 223 . Taking that approach would allow the application to utilize any language that has a conforming script engine .
" The Mozilla Rhino engine for the JavaScript programming language , however , is currently included as a feature in the JDK 6 and JRE 6 libraries . " Does this put Rhino slightly ahead of everyone else ?
In theory it does . I'm not really sure that is what has happened in reality yet .
Java 6 already has javascript available as a JSR 223 scripting language , out of the box .
It ships with Rhino , which I commented on laz's answer too . In theory , this is the official endorsement .
You can use RelProxy - Java , it provides real and pure Java as a scripting language , including shell scripts made with Java , thanks to its compilation on the fly . Because the Java " script " is executed sharing the launcher ClassLoader , integration is straightforward .
Dynamicaly populating a combobox with values from a Map based on what's selected in another combobox
Thanks for your answer , Phill . Actually , I'm using Spring . While your answer is a nice one , I'd still like to hear some other opinions :-)
How about something like this , using prototype ? First , your select box of categories : Then , you output N different select boxes , one for each of the sub-categories : Your changeCategory javascript function disables all selects with class categorySelect , and then enables just the one for your current categoryID . When you hide / disable like this in prototype , it not only hides it on the page , but it will keep that FORM variable from posting . So even though you have N selects with the same FORM variable name ( myFormVar ) , only the active one posts .
If I understand this correctly , every time a car manufacturer is added or removed from the Map , I'd have to add or remove the appropriate select tag in the JSP . Since I get this Map from a vendor's web service , I have no way of knowing how many elements the Map might have .
And , I still don't know of a way to retrieve the names of the cars . The name of the car being a String in a Car object , that's stored in a List that's stored as a value in a Map . Whew ... talk about complicated ...
Not that long ago I thought about something similar . Using jQuery and the TexoTela add-on it wasn't all that difficult . First , you have a data structure like the map mentioned above : Your HTML should look comparable to : Then , you fill the first combo with jQuery code like : where manufacturerSelected is the callback registered on the onChange event This should do the trick . Please note that there may be syntax errors in there ; I have edited my code to reflect your use case and had to strip quite a lot out . If this helps I would appreciate a comment .
First of all , thanks for your answer , extraneon . I'll use it if I don't find any other way . However , there are two issues here . The first one is that I'm not doing this for my own personal project , but as a part of a larger enterprise app for the company I'm currently employed at . Because of that ,
I might not be allowed to use JQuery . They're a bit touchy when it comes to introducing new frameworks in the app . But , if I can't get it to work any other way , I'll just have to get my boss to convince the business guys that that's the only way to do it . However , the larger issue is getting the map
to work in JavaScript . I already mentioned that I'm getting it from a webservice , and my controller passes it to JSP , so I can't just hardcode it in JavaScript , I have to be able to map my map to a JavaScript object , so that I can manipulate it there . I'm still working on my own solution , though , so
if I get anywhere , I'll post the solution here . Once again , everybody , thanks for all the answers , and excuse me for the long comment .
As an add-on on my previous post ; You can put a script tag in your JSP where you iterate over your map . An example about iterating over maps can be found in Maps in Struts . What you would like to achieve ( if you don't care about form submission ) is I think something like : You still have some superfuous " , " which you might wish to prevent , but I think this should do the trick .
I just love a challenge . No jQuery , just plain javascript , tested on Safari . I'd like to add the following remarks in advance : It's faily long due to the error checking . Two parts are generated ; the first script node with the Map and the contents of the manufacterer SELECT Works on My Machine ( TM ) ( Safari / OS X ) There is no ( css ) styling applied . I have bad taste so it's no use anyway . .
Very nice , extraneon ! However , the map is still hardcoded , so the challenge is still on ... :-) To be honest , i managed to solve the problem , although the solution isn't pretty . The populating part is done pretty much the way you did it . I haven't posted it yet ' cause i have a lot to do but I'll post
it as soon as I can , probably the day after tomorrow . Although your solution isn't complete , I'm giving you a vote up , just for the effort you put into it :-) Hint : my solution involves using a scriptlet .
OK . I should have written a JSP and dynamically generate modelsPerManufacturer and the manufacturer SELECT . using nothing but the input Map . I'll update the answer tonight ( it's now 7am here ) .
Here is a working , cut-and-paste answer in jsp without any tag libraries or external dependencies whatsoever . The map with models is hardcoded but shouldn't pose any problems . I separated this answer from my previous answer as the added JSP does not improve readability . And in ' real life ' I would not burden my JSP with all the embedded logic but put it in a class somewhere . Or use tags . All that " first " stuff is to prevent superfluos " , " in the generated code . Using a foreach dosn't give you any knowledge about the amount of elements , so you check for last . You can also skip the first-element handling and strip the last " , " afterwards by decreasing the builder length by 1 .
Well anyway , as i said , i finally managed to do it by myself , so here's my answer ... I receive the map from my controller like this ( I'm using Spring , don't know how this works with other frameworks ): These are my combos : I imported the following classes ( some names have , of course , been changed ): And here's the code that does all the hard work :
How do you restrict the size of a file being uploaded with JavaScript ( or Java ) without transferring the entire file ?
Is there a way to validate on the client side browser whether the size of a file being uploaded from a JSP page is over a set size limit without forcing the user to upload the entire file only to find out it was too large ? I would like to stay away from any proprietary controls or techniques like Flash or ActiveX if possible . Thanks !
This isn't a perfect solution , but if you check the Content-Length HTTP header with request.getHeader ( " Content-Length ") then you can choose to not transfer the entire file . By way of explanation , an extremely large file will not be transferred all at once . You'd have to actually open a stream representing that chunk of POST data and read from it for the entire thing to be transfered . On the other hand , if you're worried about denial-of-service attacks , then you can't really trust the Content-Length header , because it can easily be forged . In this case , you should set a limit and stream a transfer of this file , stopping as soon as you've exceeded that limit .
Suggest you reconsider the Flash decision and take a look at the YUI Uploader , here : http://developer.yahoo.com/yui/uploader Among other things , the fileSelect event will tell you the size of the selected file in bytes immediately after it is selected but before it's uploaded , so you'll be able to restrict accordingly .
With JSP or PHP you won't be able to restrict the file size because your page won't get the request until the upload has already happened . At that point you can decide not to save the file but that might be too late . There are some Java solutions out there , e.g. MyUploader or Hermes . Some even support multiple file uploads and resuming partial uploads , and some also give you the source code . You can also write your own , but it will need to be a signed applet in order to function because it needs to access the local filesystem . If you're using Apache as your webserver you'll need enough RAM in your machine to fit the whole file size in memory of all files being uploaded at a given time .
How do I call Java code from JavaScript code in Wicket ?
If I can do this , how do I call Java code ( methods for instance ) from within JavaScript code , in Wicket .
Assuming you mean JavaScript running on the client - you cause an HTTP redirect to be made to the server , and have your servlet react to the request for the given URL . This is known as Ajax , and there are a number of libraries that help you do it ..
http://www.wicket-library.com/wicket-examples-6.0.x/index.html has plenty of examples to get you going . Or have a Have a look at DWR http://directwebremoting.org DWR allows Javascript in a browser to interact with Java on a server and helps you manipulate web pages with the results . As Dorward mentioned this is done via AJAX
Broken link http://wicketstuff.org/wicket13/ajax /
erk . The correct answer would be ajax call backs . You can either manually code the js to hook into the wicket js , or you can setup the callbacks from wicket components in java . For example , from AjaxLazyLoadPanel : This example shows how to add call back code to any Component in Wicket . After the OnDomReady event fires in your browser , when loading a page , Wicket will cause it's js enging , to call back into your code , using Ajax , to the ' respond ' method shown above , at which point you can execute Java code on the server , and potentially add components to the ajax target to be re-rendered . To do it manually , from js , you can hook into wicket's system by printing out getCallbackScript() . toString() to a attribute on a wicket component , which you'll then be able to access from js . Calling this url from js manually with wicket's wicketAjaxGet from wicket- ajax.js . Check out the mailing list for lot's of conversation on this topic : http://www.nabble.com/Wicket-and-javascript-ts24336438.html#a24336438
the last link does not work
Excerpt from https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html If you add any class that extends AbstractDefaultAjaxBehavior to your page , wicket- ajax.js will be added to the header ofyour web page . wicket- ajax.js provides you with two basic methods to call your component : and Here is an example : JavaScript $url$ is obtained from the method abstractDefaultAjaxBehavior.getCallbackUrl() . If you paste the String returned from that method into your browser , you'll invoke the respond method , the same applies for the javascript method . You can optionally add arguments by appending these to the URL string . They take the form foo =b ar . you get the optional arguments in the Java response method like this : or this :
Worth mentioning that the API for extracting parameters has changed in Wicket 1.5 . Having called ` RequestCycle.get() . getRequest() ` to obtain a ` Request ` object , you must now call ` getQueryParameters() ` ( for GET params ) , ` getPostParameters() ` ( for POST params ) , or ` getRequestParameters() ` ( for all at once ) . Each returns an ` IRequestParameters ` instance that you can query for parameters . See [ the API docs] ( http://wicket.apache.org/apidocs/1.5/) .
Oh , and a gotcha : the URL returned by ` getCallbackUrl() ` can change during the component construction cycle . It's often inaccurate if you try to use it in the constructor , and callbacks will fail as a result . I've had success using it in an override of the component's ` onBeforeRender() ` instead .
Testing onbeforeunload events from Selenium
I'm trying to write a Selenium test for a web page that uses an onbeforeunload event to prompt the user before leaving . Selenium doesn't seem to recognize the confirmation dialog that comes up , or to provide a way to hit OK or Cancel . Is there any way to do this ? I'm using the Java Selenium driver , if that's relevant .
Warning : this gives an alternate solution Watij -- http://watij.com -- can help here . Or if you're comfortable with ruby , watir can help -- http://wtr.rubyforge.org/install.html
You could write a user extension ( or just some JavaScript in a storeEval etc ) that tests that window.onbeforeunload is set , and then replaces it with null before continuing on from the page . Ugly , but ought to get you off the page .
I didn't end up doing this ( my requirements changed such that I was better off using a regular alert anyway ) , but this looks like it would do the trick , and is close to how Selenium handles testing for other alerts .
it was just a matter of adding ` js_eval " window.onbeforeunload =null "` before an open for me . ( selenium-client in Ruby , but you should be able to easily translate to other languages )
When I was confronted with limited control which I had over browser using Selenium , I turned to MozLab plugin which solved my problem if only for one browser platform .
I've just had to do this for an application of mine where the onbeforeunload handler brings up a prompt if a user leaves a page while a document is in an unsaved state . Python code : The Java equivalent would be : If the alert does not exist , the code above will fail with a NoAlertPresentException so there is no need for a separate test to check the existence before accepting the prompt . I'm running Selenium 2.43 . 0 but I think this has been doable for a while now . In cases where I don't want the prompt to come up at all because that's not what I'm testing , I run custom JavaScript in the browser to set window.onbeforeunload to null before leaving the page . I put this in the test teardown code .
Calling JS from Applet : MalformedURLException : unknown protocol : javascript
I read that you could call JavaScript code from a Java Applet by calling However , when I do this i get the following error : How do I work around this ?
Works !! Maybe the browser does not have javascript enabled .. just a guess
I get the same exception as you do because of that the URL class does not accept javascript : as a valid protocol . There is a workaround though ; supply an URLStreamHandler to the URL constructor . Example :
This opens a new tab in Firefox , but the page and location address are both empty . Nothing happens .. :/
Nevermind , apparently my Firefox 3.0 . 3 on Ubuntu is bugged :) It works perfectly on other computers . Thanks !
Spreadsheet-like control for a web application ?
I've been in a team that has built this using a . NET + jQuery setup - it's not fun , and makes your mind MELT . If you have the option of using a silverlight grid I'd take that option over javascript .
This question was already asked a couple of times . Check this out : http://stackoverflow.com/questions/58289/excel-like-server-side-control-for-aspnet#58295 but there are more .
I'd say this comes down to data grids . For Javascript frameworks : Jquery has ' plugins ' like this . Serverside : Telerik has asp.net controls like this . It really comes down to what platform mix you want to use . Also , why do you want to bind an asp.net page to IE instead of Firefox ? For a web application , my recommendation would be a mix of asp.net mvc and jquery . JQuery is in my view the best and most stable JavaScript framework out there . The problem is that asp.net mvc is still in ctp phase and it's probably not ' supported ' and ' stable ' enough in some eyes . I already finished a mid-scale commercial web app based on the mixture and was pleased with it .
I would consider a solution based on google docs / apps or similar and background web services .
Check out SpreadsheetGear , as is a . Net component that will allow you to read / write Excel files and execute macros . You can preserve the logic of the spreadsheets and use them to power you web site . For a front end you may want to check out Telerik as people have created a spreadsheet like interface with the Telerik grid control .
Check out ZK Spreadsheet its cool .
It sounds like EASA might meet your needs . It's a codeless app development tool in use at companies like Zurich , GE , HP . You may like to have a look at http://www.easasoftware.com/spreadsheets . Hope this helps .
Here you can download GelSheet an opensource web based spreadsheet . It is written on PHP / MySql / Javascript You can contact the developers at sourceforege project page for any customizations It's the best solution I found and I'm using it as a part of a personal project .
Scripting in Java
Me and some friends are writing a MORPG in Java , and we would like to use a scripting language to , eg . to create quests . We have non experience with scripting in Java . We have used Python , but we are very inexperienced with it . One of us also have used Javascript . What scripting language should we use ? What scripting language should we not use ?
How about Jython ? http://www.jython.org/Project /
I agree with Viktor's Jython suggestion . Other than that and JavaScript ( which you've mentioned , and is built into Java 6+ via the javax.script package ) , Groovy and JRuby are also worth looking at too . By the way , you should look at Wyvern , also an MMORPG written in Java and using Jython for scripting . Steve Yegge , its author , has much to say about it from time to time . :-)
Java supports a variety of ( scripting ) languages , some are listed in Wikipedia here and here . You probably should choose language with powerful DSL and metaprogramming capabilities , such as Clojure . But if you need something simpler , JavaScript might be a viable alternative .
See Java : Scripting language ( macro ) to embed into a Java desktop application
You have quite a few options : Groovy - http://groovy.codehaus.org Jython - http://www.jython.org/Project JRuby - http://jruby.codehaus.org Possibly even BeanShell ( http://www.beanshell.org ) I'm a fan of Python myself so I'd recommend Jython , but they're probably all reasonable options .
what about creating your own specialized scripting language ? If your app is written with java , you can use ANTLR ( http://www.antlr.org ) to create your language parsing code . The reason I say this is because a general purpose scripting language may provide too much power ( because the script it to be used for quests only i assume ) . But if making your own language is too hard then any of the above suggestions works - you just have to figure out how to bind the game's runtime into the script . I also suggest Lua ( http://www.lua.org ) as another choice that lots of games use .
I am a big fan of Python / Jython due to the clean syntax - which may suit you if you have some python experience . Otherwise Groovy which is based on Java syntax and may be an easier learning curve if most of your developers are Java guys . It also has the advantage of closer ties with the Java language and libraries . Beanshell is good if you have simple scripting in mind - it doesn't support classes . However I don't think it has had any support over the last few years ( the JSR seemed to kill it off ... ) so is perhaps a bad choice if support is important to you .
I would have to recommend Javascript for this purpose . Mozilla Rhino http://www.mozilla.org/rhino is an excellent implementation that would fit your needs perfectly . I recommend Javascript over Jython or JRuby because of familiarity . Trivial Javascript follows a very familiar syntax that anybody can use . However if someone wants to do something more intense , Javascript is a very powerful functional programming language . I regularly use Groovy and Ruby professionally and believe that their purpose is best for writing parts of applications with particularly complex logic where Java is cumbersome to write . Javascript is a much better choice as an embedded , general scripting language to use in a game . I haven't used Python , but it's syntactically similar to Ruby and I would believe it's purpose would also be similar .
If you were to start from scratch in 2012 would you approach the " glue components together " differently ?
There is one good reason for including a scripting language , namely where you need to be able to add new functionality ( which hence cannot be configured ) without redeployment .
But Java has support for ( re- ) loading classes , and using some thought and reflection will take you a long way . If necessary .
You still need to compile the revised Java classes .
Compiling should an be infinitesimal issue compared to incorporating a scripting language , in all the ways I can think of .
LuaJ seems to be a nice way to embed Lua into Java : http://sourceforge.net/projects/luaj /
Wicket + Javascript
I'm wrapping up a Javascript widget in a Wicket component . I want to let the JS side talk to the component . What I've got so far : Component in question goes like in constructor and then , later on , puts something like into the JS . where GridAjaxBehavior extends AbstractDefaultAjaxBehavior . I want GridAjaxBehavior to spit back some XML when the JS calls it . Am I doing this the right way ? What should GridAjaxBehaviour do to spit back the XML ? Thanks
FYI , there's an error in your javascript emit . You're missing the right hand paren and semicolon , but you're also missing quotes around the supplied string . ... new talker ( "" + this.talker.getCallbackURL() + " ") ; " ; or something like that .
PSA : Wicket ~= a Java Framework . http://wicket.apache.org/introduction.html
please show a link to GridAjaxBehavior - i know wicket a bit , but GridAjaxBehavior is new to me . is this a custom developed behavior
I don't really know what Wicket is or what it does , but there is a minor bug in your code ( as it appears ) . This : " var MyGridTalker = new talker ( " + this.talker.getCallbackUrl() ; You seem to be missing your end parens : " var MyGridTalker = new talker ( " + this.talker.getCallbackUrl() + ")" ; Anyway , not a big deal , but didn't know if it was intentional .
Write a Servlet that Talks to JMS ( ActiveMQ ) and OnMessage Update the Site
I am building a site that uses a simple AJAX Servlet to talk JMS ( ActiveMQ ) and when a message arrives from the topic to update the site . I have Javascript that creates an XMLHttpRequest for data . The Servlet processes the Get Request and sends back JSON . However I have no idea how to connect my Servlet into my ActiveMQ Message Broker . It just sends back dummy data right now . I am thinking the Servelt should implement the messagelistener . Then onMessage send data to the JavaScript page . But I'm not sure how to do this .
You probably need to get a JMS connection from JNDI , like this :
Okay ... this is a good way to connect to my Topic , thanks . I already have code like this is another Java Client . But I want the Servelt to implement the messagelistener . Then onMessage send data to the Javascript page .
The problem with having a servlet implement MessageListener is that servlets are synchronous and MessageListeners are asynchronous . Instead you should create some other object to act as the MessageListener and update some state somewhere ( possibly a database or a JMX MBean or a Stateful Session EJB ) when messages come in . Then the servlet can query that state to see if there's data to report back to the client , and your web page can periodically ping the servlet to ask for fresh data .
Thanks jodonnell .. I have never wrote a JMX MBean or Stateful Session EJB but after a quick google search I think this is the right path to look down . Thanks for the help .
Have you tried reading the answers for this question which links to the ActiveMQ Ajax support . Basically ActiveMQ has native support for Ajax so you can use its JavaScript library to directly subscribe from an ActiveMQ topic . Also see the ActiveMQ web samples which show how to do things like real time chat or real time stock portfolio screens using Ajax with ActiveMQ
As James Strachan says - http://activemq.apache.org/ajax.html is an ideal out-of-the-box solution for your problem . If you still want to create such solution manually you can just create JMS connection in your Ajax servlet ( connection per request ) . Consider using Spring JMS template for that reason ( http://static.springsource.org/spring/docs/2.5.x/reference/jms.html ) . Then just receive the message in the Servlet doGet / doPost method . Consider low timeout value for receiving in that case . Such solution will work for the Queues and durable Topics . For non-durable Topics consider external message listener . Spring MessageListenerContainer is an excellent tool for that purpose : Bean lastTenUpdatesCache will be a singleton bean implementing MesssageListener . This bean would be responsible for caching last ten messages ( just putting it into a java.util list ) . It will be injected into your Ajax servlet so in your doGet / doPost method you can ask it about last 10 messages sent to the topic .
Integration of JavaScript and JMS
Where can I find a guide for integrating JavaScript and JMS ( Java Messaging Service ) ? I would like a best practice or established technology that allows me to directly or indirectly receive messages from a topic and update a site based on the message . I was thinking of creating two components , a servlet for the Web module , and an MDB ( Message-Driven Bean ) for the EJB module . The web client will comsume messages from the JMS topic , and the MDB will handle the onMessage . Does this sound correct ? Have you seen any examples ? Edit : I am using ActiveMQ for the JMS .
I would try using DWR to integrate JavaScript with your Java app . It makes Java to JavaScript communication transparent and only requires one servlet + configuration of what to expose . I haven t done this with JMS , but it should work the same . There are three technologies that together solve all my integration problems , Spring , Mule , and DWR .
I'll second DWR - excellent ( and painless ! ) to integrate any server-side based Java and JavaScript on the client front-end
You'll find some references to the Dojo / Bayeux approach here http://www.pathf.com/blogs/2006/08/bayeux_a_json_p If you're using WebSphere 6.0 or higher then the Web 2.0 Feature Pack includes an implementation .
I think this is your answer . Looks like it is baked in to ActieMQ . I tried the examples and they seem to work . http://activemq.apache.org/ajax.html
I was able to get the examples to work on Version 5.0 of ActiveMQ . However they have trouble running in 5.1 . Which version of ActiveMQ are you running ?
We did have a lot of problems with this servlet , and we did abandon it completely ...
The Seam framework supports subscription to JMS topics from a JavaScript based client : http://docs.jboss.com/seam/2.0.2.GA/reference/en-US/html/remoting.html#d0e14169
How to conduct blackbox testing on an AJAX application ?
What's the best , crossplatform way to perform blackbox tests on AJAX web applications ? Ideally , the solution should have the following attributes : Able to integrate into a continuous integration build loop Cross platform so I you can run it on Windows laptops and Linux continuous integration servers Easy way to script the interactions Free-as-in-freedom so you can adapt it into your tool chain if necessary I've looked into HttpUnit but I'm not conviced it can handle AJAX-heavy websites .
Selenium might be what you're looking for : http://selenium.openqa.org It allows you to script actions and evaluate the results . It's open-source ( Apache 2.0 ) , cross platform , and has nice tools .
I have used Selenium for exactly this task , but found it to be brittle . Check out this talk by two Googlers : Does my button look big in this ? Building testable AJAX applications They isolate the testable javascript ( non DOM-interaction ) and test that using the Rhino javascript engine .
What is the best way to use Ext JS as part of Java / Spring / Hibernate based web application ?
We want to try Ext JS on new project . Is there any well-known best practice for integrating Ext JS with server side Java ( Spring / Hibernate / JS ) application ? Is DWR a good choice for that ?
It's perfectly fine to build your application using Ext JS / DWR / Spring / Hibernate .
Yes it's possible . I've done the same thing with . NET : UI in ext-JS which communicates with the server trough JSON . In . NET world you can use DataContractSerializer ( class from WCF ) or JavascriptSerializer ( ASP.NET ) I'm sure that there's several good JSON Serializer in the Java world too . I used Jabsorb ( but not enough to give you a solid feedback ) . It appears that other people have tried : [ link text][2 ] [ 2 ]: http://extjs.com/forum/showthread.php?t=30759 forum ext-js
In our application we subclass Ext.data.DataProxy like this : You use it with a store like so : Our actual proxy class has some additional debug and error handling code that I left out for simplicity . You may also need to manipulate your data slightly so that the Ext.data.JsonReader can handle it , but that's the basic idea . SomeService is the JavaScript name you specified for whatever bean you exposed in dwr.xml ( or your Spring config ) .
My team has been using Ext with DWR for almost year a year , and have had nothing but good things to say . If you take this approach , you will end up using DWR's generated JavaScript classes for making your requests to the server . This will often be done in place of using the Ext.Ajax and Ext.data.Connection classes . When you use a class that require an Ext.data.Store ( e.g. grip , combo box , etc . ) and you want to fetch data from the server , you will need to use a proxy that can link in with DWR . The user-community provided Ext.ux.data.DWRProxy has worked flawlessly for us : http://extjs.com/forum/showthread.php?t=23884 .
Just wanted to report that we are doing this now and it works quite good . We also are using DWRProxy just like suggested .
Take a look at Grails , it plays well together with ExtJS .
How can you run Javascript using Rhino for Java in a sandbox ?
Part of our java application needs to run javascript that is written by non-developers . These non-developers are using javascript for data formatting . ( Simple logic and string concatenation mostly ) . My question is how can I setup the execution of these scripts to make sure scripting errors don't have a major negative impact on the rest of the application . Need to guard against infinite loops Guard against spawning new threads . Limit access to services and environment File system ( Example : If a disgruntled script writer decided to delete files ) Database ( Same thing delete database records ) Basically I need to setup the javascript scope to only include exactly what they need and no more .
Do you mean to say ( Javascript using Rhino ) for ( Java in a sandbox ) , or ( Javascript using ( Rhino for Java )) ( in a sandbox ) ?
Javascript is single-threaded and can't access the filesystem , so I don't think you have to worry about those . I'm not sure if there's a way to set a timeout to guard against infinite loops , but you could always spawn a ( Java ) thread that executes the script , and then kill the thread after so much time .
Rhino has a threading library available to it ( java.lang.Thread ! ) , and can access the file system .
To guard against infinite loops , you'd need to put it in a separate process so that it could be killed . To guard against creating threads , you'd need to extend SecurityManager ( the default implementation allows untrusted code to access non-root thread groups ) . Java security does allow you to prevent access to the file system . For database restrictions , you might be able to use the standard SQL user security , but that is quite weak . Otherwise , you need to provide an API that enforces your restrictions . Edit : I should point out that the version of Rhino provided with JDK6 has had security work done on it , but doesn't include the compiler .
To guard against infinite loops , you can observe the instruction count as the script runs ( this works only with interpreted scripts , not with compiled ones ) . There is this example in the Rhino JavaDocs to prevent a script from running for more than ten seconds :
To block Java class and method access have a look at ... http://codeutopia.net/blog/2009/01/02/sandboxing-rhino-in-java /
I just ran across this blog post that seems to be useful for sandboxing more or less anything ( not just Rhino ): http://calumleslie.blogspot.com/2008/06/simple-jvm-sandboxing.html
How to Cross-Compile Java Source Code to JavaScript ?
Given a set of Java source code files , how can I compile them into one or more JavaScript files that can be used with hand-crafted JavaScript ? GWT is one option , but every example I've seen so far is aimed at building fancy websites . The simple use case of just converting Java source to Javascript that can be used together with handcrafted JavaScript hasn't been well-documented . I started a thread on the GWT mailing list on this subject , but opinions seem to be mixed on whether this is even feasible . One person gave a very useful tip , which was to check out GWT-Exporter . The problem is that neither source code nor documentation is readily available , although there's this and this . edit : GWT-Exporter source code is here I've also seen Java2Script . But again , I wasn't able to find examples of how to solve my simple use case . What's the best approach to this problem ? Is there something better I'm missing ?
This question discusses a very similar topic : compiling Java libraries to JavaScript using GWT . http://stackoverflow.com/questions/3125556/gwt-to-create-utility-javascript-library
Very thorough question . You did a great job expressing what you'd explored already . Nicely done .
You can try using Scala-js https://github.com/lampepfl/scala-js for your java project - java / scala interoperability http://www.scala-lang.org/old/faq/4 )
When you use GWT , you're basically converting the UI portion into Javascript ( and it assumes that you use the UI widgets provided when you write your Java ) . Only some of the Java libraries are accessible within Javascript . Typically in a GWT application anything that makes heavy use of Java libraries would run on the server side and connect to the Javascript as AJAX ( which GWT handles for you ) . So GWT isn't necessarily converting your full application into Javascript ( though it can if you're willing to limit your use of Java libraries and some functionality ) . At any rate , if this approach ( calling out to Java running on a server from within Javascript ) appeals to you , one nice option is DWR , which basically allows your Javascript to directly call methods in Java classes running on the server ( without you having to build a web service or other frontend ) . Not what you asked , I know . More relevantly , it looks like there's source code for a sample app demonstrating the use of gwt-exporter .
This would be for a fairly small , non-gui java library . I hadn't seen DWR , which looks like it could be very useful for larger projects . I Didn't even see the source directory for the gwt-exporter project - thanks for pointing it out . That looks promising .
gwt-exporter link is dead
Here's a new link to the sample app : http://code.google.com/p/gwt-exporter/source/browse/trunk/samples/src/main/java/exporterdemo/public/ExporterDemo.html
The new link is also dead . :/
And here's a new link : https://code.google.com/p/gwt-exporter/source/browse/samples/exporterdemo/src/main/java/exporterdemo/public/ExporterDemo.html
Also , here's a link to the project home of gwt-exporter -- that's less likely to change ( the sample app changes location when they change their directory format ): https://code.google.com/p/gwt-exporter /
Also you can use QWT It has Java2JavaScript compiler on the board .
java and javascript callbacks compared
It seems I don't understand javascript callbacks quite as well as I thought . In the following example , I would think that each copy of function in setTimeout would refer to its own copy of the variable " index " . Therefore , running the example should produce the following alerts : " zero " " one " " two " . However , it seems that theres only one copy of the index variable , and all copies of the callback function point to the same variable , giving me the following alerts : " two " " two " " two " . The following analagous ( I thought ) example in java prints " zero " " one " " two " , as expected . Can anyone explain to me why the js example doesn't work , and perhaps compare what's going on in the two examples ?
Have you seen : http://stackoverflow.com/questions/442985/how-can-one-de-reference-javascript-variables-when-enclosing-an-outer-scope
Prestaul , thank , that's pretty much my same question . I looked for similar questions before I posted but didn't find this one .
I asked [ an almost identical][1 ] question yesterday and got a couple of different variations in the answers and some discussion on the merits of each . Might be worth a look [ 1 ]: http://stackoverflow.com/questions/442985/how-can-one-de-reference-javascript-variables-when-enclosing-an-outer-scope
index changes with each iteration of the loop . What you want is to place index into a closure not affected by the loop :
Thanks . I guess I thought that each iteration of the for loop would create a closure .
Well yes , technically I left that part out . There * is * a closure around index . But it is declared in an outer scope to the function passed to setTimeout . " closure " ! = " unchanging variable " .
Cool . One more question : why does the function declaration need to be wrapped in parens ?
@morgancodes : that's just convention ; also , there might be some cases where the parser might otherwise produce incorrect results
Firefox tells me there's a syntax error if I leave them out .
closures in javascript ( references to variables outside the function ) retain their association ... if you refer to a loop variable in a function called after the loop ends , in the function call you get the value of that variable after the loop .
the function call / parens / etc create a copy of the value " i " into the variable " index " , at the time of each iteration of the loop .
In javascript the for loop does not have it's own scope - so a var you create inside a loop is not different from one defined outside of it .
Private Members In JavaScript is my favorite reference on closures . It is written as a recipe for providing private variables in JS objects ( maybe useful , maybe not ) but in the process goes through an excellent introduction of how closures work in general , and especially in JS . The comp.lang.javascript FAQ has a worthwhile section on closures as well . Closures can be confusing so I put together a working example of the shortest useful closure I've come across , which was in the Rhino book . Oh and I don't have enough rep to comment yet :) but I saw your question above about why you have to put parenthesis around functions sometimes . That's only necessary when you invoke an anonymous function inline . For example the parenthesis are required here : Because you are creating a function and then immediately invoking it . But the parens are not necessary in the usual case where you are just declaring a named function for later use .
Thanks Noah . that rhino book example is cool .
String length differs from Javascript to Java code
I've got a JSP page with a piece of Javascript validation code which limits to a certain amount of characters on submit . I'm using a textarea so I can't simply use a length attribute like in a input type= " text " . I use document.getElementById ( " text ") . value.length to get the string length . I'm running Firefox 3.0 on Windows ( but I've tested this behavior with IE 6 also ) . The form gets submitted to a J2EE servlet . In my Java servlet the string length of the parameter is larger than 2000 ! I've noticed that this can easily be reproduced by adding carriage returns in the textarea . I've used Firebug to assert the length of the textare and it really is 2000 characters long . On the Java side though , the carriage returns get converted to UNIX style ( rn , instead of n ) , thus the string length differs ! Am I missing something obvious here or what ? If not , how would you reliably ( cross-platform / browser ) make sure that the textarea is limited .
@Fran ois : Always enclose things in tag brackets in back-ticks ( e.g. format them as code ) , or they will be stripped out on display of your question .
just stumbled across such situation . your topic made my day , sir ! thanks a lot !
Do you particularly care which line-endings are used ? Why not just make the Java convert " rn " to " n " ? ( Note that " rn " is the Windows style ; " n " is the Unix style . ) Alternatively , do the reverse when checking the length within the JavaScript .
OK . I get it . I guess that means that Javascript always represents carriage returns the UNIX way internally and through its APIs ( i.e. ` length() `) . Somehow I gets converted to ` rn ` because the Java VM is running on Windows . I wish it was more uniform ...
+1 , normalizing sounds good here
I don't know what rules different browsers on servlet engines will apply , but normalization should remove the differences either way . Btw , it's worth trying on macs too , where r is the normal linebreak .
+1 Just remove all " r " and everybody will be happy , whatever platform you are using . Macs included .
Are you limiting it to 2000 chars so it fits inside an nvarchar ( 2000 ) column in a database ? Otherwise maybe just allow a 2% overrun to be flexible on the Java side . And Java should be using Unicode UTF16 to represent Strings . That / r must have got in there somewhere else , maybe a conversion in the web browser when submitting ? Have you tried different browsers ? On different platforms ? You might just have to strip out the / r s .
This isn't really a JavaScript ( or Java ) problem - both layers report an accurate length for the string they are dealing with . The problem in your case is that the string gets transformed during the HTTP transmission . If you absolutely must ensure that the string doesn't exceed a certain length , you can mimic this transformation on the client by replacing every instance of " n " with " nr " - but only for length verification purposes :
Note : The code should be ` textarea.value.replace (/ n / g , " nr ") . length ` to find all occurrences . The original code only looks for the first match .
Thanks . Fixed it .
It should be `" rn "` , not `" nr "` .
To remember that the right order is ` rn ` , remember ` r ` stands for Carriage ? eturn ( ` Cr `) and ` n ` stands for ( ? ew ) Line Feed ( ` Lf `) in ` CrLf ` .
I think you need to do the line ending conversion / check on both client and server because you don't know what line endings the client browser is going to use ( Firefox submits n even on Windows ) and if you develop server side on Windows and deploy on Linux then the line endings will be handled differently .
Lobo Cobra HtmlPanel does not update GUI after JavaScript action
HI , I started implementing a HTML Browser in Swing . I want to use the Lobo Cobra toolkit because this toolkit inclused a renderer and parser for CSS and JavaScript . The pages are looking very nice and it is easy to use ( one class implementation to show a html page ) . I want to show HTML pages in swing which can show javascript generated and modified objects , like a flashing circle . As far as i know , the cobra toolkit can show static javascript commands like ' document.write ' or closwWindow() implementations , but not updating the GUI from a JavaScript . Did someone works with Lobo Cobra Toolkit before and give me some sample code or tips for showing HTML pages with animated JavaScript objects inside .
I'm under the impression that , as long as you set yourself up for notifications , your code will be called for all changes to the DOM whether done on page load or dynamically by Javascript following the page load . I would initially set up an object ( X ) implementing the DocumentNotificationListener interface and log a message for every method called . Then set that up as a listener with Y.addDocumentNotificationListener ( X ) [ where Y is your HTMLDocumentImpl object ] and load up your page to see which methods are actually called . Worst case is that you'll have to re-render your HTML page on every method call , but you should be able to optimize most of them . For example , changing colors of a node ( DOM object ) , which results in the X.lookInvalidated ( ... ) being called , wouldn't require re-rendering of the whole page as the node size doesn't change .
Returning JSON in GWT
I'm still pretty new to JSON and GWT and I'm trying to figure out how to pass JSON data back from a page into my GWT app . I pass the JSON back to a class : It's pretty basic and not complete at this moment so I'm just trying ( for now ) to make sure I can get something back . The code to call this is : However I get an error : No source code is available for type XYZ.GetProductTree ; did you forget to inherit a required module ? I am importing the correct package for XYZ.GetProductTree on the call page . What am I missing ?
This error is from the compiler , complaining that it can't find that type in it's classpath . For the GWT compiler to find your classes they have to be and in your classpath , and they have to be referenced in a . gwt.xml module file as well . Can you post your package names and the contents of your . gwt.xml files ? My guess is that wherever you have put this class it's not visible to the GWT compiler .
I am so obtuse sometimes . I forgot about having to add the source path for my new package . I added this to a " data " package which I just created and didn't add the path to the XML . Thanks :)
Is it possible to obtain a web-browser's Java VM without using an applet ?
We have an ages old Java applet that we want to move forward to a newer version of Java ( 5 or 6 ) , however until today we've always supported people using Java VMs as far back as version 1.1 ( specifically for those still using the Microsoft VM ) As part of the upgrade , we'd like to be able to serve a web page to people using out-of-date VMs telling them which versions we now support and where they can download them from . Ideally we want to do this without having to serve a Java 1.1 applet first just to determine the JVM version . Answers to either of the following ( with code samples if possible ) would be appreciated : Question 1 : is it possible to determine the JVM in a script on the server using information from the HTTP headers ? Question 2 : is it possible to determine the information on the client using just JavaScript ?
Q1 : no Q2 : yes , but I don't know how portable that is : That outputs a table of all plugins , versions should be contained . I think you have to loop over all the plugins , check if ' java ' is contained in the name and then parse the version from description ...
Up-voted for the short , but sweet , answer to Q1 - that's what I thought . Unfortunately , Q2 doesn't appear to port as far as IE6 - mine's getting navigator.plugins.length as 0 :-(
A german website says it is supported in JavaScript 1.1 , Netscape 3.0 , Opera 5.12 , Firefox 1.0 , Konqueror 3.1 , Safari 1 and higher and ( exactly ) IE for Mac 5.0 :-( . Perhaps any of all these JS libs has something for that ...
There is a deployment toolkit for doing this sort of thing . Serving an applet shouldn't be too bad . It can either be a 1x1 pixel bug , or use your normal applet with a small 1.1 class that forwards the applet lifecycle methods if it can load your 1.5 code . Nobody should still be using 1.1 . It hasn't had security bugs fixed in it for years .
We actually already serve an applet to determine the VM as we have two versions , one of which works around bugs in MS JVM ( but doesn't work on Sun ) and one of which is the other way round . The powers that be think this approach is too clunky going forward , so I'm tasked with looking for another way .
Oh , and just because nobody * should * be using 1.1 , this does not mean none of our customers * are * using 1.1 , unfortunately :-(
This script seems to do the trick on all major browsers : http://www.pinlady.net/PluginDetect/JavaDetect.htm
Seems quite complex considering it might run an applet anyway for its " NOTF " approach ; we might as well just go straight to that option . Plus I'm not sure I want to run code written by someone who uses the idiom " Java142Installed = Java142Status == 1 ? true : false "
Well , I have to admit I didn't go beyond testing it actually worked .
I think the deployment toolkit might do what you want . Use the runApplet() function in deployJava to ensure that a minimum Java Runtime Environment is available on a client machine before launching the applet .
Looks like the deployment toolkit is the " proper " way forward , so I've accepted this answer as it included a link to the appropriate page ( sorry , tackline - I know you suggested the toolkit first , but them's the breaks ) . Meanwhile , we'll be using our tried-and-tested launch an applet approach !
Good choice for a lightweight checksum algorithm ?
So the whole TCP / IP checksum thing isn't working ... I'm thinking that anything corrupted in transit is going to get rejected at a much lower layer than the application level .
Yeah , this sounds like something usually left to the transport layer . Can you explain your scenario a little more ? Where is your data being sent and what specific causes of data corruption are you trying to guard against ?
@dtsazza - you mentioned in a comment below that this is for security ( malicious users ) . Can you elaborate ? Especially since this will probably run in a browser .
Use SHA-1 JS implementation . It's not as slow as you think ( Firefox 3.0 on Core 2 Duo 2.4 Ghz hashes over 100KB per second ) .
[ UPDATE 30 / 5 / 2013 : The link to the old JS CRC32 implementation died , so I've now linked to a different one . ] Google CRC32 : fast , and much lighter weight than MD5 et al . There is a Javascript implementation here .
Link now broken unfortunately .
@JamesWestgate : Thanks James , I've found a new one and linked to that . Incidentally the first JS version I found ( at http://noteslog.com/post/crc32-for-javascript/) actually reparses part of the string containing the table for each character processed , which will make it * much * slower than necessary .
Awesome ! Thanks :) Looking for something to checksum javascript functions for a browser based animation code generation tool .
CRC32 is not too hard to implement in any language , it is good enough to detect simple data corruption and when implemted in a good fashion , it is very fast . However you can also try Adler32 , which is almost equally good as CRC32 , but it's even easier to implement ( and about equally fast ) . Adler32 in the Wikipedia CRC32 JavaScript implementation sample Either of these two ( or maybe even both ) are available in Java right out of the box .
CRC32 , definitely was designed to be exactly what you describe .
A word of caution : the JavaScript in the link implements the algorithm with a table[256 ] of literal values . If you should modify even a single digit of that table , you will have a nasty bug that is very , very , hard to find ! I prefer implementations that generate the table on the 1st call .
I'll second @D .i.S's comment . Testability is a minus .
Javascript implementation of MD4 , MD5 and SHA1 . BSD license .
Are aware that both TCP and UDP ( and IP , and Ethernet , and ... ) already provide checksum protection to data in transit ? Unless you're doing something really weird , if you're seeing corruption , something is very wrong . I suggest starting with a memory tester . Also , you receive strong data integrity protection if you use SSL / TLS .
Yes , I am was aware of that , though you were right to point it out . Unfortunately it's in input coming from the world at large , so we need to be able to cope with this anyway ( malicious / mischevious users could mangle this for example ) .
It might be worth pointing out that for any change-detection algorithm , there is always a chance that it won't detect an error . They all can have collisions or false-negatives , though usually the more expensive algorithms reduce this chance to near-astronomically small probabilities .
@dtsazza : I wonder about the malicious / mischievous users who can mangle packets going across the network , but can't defeat Javascript . Or Adler32 .
Other people have mentioned CRC32 already , but here's a link to the W3C implementation of CRC-32 for PNG , as one of the few well-known , reputable sites with a reference CRC implementation . ( A few years back I tried to find a well-known site with a CRC algorithm or at least one that cited the source for its algorithm , was almost tearing my hair out until I found the PNG page . )
Here's a relatively simple one I've ' invented ' - there's no mathematical research behind it but it's extremely fast and works in practice . I've also included the Java equivalent that tests the algorithm and shows that there's less than 1 in 10,000,000 chance of failure ( it takes a minute or two to run ) . JavaScript Java
Why ? Would you like to share an example ?
This is a rather old thread but I suspect it is still viewed quite often so - if all you need is a short but reliable piece of code to generate a checksum the Adler32 bit algorithm has to be your choice . Here is the JavaScript code The corresponding fiddle demonsrating the algorithm in action is here .
Detect version of Java using JavaScript
Is there a reliable way of detecting what version of Java is installed on the client's machine using JavaScript ?
Check out the solution [ here] ( http://www.spiration.co.uk/post/1186/Java%20detect%20brower,%20JVM%20vendor,%20Java%20version%20etc) . Works like a charm ( at least on the local machine , yet I didn't test it on different environments ) .
Check out the code in the Java Deployment Toolkit .
In case someone comes across this again , note the toolkit has a major flaw : it returns the highest version of Java that is installed on the machine , not the highest version that is actually runnable ( in IE , at any rate ) . Specifically , if you have both a Sun JRE and MSJVM installed , the toolkit will report the Sun JRE version even if it's disabled and the browser will actually run MSJVM . Adam Bellaire's link below seems more reliable , albeit less " clean " because it requires running an actual applet .
Update : This link is now broken . It looks like Adam Bellaire's link is going to be the one to use .
Moreover , this method makes the MSIE gold security warning bar to be popped up under MSIE7 with Sun JDK before 1.6 . 0_2 ( with Middle-High security settings ) . See http://www.pinlady.net/PluginDetect for a version which does not raise security warnings ( and is maintained ) .
Googling for detect " java version " using javascript yields a couple of results , this one looks like it might be useful . In essence , it tries to load a Java applet and then JavaScript asks the applet .
Ironically , this page is now the first search result on Google for ` detect " java version " using javascript `
You can use the PluginDetect library from here : http://www.pinlady.net/PluginDetect /
If you use Google Analytics , this post might be helpful ( see the forum thread for more details ) .
According to the fact that we're finding this page with google , just to help the next guys finding this . Is Java installed ? http://www.w3schools.com/jsref/met_nav_javaenabled.asp Which version of Java is installed ? http://java.sun.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit It's the best way I found to find the version of Java with JavaScript , but use it carefully because its version detection is really os / browser dependent , and on old browser version or on recent browser with old Java installed , it'll not work as expected . Take the time to do real tests before to use it in production .
That does not give any information about the version ( which the question is about ) .
You're right , I didn't answer where I thought I was . Fixed my answer .
This is just a duplicate of [ Rich Apodaca's previous answer] ( http://stackoverflow.com/a/440227/157247) , and Dan's comment on it applies .
Yeah ... just make it more explicite for thoses who doesn't understand everything on the page he gave , or if ever the link dies ... or just to save some time to the next guys who find this page via Google . I didn't mean to steal one's good answer .
@T . J.Crowder Top 0.02 % user gets schooled by a first time answerer in Stack Overflow's philosophy of making the internet better . That's something you don't see every day .
@PatrickMcElhaney : The correct way to improve someone else's answer is to improve someone else's answer . ( And the answer as it was at the time of that comment was not the answer it is now . )
@T . J.Crowder I'm not sure sarlak had any options at his disposal at the time other than posting a new answer . He couldn't post a comment and probably couldn't suggest an edit either .
@PatrickMcElhaney : Right . And there's a reason for those restrictions on new users . But I'm not going to prolong the discussion . :-) Best ,
This doesn't work unless the j in deployJava is capitalized , just FYI .
The detection logic does not work in IE32 on Windows7-64 . It could not detect the java version it installed earlier . Well , after further reading , the Java Deployment Toolkit on Windows uses ActiveX classid which may pose your app to hackers ( see http://www.kb.cert.org/vuls/id/886582 ) . I am out .
Version of Java : Is Java and is Java enable : These functions works on Opera , Firefox , Chrome . I havn't IE .
JavaVersion does not work under MSIE since navigator.mimeTypes is always empty on this browser ( tested on MSIE7 )
I find that the JavaScript solution provided by the Java Deployment Toolkit gives an error ... " deployJava.do_initialize is not a function " . One solution that I have used extensively for many years that does work in all browsers is the Java Version Display Applet . Unfortunately the original author's site seems to have disappeared , but you can download a copy of the Java Version Display Applet here .
To use the Gears WorkerPool in GWT do I have to write the same code in Java and Javascript ?
I have never used Gears for GWT , but after reading your evidence , I believe you are correct in stating that the WorkerPool class can run only JavaScript files and not Java-compiled-to-JavaScript . Here is a quote from the GWT-Gears v1.1.1 WorkerPool API . WorkerPool module allows web applications to run JavaScript code in the background , without blocking the main page's script execution . Currently this class can only create worker threads out of raw JavaScript code . That is , user code cannot currently create worker bodies from Java code . The WorkerPool class manages the threads and communication , which is no small task .
How to access objects / arrays defined in JavaScript from Java applets
Using LiveConnect getMember ( String ) method of a window JSObject , a Java object of type " Object " is returned but I don't find the expected members defined on it . Neither can I cast it to a JSObject to continue using the getMember() . Accessing DOM nodes and elements ( DOM Objects ) works as expected .
It's rather unclear what exactly you're trying to do - how about showing us some sourcecode ?
When you say you can't cast , do you get a specific exception or error ?
@andynormancx Yes . That processing cannot cast from Object to JSObject .
@Michael Borgwardt This is what I'm trying to do . Global JavaScript Object . Processing code . This is perhaps not Processing specific . That's why I didn't originally post the code .
I'm confused by the line got2 = win.getMember ( " obj ") ; . It seems like you're expecting that line to get the foo object . As I understand it , win.getMember ( " obj ") will get you the obj property on the DOM window node , which doesn't exist . For example , from this page : If you want to get the foo object , the best way I'm aware of is to make a JavaScript method you can call from the Java applet . JavaScript : Applet :
MDC says that it's supposed to be a " JavaScript Object " . Whatever that means . https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/LiveConnect/JSObject
Yes , but I don't get why you expect it to get the " foo " object . " JavaScript object " just means it's a object from JavaScript that's been translated to a Java object , specifically JSObject .
Did that work for you ? Because it's giving me an exception .
It did . What's your exception ?
Exception in thread " Animation Thread " java.lang.NullPointerException at js_processing_api.draw ( js_processing_api.java : 34 ) at processing.core.PApplet.handleDraw ( PApplet.java : 1406 ) at processing.core.PApplet.run ( PApplet.java : 1311 ) at java.lang.Thread.run ( Thread.java : 619 )
Random guess : try clearing your classloader cache ? Bring up your Java console ( Tools - Java console in FF , or right click on the Java icon in your systray and pick the console ) , and hit x to clear it , then reload .
I did try that . It throws the error when I click on the applet .
I'm not sure I have any more suggestions for you , except to be pedantic - are you using the exact code I wrote above ? I can get the exception if I have getFoo return null , but my line number is 32 instead of 34 , so I suspect you have something else there as well .
It works now . Thanks .. I don't know what the error was but I copy pasted your code and viola it works . Thanks a ton .
There's another problem , how may I assign it the values I get to a variable . The type appears to be an Object and I can't cast it to float or string .
How to transfer java array to javaScript array using jsp ?
I have a list of strings on my server which I am trying to get to the client in the form of an array . The code I am attempting to use is the following : Within the jsp I have a List String column I am attempting the following code : This code simply returns the first element in the columns list for every element in the colArray . I have also tried : which does not work either . I feel like I am making a little mistake somewhere and am just not seeing it . Is what I am trying to do possible in the way that I am attempting ? Thanks .
You're getting the JSP code that is executed on the server mixed up with the JavaScript code that's executed on the client . The snippet %= columns.get ( j++ ) % is executed once , on the server , and the JavaScript loop around it is irrelevant at this point . When it arrives the the client , the loop's body just says colArray[i ] = " first entry " ; which of course puts the same string into every element of the array . What you need to do instead is to have a loop execute on the server , like this : My JSP skills are rusty , and the syntax may be different , but I hope you get the idea . Edit : As was pointed out in the comments , you need to be VERY careful about escaping anything in those Strings that could cause them to be interpreted as JavaScript code ( most prominently quotation marks ) - especially if they contain user-generated content . Otherwise you're leaving your app wide open to Cross-site scripting and Cross-site request forgery attacks .
This will not work if the strings contain characters such as double-quote , backslash or newline . Such characters will need to be escaped .
I'd also add a semicolon to the end of the second line .
Once the JavaScript reaches the client , the server code has stopped executing . The server code does not execute " in parallel " with the client code . You have to build the entire JavaScript initialization in Java and send it , complete and executable , to the client : That is just one way to do it , you can also build the output " on the fly " by embedding the server code inside the [ and ] . I used this example to try to demonstrate the separation between building the string that comprises the client-side JavaScript and outputting that to the browser .
Try using JSON ( Javascript object notation ) it'd be quite simple to encode the array and decode it on javascript check it out here http://www.json.org/java/index.html
Exp Language :
The solutions posted above didn't work in my case , I needed an extra Javascript variable to do the transference :
Java based Swing Browser should support JavaScript
In my company , I am implementing a java based html browser . I found a lot of tools to generate complete browsers only in Swing which are looking like Mozilla . But I was not able to find a browser which supports JavaScript . The browser I will implement should execute JavaScript inside the HTML sides . Do you know of a tool that supports this ? Or do you know of a parser which pairs the javascript to something I can use inside the html browser ? I know that the eclipse plugins can handle javascript , but I can not use AWT in my project . Thanks for your help .
You don't want to build this yourself . Fortunately , there are a number of open source javascript engines you might be able to adapt .
add the moment the html sides are shown by using C++ and a firefox plugin , but i should use the existing html sides which including javascript . I have no choice , i have to show html with javascript .
I'm not saying don't do it : I'm saying find someone else that's already done it and use that .
In my company , I am implementing a java based html browser . Good God , why ? That said , this page at java.net discusses some options ; you could search it more extensively .
I'd look at Lobo . It sounds like just want you want . It has a HTML Renderer and parser , and some support for Javascript . If it's missing a feature of Javascript that you need , it seems like it would easier to contribute to Lobo , instead of reinventing the wheel .
That sounds like a good solution . I will test this . Thanks
Will you please tell me that how to implement this ?
It will be available . I hope pretty soon . Its name is JWebPane and it is based on WebKit afaik . The interesting question is " When " Here's the link : http://weblogs.java.net/blog/ixmal/archive/2008/05/introducing_jwe.html
News today : http://weblogs.java.net/blog/alex2d/archive/2008/12/jwebpane_projec.html
How can I get stock quotes using Google Finance API ?
I'm looking for access to financial data from Google services . I found this URL that gets the stock data for Microsoft . What are all the possible parameters that Google allows for this kind of HTTP request ? I'd like to see all the different information that I could get .
How did you find that URL ?
You can easily get Google Finance data via YQL which is simple and REST based . An example can be found here : http://www.jarloo.com/google-finance-and-yql /
This is a great question , are there more answers that are up to date ?
@Timmyc - The ` client=ig ` parametet leads me to believe this is / was used for an iGoogle widget . Just a guess though .
Note that if your application is [ for public consumption , using the Google Finance API is against Google's terms of service] ( https://groups.google.com/d/msg/google-finance-apis/O8fjsgnamHE/-ZKSjif4yDIJ) . @timmyc : the ` ` parameter isn't necessary . http://finance.google.com/finance/info?q=NASDAQ%3aMSFT works .
There's a whole API for managing portfolios . * Link removed . Google no longer provides an developer API for this . Getting stock quotes is a little harder . I found one article where someone got stock quotes using Google Spreadsheets . Here is another example of that . You can also use the gadgets but I guess that's not what you're after . The API you mention is interesting but doesn't seem to be documented ( as far as I've been able to find anyway ) . Here is some information on historical prices , just for reference sake .
There is an undocumented API from google you can use to get stock info much easier as it's REST based and doesn't require authentication . Here is a C# example http://www.jarloo.com/google-stock-api /
Note : The Google Finance API has been officially deprecated as of May 26 , 2011 and will be shut down on October 20 , 2012 .
This answer is mostly off-topic . The answer below it is the correct one .
Perhaps of interest , the Google Finance API documentaton includes a section detailing how to access different parameters via JavaScript . I suppose the JavaScript API might be a wrapper to the JSON request you mention above ... perhaps you could check which HTTP requests are being sent .
no longer available
I found this site helpful . http://benjisimon.blogspot.com/2009/01/truly-simple-stock-api.html It links to an API yahoo seems to offer that is very simple and useful . For instance : http://finance.yahoo.com/d/quotes.csv?s=GOOG+AAPL f=snl1 Full details here : http://www.gummy-stuff.org/Yahoo-data.htm
Here is an example that you can use . Havent got Google Finance yet , but Here is the Yahoo Example . You will need the HTMLAgilityPack , Which is awesome . Happy Symbol Hunting . Call the procedure by using YahooStockRequest ( string Symbols ); Where Symbols = a comma-delimited string of symbols , or just one symbol
The Google Finance Gadget API has been officially deprecated since October 2012 , but as of April 2014 , it's still active : http://www.google.com/finance/info?q=NASDAQ:GOOG http://www.google.com/finance/info?q=CURRENCY:GBPUSD http://finance.google.com/finance/info?client=ig q=AAPL , YHOO You can also get charts : https://www.google.com/finance/getchart?q=YELP Note that if your application is for public consumption , using the Google Finance API is against Google's terms of service . Check google-finance-get-stock-quote-realtime for the complete code in python
This led me exactly to what I was looking for ! Thanks .
But I cannot get the volume traded through this URL , Can you help me out , if I need the volume details too
@DanDascalescu Thanks Dan . Looks like it was just down when I was checking it . Comment deleted .
Building upon the shoulders of giants...here's a one-liner I wrote to zap all of Google's current stock data into local Bash shell variables : Then you will have variables like $GF_last $GF_open $GF_volume etc . readily available . Run env or see inside / tmp / stockprice.tmp.log So for stock= " FBM " / tmp / stockprice.tmp.log ( and your environment ) will contain :
Can I use the URL for a Real Time stock quote ?
Mostly yes . Compare ` GF_trade_time_utc ` to the current time / date and you be the judge .
Thanks for your answer , but here the volume is not coming in the json , is there any other way or URL to get the volume traded ?
The problem with Yahoo and Google data is that it violates terms of service if you're using it for commercial use . When your site / app is still small it's not biggie , but as soon as you grow a little you start getting cease and desists from the exchanges . A licensed solution example is FinancialContent : http://www.financialcontent.com/json.php or Xignite
This is no longer an active API for google , you can try Xignite , although they charge : http://www.xignite.com
Do you have any experience using their services ? How much do they charge ?
The simplest way as you have explained is this link this is for ' Dow Jones Industrial Average ' Link 2 is for ' NASDAQ-100 ' and for all related to NASDAQ link 3 I think this should be it , else you want same in JSON notations the same as Microsoft Please refer this old post I think this will help , Update : To know the details of volume and other details , I have created a vbscript that is using IE object to fetch details from the link , and alerts the content in the particular id ( Create a . vbs file and run it .. this will alert the values from page like this I am sure this will help ..
Thanks a lot for your answer . But I need the realtime data in json along with the volume traded , is there any rest services ?
Please refer this for details on realtime , generally this links provide reatime data with some exception .. https://www.google.com/googlefinance/disclaimer/#realtime
Thanks once again bro , This one was really helpful , but still how can I get the volume information ?
Its if you are aware of VBA or VBS on the page ( https://www.google.com/finance?q=INDEXNASDAQ%3ANDX =NASDAQ =2 =B3UoUsiIH5DIlgPEsQE ) the element's id is ' market-data-div ' that div contains 2 more divs and the second div has the table that contains volume ` 759.30 M ` like this . If want more help please post some code of your work or fiddle will do .
No Sir , Dont have any idea of VBA or VBS , but will check this definitely , Can you provide me the URL , which results in the realtime stock quote along with volume information ?
I will create a fiddle for a with a js file which will alert you give me some time
Sure Sir , Thanks a lot and that will be of great help .. :-) god bless you
@SashiKant I have updated my answer , Please find the VBS code that works well on windows PC enjoy :)
Thanks a lot brother .. :-)
You are always welcome :) StackOverflow is there to help us all :)
Try with this : http://finance.google.com/finance/info?client=ig q=NASDAQ : GOOGL It will return you all available details about the mentioned stock . e.g. out put would look like below : // [ { " id " : " 694653 " , " t " : " GOOGL " , " e " : " NASDAQ " , " l " : " 528.08 " , " l_fix " : " 528.08 " , " l_cur " : " 528.08 " , " s " : " 0 " , " ltt " : " 4:00 PM EST " , " lt " : " Dec 5 , 4:00 PM EST " , " lt_dts " : " 2014-12-05T 16:00 : 14Z " , " c " : " - 14.50 " , " c_fix " : " - 14.50 " , " cp " : " - 2.67 " , " cp_fix " : " - 2.67 " , " ccol " : " chr " , " pcls_fix " : " 542.58 " } ] You can have your company stock symbol at the end of this URL to get its details :
Agree with Pareshkumar's answer . Now there is a python wrapper googlefinance for the url call . Install googlefinance It is easy to get current stock price : Google finance is a source that provides real-time stock data . There are also other APIs from yahoo , such as yahoo-finance , but they are delayed by 15min for NYSE and NASDAQ stocks .
How to resize a java applet when the browser is resized ?
I have a java applet that is embedded in html using the object-comment-embed method . I would like to resize the applet whenever the browser window is resized . I have found solutions around the internet , but they all work based on the deprecated applet tag . Also , when trying a setSize() call on my embed element in FireBug , it will resize the content of the applet , but not the applet viewport . That is , the area of the display that is given over to java does not change . Current code looks something like this :
does your resize function get called ? ( e.g. where is the error so far ? )
Try replacing these lines : with :
My vote is for this method . I've basically done this same thing to resize ActiveX controls . It should work the same for an Applet .
This worked ! I was doing the same thing , using setSize() . It was being called but the applet wasn't resizing . Thanks !
Why don't you use percentage width and height . I usually use the following code for my applets :
Netbeans intellisense for Yahoo utils
In netbeans I created an html page in which I am using Yahoo utils . If I type " yahoo . " then namespace , render , hide are not visible in the interactive documentation . Please tell me how to configure Netbeans to handle this .
I don't use Netbeans , but I do know that Javascript is case-senstive , and that the global Yahoo object is YAHOO , not yahoo . So try it in all caps .
Sending a value from javascript to jsp ( with jquery )
right now i have a jsp page that allows to sort some items , when is ready and a link is clicked a javascript function converts all the info into xml ( text in a variable ) , after this i need to send this xml to the jsp page again , i tried putting the info in a hidden input and submiting the form , sending with $ . post and a few more jquery functions but nothing worked . Any ideas ? in my JSP im reading the post like this : This doesnt work : This either : replacing . text with . html doesnt work Any ideas are welcome , thx
You could always use an XMLHttpRequest to send the data . This can be done with our without user interaction on an element such as a form submit button . jQuery has functionality built in for assisting with such requests . http://docs.jquery.com/Ajax
Suggesting another library is like creating a mess here . JQuery is as good as Prototype in making AJAX calls , if not better .
Trying using the jQuery Ajax API - you can use it to send arbitrary data via GET or POST and you don't need to set up a hidden form or anything .
Yes , we don't submit forms , like we traditionally do . A sound suggestion .
You're probably going the wrong way here . You didn't provide the html code , but I assume it is something like this : If that is correct , then you should say $ ( " #data ") . val ( xml ); instead of text() or html() as those change the matched thing with text or html you provide . This should work for your current solution . Also I'd propose to look at jQuery's $ . post() and others as an alternative to packing everything as xml unless this is really what you want on the backend . It could be easier to just make up a javascript object with all the values keyed by some names and pass it on to one of jQuery's $ . post() , $ . get() , etc . like this : Actually it only occured to me now that you can also send your xml this way ( unless you prefer your way of doing things ): You might want to enlighten yourself more here : Ajax @ jQuery docs
The Google Maps Wikipedia Layer
Is there a way to programmatically list all geo-tagged Wikipedia entries within a radius of a long / lat point ? I'm thinking this is possible with the google maps API but I am interested in any method . NOTE : I do not want to display a googlemap .
Yes , it's possible . The hard part is either : ( 1 ) Screen-scraping Wikipedia ( bad idea , unless you already have a ( small ) list of target pages ) ( 2 ) Downloading and parsing the massive Wikipedia data sets ( better idea ) Once you have lat / long coordinates , which I assume are in the wiki page's geotag format , you can use the great circle formula to compute relative distances , and bypass Google's API entirely . The moral of this story ? When you've dealing with datasets this massive , you're going to want to do as much of it offline as possible .
I've solved a slightly similar problem by using the GeoNames webservices . You can use the webservice to request cities and so on . There is a per-ip-limitation you may not exceed . I searched a little further and there's something interesting for you . The webservice is called findNearByWikipedia . It may be the thing you're searching for ...
Another option is using DbPedia SPARQL interface . For example , the following SPARQL query gets wikipedia articles within bounding box limited by coordinates . SPARQL libraries widely available , for example for SPARQL Endpoint interface to Python To test it , just paste the query below to this online query editor : http://dbpedia.org/sparql Gets the following result :
How to preview a file on the server in JBoss
I need some ideas on how I can best solve this problem . I have a JBoss Seam application running on JBoss 4.3 . 3 What a small portion of this application does is generate an html and a pdf document based on an Open Office template . The files that are generated I put inside / tmp on the filesystem . I have tried with System.getProperties ( " tmp.dir ") and some other options , and they always return $JBOSS_HOME / bin I would like to choose the path $JBOSS_HOME / $DEPLOY / myEAR.ear / myWAR.war / WhateverLocationHere However , I don't know how I can programatically choose path without giving an absolute path , or setting $JBOSS_HOME and $DEPLOY . Anybody know how I can do this ? The second question ; I want to easily preview these generated files . Either through JavaScript , or whatever is the easiest way . However , JavaScript cannot access the filesystem on the server , so I cannot open the file through JavaScript . Any easy solutions out there ?
Not sure I have a complete grasp of what you are trying to achieve , but I'll give it a try anyway : My assumption is that your final goal is to make some files ( PDF , HTML ) available to end users via a web application . In that case , why not have Apache serve those file to the end users , so you only need your JBOSS application to know the path of a directory that is mapped to an Apache virtual host . So basically , create a file and save it as / var / www / html / myappfiles / tempfile.pdf ( the folder your application knows ) , and then provide http://mydomain.com/myappfiles ( an Apache virtual host ) to your users . The rest will be done by the web server . You will have to set an environment variable or system property to let your application know where your folder resides (/ var / www / html / myappfiles in this example ) . Hopefully I was not way off :)
I'm not sure if this works in JBoss , given that you want a path inside a WAR archive , but you could try using ServletContext.getRealPath ( String ) . However , I personally would not want generated files to be inside my deployed application ; instead I would configure an external data directory somewhere like $JBOSS_HOME / server / default / data / myapp
I agree with Peter ( yo Pete ! ) . Put the directory outside of your WAR and setup an environment variable pointing to this . Have a read of this post by Jacob Orshalick about how to configure environment variables in Seam : As for previewing PDFs , have a look at how Google Docs handles previewing PDFs - it displays them as an image . To do this with Java check out the Sun PDF Renderer .
Not sure how you are generating your PDFs , but if possible , skip the disk IO all together , stash the PDF content in a byte [] and flush it out to the user in a servlet setting the mime type to application / pdf * that responds to a URL which is specified by a link in your client or dynamically set in a div by javascript . You're probably taking the memory hit anyways , and in addition to skipping the IO , you don't have to worry about deleting the tmp files when you're done with the preview . * I think this is right . Need to look it up .
I did something like this , and it worked great . Thanks
First , most platforms use java.io.tmpdir to set a temporary directory . Some servlet containers redefine this property to be something underneath their tree . Why do you care where the file gets written ? Second , I agree with Nicholas : After generating the PDF on the server side , you can generate a URL that , when clicked , sends the file to the browser . If you use MIME type application / pdf , the browser should do the right thing with it .
Is Google Web Toolkit useful to develop complex javascripts ?
Iam a great fan of javascript frameworks especially jQuery . I have always wanted to design sites like " plurk.com " but i know that it needs very huge lines of javascript.so that shut me off.But since i came to know GWT , i really want to test it out and want to ask you if it makes our job easier to develop complex things than with the javascript or its frameworks . Which one would you prefer ?
With GWT , you're not actually writing JavaScript ; it's entire value proposition is that you can write Java that it will compile down to JavaScript for you .
ya i know . but i just want to know , does that simplify the process of developing complex javascripts - very huge lines of javascript code ?
I guess if you trust that google will do it better than you would and you know your Java it * could * do - personally I'm against it , but it probably has niche value for someone
No . It doesn't . It doesn't remove the complexity , it just makes it possible for you to deal with it from a Java Perspective . Since that gives you all the Tooling available from Java ... that alone might make it worthwhile . JavaScript IDEs are getting better and better though , and typically if you're using a Framework like jQuery or Prototype , then you're probably going to find it easier than dealing with a heavy weight abstraction layer like GWT . My personal preference is to take the pure JavaScript approach , but that's because I like being able to work more closely to metal , and I'm disciplined enough to tame my JavaScript cats .
Yes , it does , since you'll be using Java and not Javascript . Superb IDEs , static code analysis , searching and refactoring - all this will make your life much easier on large projects .
Few things scare me like " generated Javascript " . The Law of Leaky Abstractions has got to be doubly true in these cases . Writing effective cross-browser javascript is a tricky process of continuous refinement . Trying to decipher where some generated , obscured Javascript is going wrong is a major headache . It's bad enough fixing bugs in the pure JS libraries . To me , GWT is a trick aimed at allowing backend developers to write front-end , in-browser code . Unfortunately , the realities of modern web apps mean you just have to know Javascript and the DOM . Something's going to break , and you're going to need to know why . I think you're better off picking a good javascript library like jquery or prototype , and learning that well . Those libraries abstract away the sort of stuff that SHOULD be abstracted away and is unlikely to break in edge cases , like array operations and AJAX requests .
Do you think the same way about generated Assembler ? Handling all those differences between different Processor architecures ? I am not saying , that GWT is necessarily there yet . But Generating one language out of another is nothing scary at all .
the problem is that since JS is a high-level language , there are several features you'd like to use . for example a hashtable . it's not exactly the same semantics as Java maps , so they write an emulation layer . therefore they're no longer usable as JS objects . same for other things ...
Another difference is that , besides being a much more mature technology , assembler is very highly tuned towards a single architecture . The same cannot be said of Javascript , which must support scores of different browsers and version .
not to mention that all modern cpu instruction sets are designed for the compiler , not for a human programmer ; just like bytecodes are designed with a specific language in mind .
I suspect you've never used GWT in a large scale project . It doesn't make cross browser stuff harder , it makes it easier . People worry about going through generated javascript , but the truth is you never have to , just like you never have to look at java byte code , because the compiler is top-notch .
disregarding whether compiled js is good or bad , gwt offers hosted mode debugging , and simple unit test integration , which is a must in large projects . However , there are some growing pains involved with gwt , but nothing too bad . GWT is more suitable for large scale ajax app vs medium scale ones .
Using GWT is really no different then using jQuery or Prototype . If there is a bug in the library you are using , it will make your life difficult . The same problems exist for GWT . The difference is that GWT has Google's developers backing it up , not just the few people behind the other libraries .
I'm working on a project that has used GWT to pretty good effect . It's a good choice for us since we're all primarily Java developers working on internal tools . I can't speak to how useful it is for large end-user sites . One advantage I particularly appreciate is the seamless object serialization and deserialization . Not only are the details of XML-RPC abstracted away , but since the same Java code is compiled to byte code for the server and javascript for the browser , you can code almost as if the server and client were running in separate class loaders in the same JVM . For instance , you can construct a Java object on the server , send it to the browser as the return value from an RPC service call and the browser code can then use the identical Java class to manipulate the object you just returned . Likewise , parameters to RPC calls can be constructed as Java objects , with the server receiving an identical Java object on the other end . All this without mucking about in the details of ( de ) serialization .
GWT doesnt actually use XML-RPC , but yea , the rest of the post is my sentiments exactly .
thanks a lot :) that was great .
What happened to Rhino ? Is it still under active development ?
The last release was in 2008-03-06 . What happened to it ? Is it still under active development ? Are there any replacements ?
This question might better be asked at the relevant newsgroup : mozilla.dev.tech.js -engine . Or by mail to one of the responsible developers as mentioned at the Mozilla site . However , if you found out please post the answer here . I'm interested too .
Slightly modified version of Rhino ( 1.6 r2 ) is part of Java 6 and on top of that from what I've tested Rhino is very much feature complete so there really isn't anything left to develop onwards , apparently it's also quite bug-free also . I'd say Rhino is one of those rare libraries which are actually done .
According to a post last week at http://groups.google.com/group/mozilla.dev.tech.js-engine.rhino/topics
JavaScript ( Rhino ) use library or include other scripts
In JDK6 , is there a way to load multiple scripts , each in a file , and have the one script reference a method of another script ? Sort of like " include " ?
As long as you use the same scope to execute each file , they will be able to reference functions and variables from previously executed files .
Big help , thanks
I think you're after the load() method / property of Rhino's global object / scope This will load a javascript source file , similar to how include / require will in PHP . Once you load a file , you'll be able to call and function or use any object defined in the loaded file . This is how things work when you're using the Rhino shell , which is the only context I know ( your question mentioned the Java SDK , which is outside my area of experience )
Is this available outside of the Rhino shell ?
Not sure , that's not my pay rate . ( updated the question to reflect that )
if you happen to be trying to do this within ant , you might see this error : but you can sidestep it :
The >> '' + < < is of major importance here !
A real-life example this time , i.e. running the esprima parser with Rhino 1.7 R4 . After running this code , you should see the output as follows : So indeed , the trick is in reusing the globalScope object .
How to Prevent an Applet from Unloading across web pages ?
I have a large applet that takes some 40 seconds to initialize ( cabs are cached so ignore download time for this question ) . The issue is , if the user goes to Page A which launches the applet ( single window ) and then navigates to page B , the applet is unloaded . If the user goes back to Page A , they incur the 40 seconds init time once again . I'd like to be able to launch the applet , incurring the 40 seconds init time once and only once . The applet needs to reside inside a single browser window ( the same window as my web application ) . In other words , I cannot launch the applet in a popup . Does anyone have any creative ideas around how to prevent the applet unloading ?
Put the Applet in a frame that doesn't unload , or prevent the user from going to another page in the web page that contains the Applet .
The only option would be to put you content in an iframe that encompasses your whole document and use absolute positionning for the applet . With a css like this one : There are MANY drawbacks : The applet will always be positionned at the same place , no matter the page You will suffer to get the iframe full width and full height , especially in IE It's possible you will also suffer to have the applet showing properly ( an object on top of an iframe , I can't imagine what troubles you'll run into ) The applet will stay if your user click to a link leading outside of your site unless you set a target for the link ( ie , target='top ' or target='__blank ')
If I did this , the browser URL would never change from page to page . Not really what I'm looking for .
I thought maybe there'd be a way to popup a tiny browser window and have the applet load in that , then using Javascript somehow pull in the applet from the smaller window into the larger browser . I don't think I can manipulate the DOM in this way though . Any other ideas ?
You could show a warning , this way : This works in allmost every browser , but you cannot change the text surrounding your text .
Browser Java Plugin Detection
What is the preferred method to determine if the Sun Java Plugin is installed in the browser ?
this doesn't works always . ( 1 ) If its disabled in firefox it says not installed . ( 2 ) on lion os x , even when its disabled in all browsers , it tells installed
This isn't an answer for your exact question but is offered as a solution for determining the browser itself . Don't be too harsh , this is really old code that I wrote some time ago .
You may also consider PluginDetect script .
Why is Java giving me an IllegalArgumentException ?
I'm using dwr and spring and I get this error : java.lang.IllegalArgumentException : Javascript name * is used by 2 classes I found nothing helpful on Google , do you know why I'm getting this error ?
That is neither valid nor well-formed XML .
Where is Java getting involved in this ? This is Javascript .
Found . Because the version of the DWR's jar did not match the version of DWR's schema
+1 for answering your own question
Returning a host object in Rhino
What is the best way to return an host object to JavaScript in Rhino ? I have two classes like this : It works , in the sense that I can call the toString method , but the member object doesn't behave as I would expect : If I call Object.prototype.toString though , it does say it's a Member object : I've tried calling m.setPrototype and Context.javaToJS .
Edit : The method can also be written : which will call Member.jsConstructor ; there may be other differences as well .
Thanks , that's perfect .
How can I handle Java object serialization with JavaScript ?
I have serialized the Java object located on the server side and sent it to the client How can I deserialize that XML string into the Java object using JavaScript and execute the methods of person class in the client side using the JavaScript ? Please help me with syntax or any guidelines .
Is this not a duplicate of your previous questions ? I'm getting a distinct sense of deja vu here
XML is presented as a DOM tree to JavaScript
ok , how does the javascript deserialize that recieved XML into Java object.since i want to deserialize into java object so that it could be executed in client side JVM once instantiating that java object
What you're describing here sounds different than your question .
why do you need JavaScript do deserialize the objects ? why don't you simply use a Java-to-Java connection ?
You can't run Java methods with Javascript . The only thing you could do is to read the properties of the Java object - this is the only information that is serialized in the XML file . It is very easy to read XML with javascript . To be able to serialize a Java object , send it to a client and execute Java code there a totally different architecture would be needed . At first you need Java running on the client too . Then you would need to employ a method like RMI .
Yes , but you still need a different serializing technique and dealing with security issues . The applet would probably need to be signed in order to be able to communicate with the RMI server .
This seems overly complicated . What he really needs is to make his Java server provide a web service and then he needs to call that web service using AJAX .
You can call Java methods on the client side using JavaScript by using SOAP . This article explains how to create a WSDL web service that can be accessed by any SOAP client that supports WSDL . You can then call the Java WSDL service using AJAX in JavaScript ( if you can find a JS library that implements SOAP and WSDL ) . Alternatively , you can write a simplified front-end to the Java WSDL service in PHP using PHP's built-in SoapClient library . Make it take some simple GET arguments and return JSON or XML . You could then trivially access the PHP web service using AJAX via jQuery ( or an equivalent AJAX-supporting library ) .
+1 XStream supports JSON out of the box .
If you're going for an applet and want to make Javascript calls from Java , checkout the LiveConnect with the JSObject wrapper class . This way you can excute javascript functions inside the applet ( and pass information in between ); Look into the IRIS applictation made for Flickr , it's open source and uses this technique . The Belgian JUG Parleys have a speech from a convention covering some of this , You can find it here .
Detecting EOF / TCP teardown using Java sockets from Javascript
I'm creating a Java socket in Javascript , sending an HTTP request and receiving a response correctly but I seem to be unable to detect an EOF or the server closing the socket at the end . What am I doing wrong ? The problem is we never exit the outermost while loop - the server stops transmitting and ( presumably ) closes its end of the connection , yet receiver.read() never returns -1 and all the socket methods return state consistent with the socket still being connected .
Wouldn't the this : while ( receiver.available() & & ! eof ) be better ? in lieu of the first while ( receiver.available() ) ?
Seems a bit redundant - available() is defined as returning the number of bytes of data available to read without blocking , so would return 0 after EOF . Tried it anyway just in case ; doesn't fix the problem .
Or do you mean in place of the outermost while ? Data being available to read without blocking is independent of whether the server has closed the socket - there could be pauses in transmission , and the OS could have buffered input data . So we must test both separately .
No , I meant the inner while , but your first comment is right : I'm wrong .
Ok . What's the value of eof when the code reaches this comment ? // at this point response does contain the expected HTTP response What's the symptom ? I assume it's an infinite loop ?
eof is still 0 at that point ( otherwise we'd exit the outermost while() correctly and I'd not be posting this ) . Question edited - hopefully the problem is clearer now ?
OK , further research suggests there is no non-blocking way to discover whether the remote side has closed a socket . However , it is possible to achieve this using NIO channels :
When the end of the stream is reached , available() returns 0 , so in your code , you never read the -1
Right . But read() will block until either EOF is reached or there is more data , and Javascript is single-threaded so we don't want to issue a read without knowing for certain we have data to read . And available() can return 0 during transmission , so we can't use that to test for EOF .
Process the file before uploading it
I got a form with SWFUpload . Files uploaded to the server are converted server-side ( video being compressed , images being resized etc ) Question is - can i delegate some of the functionality to client-side ( like image resizing ) , to save some bandwidth for user .
Video compression via Javascript would probably slow the browser so much that it wouldn't be bandwidth savings and if anything would probably annoy the end user .
Thanks , very valid point . Though it doesn't have to be javascript compression . Maybe some process , just initiated by javascript ?
Process the file before uploading it
I got a form with SWFUpload . Files uploaded to the server are converted server-side ( video being compressed , images being resized etc ) Question is - can i delegate some of the functionality to client-side ( like image resizing ) , to save some bandwidth for user .
Video compression via Javascript would probably slow the browser so much that it wouldn't be bandwidth savings and if anything would probably annoy the end user .
Thanks , very valid point . Though it doesn't have to be javascript compression . Maybe some process , just initiated by javascript ?
Playing a sound notification using Google Web Toolkit
Is it possible to play a sound notification using Google Web Toolkit which will be translated to Javascript ? Thanks .
Yes it's possible , scriptaculous ( a js library ) has a sound.js which is an example of how to do it . The source is under 50 lines of code .
Try using this library : http://code.google.com/p/gwt-voices /
Since GWT 2.2 you can play audio with : com.google.gwt.media.client.Audio class . API : http://google-web-toolkit.googlecode.com/svn/javadoc/2.2/com/google/gwt/media/client/Audio.html Sample :
where is the ` style ` folder ? Is it in the same directory as the . java file , or is it in the web directory ?
@MarioStoilov its the URL , check http://www.gwtproject.org/javadoc/latest/com/google/gwt/media/client/MediaBase.html#setSrc(java.lang.String )
Tools for coding conventions and analyzing HTML , CSS , Javascript client side code
I use various code checkers for Java development but I haven't used one for HTML ,. CSS , Javascript . Do any exist . That flag bad practices or similar tool .
Please accept an answer .
Firebug with the YSlow addon from Yahoo is pretty effective at pointing out your inefficiencies . Also try the web developer addon and hitting ctrl+shift+a - it'll load your local code straight into the w3c validator . Read up on 508C compliance - you can't test for it but it's good to know .
W3C has a Markup Validation Service for validating ( X ) HTML . Also , W3C has tools : For CSS For Atom RSS feeds And JSLint is a tool for checking your JavaScript .
+1 for JSLint . It is developed and maintained by Douglas Crockford , a renowned Javascript guru .
js2-mode for Emacs will catch and highlight some common Javascript errors while you're editing your code . It's not as thorough as the external lint tools , but it's a lot more immediate in its feedback .
Firebug with CodeBurner gives you reference material for your HTML and CSS . You can lookup HTML elements , attributes , and CSS properties quickly without leaving the page .
Tools for coding conventions and analyzing HTML , CSS , Javascript client side code
I use various code checkers for Java development but I haven't used one for HTML ,. CSS , Javascript . Do any exist . That flag bad practices or similar tool .
Please accept an answer .
Firebug with the YSlow addon from Yahoo is pretty effective at pointing out your inefficiencies . Also try the web developer addon and hitting ctrl+shift+a - it'll load your local code straight into the w3c validator . Read up on 508C compliance - you can't test for it but it's good to know .
W3C has a Markup Validation Service for validating ( X ) HTML . Also , W3C has tools : For CSS For Atom RSS feeds And JSLint is a tool for checking your JavaScript .
+1 for JSLint . It is developed and maintained by Douglas Crockford , a renowned Javascript guru .
js2-mode for Emacs will catch and highlight some common Javascript errors while you're editing your code . It's not as thorough as the external lint tools , but it's a lot more immediate in its feedback .
Firebug with CodeBurner gives you reference material for your HTML and CSS . You can lookup HTML elements , attributes , and CSS properties quickly without leaving the page .
How would I write a Java regex that gets the contents of a
I'm trying to integrate analytics into my GWT application . To do this , I'm calling a service that returns a String of HTML that needs to be parsed and eval'ed . I need a regex that looks for and grabs either 1 ) the body of the tag or 2 ) the contents of the " src " attribute . I want to eval both of these with JavaScript . I'm happy with assuming that if a " src " attribute exists , the body can be ignored . Thanks , Matt
This question is really confusing , Java ! = JavaScript
I need to do the parsing of HTML with Java . After getting the JavaScript , I'll eval it . Oh , and I'm using GWT , so Java / is JavaScript . ;-)
It seems like there's got to be a better way to do what you're trying to do . What you propose is a very unnatural pairing ( regex to find js tag & then eval while using GWT )
Someone needs to tag this with ' GWT ' or ' Google Web Toolkit ' . Also , please make it more clear in the question that you are using GWT . Otherwise , this question doesn't make much sense ( better ways to do the same thing in a js context ) .
To match the body of the tag , you can try something like which you want to match case-insensitively . Works assuming there is no "" appearing in the actual script body and no " > " in the attributes for the tag . You can add whitespace globbers to the regexp to make it more robust . Note the use of . * ? to make sure the scanning stops at the first closing tag . To add the src attribute , you can try and use the second submatch to get ' src ' , and third to get the body . Again , you might want to add whitespace globbers . But would be best off by running the thing through a proper HTML / XML / SGML parser , because regexps can blow up in special cases .
You could use something like this : The regex uses the lazy star quantifier and should work in most cases but it could certainly be improved upon . It will match in $1 the attributes of the script tag , and in $2 the body . You can then check for the src attribute in $1 ( if it's not empty ) .
How about to start with . You may need to customize it a bit to accept the src attribute with single quotes or without quotes . ignore white between the ' script ' and ' ' You also must use the DOTALL mode to ensure the . captures newlines .
Your answer won't handle
Agreed . There are many cases it won't handle ( like the type attribute of the script tag ) . I suggested this as a start to build from .
and it will match everything between first and last which wouldn't work nicely when there are multiple scripts on the page
Must it be a regex ? You can use the DOM to obtain such information , here is a trivial example of getting the contents of the BODY tag , you could apply it to whatever you like :
+1 Yes ! Parsing non-regular strings with regular expressions is WRONG !
+1 . I love regex , but use the right tool for the job . regex is the wrong tool for this job .
While I agree in principle , he's trying to do this via the GWT which uses java to create javascript .
This seems to do what you want : That being said , you would probably be better off using something like Tag Soup if it is at all possible .
I'm marking this as the correct answer since it does what I originally wanted . Also , laz provided me with the secondary answer ( below ) that I needed for the final solution .
Is that correct ? I would think the last peren should be inside the tag like this : ]* src =[ ' " ] ( [^ ' " ]* ) [ ' " ][^ > ]* > |[^ > ]* > ( [^ < ]* )) because I believe script tags not specified always with a closing node , not shorthand , so , never / >
You are technically correct , which is the best kind of correct of course , except that HTML in the wild can certainly be malformed and if a browser can render it ( or ever did ) , be assured someone once wrote it that way ! Since Matt seems to have controlled the HTML being parsed though , he might not have needed to handle that scenario .
Thanks for all the great suggestions everyone . I quickly discovered it's not possible to use Java's Regex API in GWT and was able to do what I wanted with JSNI . Unfortunately , I ran into additional issues as documented in the following thread : http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/ac2589369ddec8a3
I guessing that the call to eval ( scripts[i] . getAttribute ( " src ")) doesn't not load the URL that src= "" points to . It is simply trying to execute the actual URL string as JavaScript . You need to figure out how to load the contents of that URL and eval it .
Ugh , I = I'm and doesn't not = does not
Thanks for the suggestion . It allowed me to solve my problem . Here's the solution I came up with : http://groups.google.com/group/Google-Web-Toolkit/msg/0d076f647a4472bc
Are Java Applets unable to communicate with javascript within Firefox on Mac OS ?
Would it work via accessing one of the global objects on the screen ? Ergo , In JavaScript : In Applet : That would be my experiment . But I've been calling " window.close() " on FF on Mac OS X , and that still works .
Calling the function is not the problem , getting the result back is . With debug statements I can see clearly that the function is executed , but somehow the return value gets lost and I only get " null " .
I haven't used the applet api in a while but if i recall correctly in order to allow an Applet to cann JS code you should enable the attribute mayscript in your applet tag or a param mayscript in the object tag notation . For communication in the other way JS to Applet you should also use the scriptable attribute or parameter , for example : This allows your applet to use script functions .
The mayscript and scriptable attributes are necessary indeed . But I already include them in my applet tag , otherwise it wouldn't work at all with other browsers .
If you remove all calls to properties of the applet you're cool . This may happen in other situations as well . I found this page after Googling a similar problem , so I thought I'd add a datapoint . The only difference is that I was using win.call() rather than win.eval() . I had an alert() call in the JavaScript to make sure the call was getting through , and saw what appears to be exactly the same lockup on Firefox 3.0 . 9 , OS X 10.5 . 6 , Java 1.5 . 0_16 . 100% repeatable with Firefox , no problem on Safari ( I don't have Windows installed on this box ) . When I got rid of the alert() and simply returned a value , the problem went away . Sooooo ... maybe calls into JavaScript time out after a while and simply toss null ?
How to keep the bottom of an SWT Browser widget visible when appending to the HTML content ?
Rewriting the whole HTML content every time seems unnecessarily busy-work , and there may not be a way to prevent some browsers from scrolling to the top each time you redraw the entire page . Especially if you allow the logs you show to get very long , this will get slower and slower as the log gets longer . A better solution might be to use JavaScript to append to the page . You're already using How about something like this ( assuming " itemID " is the ID of the DIV containing the content ): You have to do the replaceAll() and you may need a couple more transformations , depending on your log content . I've noticed that browser.execute() doesn't like it if the script contains newlines , for example , and single quotes in your string needed to be quoted as I show above .
Thank you , this is much better , even if I set the entire text each time .
Just wanted add that a downside of this is that it does not seem to work on the Mac with a default Browser widget . A workaround is to force Mozilla usage in the Browser widget with the SWT.MOZILLA option , which requires an installed XulRunner ( see http://www.eclipse.org/swt/faq.php#howusemozilla) .
@Fabian Steeg : You may want to log an SWT bug report about this .
I would have just added this as a comment , but it wouldn't let me ( not enough reputation ) . You can ship XUL in a nonstandard location on the mac , by setting a system property . System.setProperty ( " org.eclipse.swt.browser.XULRunnerPath " , " / fubar / xul / Versions / 1.9 . 0.7 / ") ;
Thanks , this is good to know for the future . In this particular case I ended up not using the browser widget but a tree viewer ( for other reasons ) .
. NET , Java to JavaScript compiler
I am interested to create a drag-and-drop layout designer using only JavaScript , HTML and CSS . The designer will allow the user to drag the page elements from one place to another ( something like Blogger ' s layout designer ) to create a site layout . But I don't want to hand code everything in JavaScript , I would prefer to write my application in . NET ( preferably ) or Java and rely on a compiler to compile it to JavaScript and HTML . What are the . NET or Java to JavaScript compilers that you have used and can recommend ? For Java to JavaScript I know GWT is available . What about . NET to JavaScript ? Microsoft did come out with Volta , but the project seems to be no longer available .
suggest it as a Google Summer of Code project ?
Look no further , you already mentioned GWT pick that ! It has a very good API and many good applications have use them . Even JavaScript frameworks like http://extjs.com have GWT support . I use it for an small JavaScript calendar recently . To be honest , I don't really like JavaScript that much . Most of the times the errors are hard to track ( specially for a non JavaScript guy as me ) and the workarounds included some plug-ins for the explorer just to get exactly what a compiler should do . Catch silly error early . In the other hand I'm very familiar with the Java Programming language , and many of the libraries ( if not the most important ) such as java.lang and java.util have been ported to GWT . Plus , the guy who wrote relevant parts of java.util is the same behind GWT ( google Joshua Bloch . )
GWT * could * be a pain in the ass , depending on how the serverside is to be implemented . But it is getting heaps better now in its current iteration .
ExtGWT is a separate project to ExtJS and it's * awful* . For one , the guy has absolutely no clue when it comes to generics . Run away .
Check out Nikhil Khotari's Script# project . It allows you to write C# code and compiles it to JavaScript .
Gee , really ? Drive-by-downvoting ?
Also for Java there is J2S . Java2Script ( J2S ) Pacemaker provides an Eclipse Java to JavaScript compiler plugin and an implementation of JavaScript version of Eclipse Standard Widget Toolkit ( SWT ) with other common utilities , such as java.lang . * and java.util . * . You can convert your SWT-base Rich Client Platform ( RCP ) into Rich Internet Application ( RIA ) by Java2Script Pacemaker . This means that if you use the SWT IDE ( drag and drop ) you can then convert the generated code to JS + HTML .
I wouldn't hand write any Javascript for UI . This can lead to maintenance disaster . jQuery is what I am using but I still wouldn't use it to write full UI Javascript code . ExtJS is also another good option if you plan to write in Javascript . In general what I am saying here is that it's so much easier to main in Java / C# than Javascript . Check out cappuccino framework and Atlas . Never used GWT . Script# is similar to GWT but for ASP.NET framework . Also depends on the requirement , if your site is public facing then RIA isn't a good option . It's all about which extreme end you pursuit ( hand written and web standard , or RAD or libraries like jQuery / ExtJS as the middle option ) .
Script# has already been mentioned . It hasn't been updated since August 2008 . Milescript is another , but also has seen very little for 6 months . Extsharp for the Ext library . Adds Ext support for Script# Javascript compiler to Java ( going the wrong way for you ) Java to script Eclipse plugin My issues with Script# ( a known issue ) is it doesn't support jQuery yet . However it comes with a very lightweight library to tie in with the . NET framework , in Nikhil's sscorlib.js file and ssfx.core.js files . And also has support for lots of other Javascript APIs ( mostly Microsoft , seeing as he is in the ASP.NET team ) . I'd love to see a Script# extension for jQuery ( I'm thinking about writing it if it's easy enough ) . As it stands , most don't provide full compilation yet but they're certainly getting there . Update : I wrote a small extension to enable JQuery support Script# a few months ago . The project can be found here .
Last time I went to the Script# site , I saw that jQuery is on the roadmap for the next release of Script# ( due some time in 2009 ) .
Check out Axial , a . NET to JavaScript converter that works well in ASP.NET . It supports WebForms , jQuery and canvas . It's not very mature , but it's worth a look .
I'm going to second the use of GWT . I've used it for several projects and , when used in combination with a modern editor like Eclipse or IDEA , it really makes the mess manageable . It's important to note that not only does it allow you to write in Java and have that transformed into optimized and obfuscated Javascript it also comes with a substantial subset of the core Java API . In addition to this they provide lots of additional classes for doing things like parsing and working with JSON and XML and communicating with a server via asynchronous HTTP . You can check out the docs to get an idea of what else they offer . Another feature that might be of special interest to you for implementing drag and drop functionality is it's integration with javascript libraries like Ext and scriptaculous . Either through pre-built interfaces or via JSNI
http://jsc.sourceforge.net is a C# to JavaScript , Java , Flash and PHP compiler .
Check this open source Java project http://st-js.org it produces clean javascript code that is clean , easy to read and easy to debug .
JscriptSuite offers another free . NET to Javascript compiler . There is a big difference to Saltarelle ( jsc , SharpKit# etc . ) . Developer write down and debug only C# code ( or any other . NET langauge ) , like in GWT . Javascript will be generated f r deployment only .
how to get rid of double-scrollbars on internal frame of GWT app
May be it makes sense to embed GWT into old JSP ? Place div id= " for.gwt " / somewhere on the JSP , and import JS . It's not clear how you embed JSP into GWT , sorry . Would something like document.body.clientHeight within the frame help you , I wonder ?
Inside my GWT app I create a Frame object . Then I do frame.setUrl ( " / path / to / legacy_content ") - so the browser essentially loads a new page into the frame . The legacy content happens to be generated by a JSP .
its possible to eliminate the scrollbars , but its not possible to make the page " fit " the frame , which is how I understand what you actually want . If you really want to make the scrollbar disappear , just set the frame's overflow to none .
Read this , it will most likely be a solution to your problem It explains how you can get the size of the window and manage it's scrolling in JavaScript .
The easiest way that I can think of to fully solve this problem is to not use a Frame element , but rather an HTMLPanel combined with an HTTPRequest . This approach adds complexity with the RPC call , but an HTMLPanel is a simple div that has content within it . As such , it can expand and / or contact with your JSP content . The end result would be a seamless integration of the two pages . Google's own example on JSON has good examples for making an HTTP request .
How do I limit my date range on an Ajax Calendar ?
I am using the ajax calendar tool . I like its function , but I would like to restrict the user to an option of selecting a time frame starting with Today , and ending with 6 months prior . How do I do this ?
Which ajax calendar tool are you using . There are about 7000 out there . I've seen the ones from Yahoo ( YUI ) and a few others that take configurations for start and end dates where the user has to select something in between . If you're using a calendar that doesn't have that , you could add it by checking the date after the user selects and checking if that is outside your range . Then display a message and leave the calendar visable for them to pick again . ( Might be easier to switch to a calendar that already supports this though )
You can use asp : comaparevalidator to check selected date .
If you're using the asp.net calendar control , use the DayRender event to check each day against the date limit you wish to impose .
Seems like something I should be looking at . How would I add this to my html page ?
Java equivalent to JavaScript's encodeURIComponent that produces identical output ?
I've been experimenting with various bits of Java code trying to come up with something that will encode a string containing quotes , spaces and " exotic " Unicode characters and produce output that's identical to JavaScript's encodeURIComponent function . My torture test string is : " A " B " If I enter the following JavaScript statement in Firebug : Then I get : Here's my little test Java program : This program outputs : URLEncoder.encode returns %22A%22+B+%C2%B1+%22 getBytes returns " A " B " Close , but no cigar ! What is the best way of encoding a UTF-8 string using Java so that it produces the same output as JavaScript's encodeURIComponent ? EDIT : I'm using Java 1.4 moving to Java 5 shortly .
Using the javascript engine that is shipped with Java 6 : import javax.script.ScriptEngine ; import javax.script.ScriptEngineManager ; public class Wow { public static void main ( String [] args ) throws Exception { ScriptEngineManager factory = new ScriptEngineManager() ; ScriptEngine engine = factory.getEngineByName ( " JavaScript ") ; engine.eval ( " print ( encodeURIComponent ( ' " A " B "'))") ; } } Output : %22A%22%20B%20%c2%b1%20%22 The case is different but it's closer to what you want .
Ah , sorry ... I should have mentioned in the question that I'm on Java 1.4 moving to Java 5 shortly !
Iiips . I don't have a solution for you then :-) .
If javascript is the only solution you can try Rhino , but it's too much just for this small problem .
Even if he was using Java 6 , I think this solution is WAY over the top . I don't think he's looking for a way to directly invoke the javascript method , just a way to emulate it .
Maybe . I think the easiest solution would be to write your own escape function if you can't find anything that does the trick for you . Just copy some method from the StringEscapeUtils class ( Jakarta Commons Lang ) and reimplement it with your needs .
@Ravi Wallau very nice !
This actually works , and if you're not worried about performance ... I think it's good .
Looking at the implementation differences , I see that : MDC on encodeURIComponent() : literal characters ( regex representation ): [-a-zA-Z0- 9._ *~ ' ( ) ! ] Java 1.5 . 0 documentation on URLEncoder : literal characters ( regex representation ): [-a-zA-Z0- 9._ *] the space character " " is converted into a plus sign " + " . So basically , to get the desired result , use URLEncoder.encode ( s , " UTF-8 ") and then do some post-processing : replace all occurrences of " + " with " %20 " replace all occurrences of " %xx " representing any of [~ ' ( ) ! ] back to their literal counter-parts
I wish you had written " Replace all occurrences of " %xx " representing any of [~ ' ( ) ! ] back to their literal counter-parts " in some simple language . :( my tiny head is not able to understand it .......
@Shailendra ` [~ ' ( ) ! ] ` means `" ~ "` or `"'"` or `" ( "` or `")"` or `" ! "` . :) I recommend learning the regex basics , too , though . ( I also didn't expand on that since at least two other answers show the respective Java code . )
This is the class I came up with in the end :
Thanks for sharing the code ! :-) +1
Adding a tip . In Android 4.4 I found that we also need to replace ` %0A ` which means a return key in Android input , or it will crash the js .
I came up with another implementation documented at , http://blog.sangupta.com/2010/05/encodeuricomponent-and.html . The implementation can also handle Unicode bytes .
I came up with my own version of the encodeURIComponent , because the posted solution has one problem , if there was a + present in the String , which should be encoded , it will converted to a space . So here is my class :
Thanks for a good solution ! The others look totally ... inefficient , IMO . Perhaps it'd be even better without the BitSet on today's hardware . Or two hard-coded longs for 0 ... 127 .
` URLEncoder.encode ( " + " , " UTF-8 ") ; ` yields `" %2B "` , which is the proper URL encoding , so your solution is , my apologies , totally unnecessary . Why on earth ` URLEncoder.encode ` doesn't turn spaces into ` %20 ` is beyond me .
I have found PercentEscaper class from google-http-java-client library , that can be used to implement encodeURIComponent quite easily . PercentEscaper from google-http-java-client javadoc google-http-java-client home
How to create a photo gallery with slideshow effect of the images placed in server folder using jsp / servlet / javascript
I need to create slideshow of the images which are in server.These images would be changing as the user uploads . I need this using jsp / javascript / servlet / ajax
Please explain your problem a little more detailed . Is it with the slide show at all or don't you how to handle the uploads ? Should a open / running ( inside a browser ) slide show change when user uploads take place ?
Generally when the page loads , the slideshow code already has a list of the available files . It would need to use AJAX to poll the server periodically to determine if this list has changed ( a user had uploaded a file ) . Typically you'd just replace the array or string holding the list of files in the AJAX call . The server-side code just needs to supply the list of files in a folder in a format the slideshow expects . Here's a collection of different slideshows you can grab and modify for this purpose .
Read Browser / Client time from Http Servlet request header
Is it possible to read the Browser ( Client machine ) time when a request is made to the servlet ?
I don't believe so . Unfortunately the HTTP Date header is only sent for PUT or POST messages , and even then it's optional : Clients SHOULD only send a Date header field in messages that include an entity-body , as in the case of the PUT and POST requests , and even then it is optional . A client without a clock MUST NOT send a Date header field in a request . If you have control of the client , you could ( perhaps ) encode it as a separate experimental HTTP header . Or add it as a GET parameter etc .
You can use javascript and append the time to every request . Provided that javascript is enabled , you can add the following to your links : You can do something similar , if you need timezone information . This question may help .
JAAS tomcat login module possible method to pass ip address
I've been looking into a way of passing the client ip as well as the userid and password from a JAAS login page to the JAAS login module implementation in my web code . JAAS only allows the user id and password to be passed to the login module . My idea is to have a java script code to append the ip address to the user id and then call the form submit . I just don't have the right java script code to do this . Can you help ? The web page has two input fields , j_userid and j_password , which the JAAS code knows to look it . So what javaScript code can I use to add the ip address to the j_userid field before the form submit . I was thinking of ' ip-address #userid ' and then in my login module I'd take the ip address off the userid .
Sorry , I don't think there is a way to obtain the ip on the client side , in plain Javascript . Testing the remote ip on the server side is probably not a solution if you don't control the infrastructure between the client and the server ( load-balancers , proxies ... ) . If you're confident the remote ip is the ip of the client , you should be able to hack a tomcat Valve or a servlet filter .
I can get the ip address onto the page in a hidden field using a JSF bean . The problem is passing it through to the JAAS login module .
I created these two javaScript functions . addIpSubmit is called from a login button . You can see I have a bean to put the ip address into a hidden field . The j_username JAAS field is also hidden and is filled in by the addIpSubmit() function . It mungs the ip to the user name and calls the JAAS submit functions . Then in the login module I get the ip address and user name out . Just remember that the FacesContext.getCurrentInstance() . getExternalContext() . getRemoteUser() now has the ip #userid in it .
How to get custom value from text field in JSP ?
I'm working in a very simple and small web application , it is a jsp that handles a shopping cart . What I do at this point is to iterate through all the products that are stored in the car and add them one by one to the jsp with each iteration . This is the code that adds a row to the jsp in each iteration : As you can see I add to the end of each row a submit type control with a custom method for handling Click events , the use of this control is to remove from the car the respective product . The problem that I have is that when I click in the delete button of a product , the id that is passed to the CustomSubmit ( ... ) method is not the id of the product that I'm trying to remove but the id of the last product added to the jsp . So , my question is how can I get the correct id from the item that I'm trying to remove ?
How are you iterating over each item in the cart ?
I got them in an ArrayList() that is contained in a Java Bean that is located in the session scope .
The way i use to do it is as follows : Replace add the deleteIt javascript function , in the function you fill a hidden input field with the id . Then submit the page and the correct id gets passed to your page Little sidenote its always prudent to escape all your Strings maybe like
Thanks for the sidenote , I will do it , now about what you suggest , I understand the javascript function part , but how do you do to get ' yourid ' variable , because I{m adding rows dynamically , and I don t know which is the id from the product that the user wants to remove , the id is contained in a column of the row , but I don't know how to get it ...
I assume your cart is a list of objects , each having the attributes id and quantity . So I would expect you code to look something like this ( noting Peter's answer about using a ' button ') : I'm not entirely sure what you are trying to do with the ' request ' parameter in your original code but if this is the HTTP request all you will get when you try to write it to the JSP is the result of the request.toString method .
well , actually you can just ignore the request parameter , is not important at this moment ; and it is just as you say , that is exactly how I'm working , but the problem is that when the event is fired and this code " CustomSubmit ( ' < %= cartItem.id % > ')" is executed , I don't get the " cartItem.id " from the item that I want to remove , I get the " cartItem.id " from the last item added to the jsp . One solution could be try to get the " cartItem " from the list but in order to do so I will need to know the row number of the item that I want to delete and I don't know either how to get the row number
When you look at the page source in the browser does each row in the table have the same id ? If so the problem isn't with this code , it's with either the iteration logic or the cart item object . If not then there's something up with your JavaScript and it's time to crack out Firebug and take a look at what's going on .
javascript injection in wicket
I have J2EE project which uses wicket framework . I want to know how can I prevent from javascript injection in wicket ?
Although I didn't think the way in which you formulated your question deserved it ( no details , no background , no example problem statement , implied susceptability to injection , etc ) , I dug up some details from the Excellent Wicket in Action : Wicket is secure by default You never need to worry about pimple-faced 14-year-olds trying to hack your web application . To do so , they would have to hijack the session and then guess the right page identifiers and version numbers , which would be relative to the session and the relevant component paths . You d have to be a persistent hacker to pull that off . You can make your Wicket application even more secure from the default by encrypting requests with , for instance , CryptedUrlWebRequestCodingStrategy .
All Wicket components escape strings by default ( by Labels , TextFields , etc . ) , which avoids most common issues related to javascript injection . You should take appropriate care , though , if you disable this behavior ( component.setEscapeModelStrings ( false ) ) for some reason , or create custom-rendered components ( if you write the markup directly to the output ) .
render complex org chart similar javascript / flash / java graphic library
i am looking for javascript / flash / java graphic lib . that able to render nicely a very complex relationship where one node is relate to another node etc . for example a --> b ---> c b --> d , e , f any recommandation library ?
So essentially you are looking for recommendations for a graph visualization library for Javascript , Flash , or Java ?
yes.i am looking for graph visualization lib
what a cooincidence , I was just looking into this myself . I found this : http://www.ryandesign.com/canviz http://code.google.com/p/canviz /
Prefuse is very cool and Java based . Demo here .
This is the one I use for Organizational chart http://code.google.com/apis/visualization/documentation/gallery/orgchart.html
The Graphviz open source graph visualization software is widely used to render graphs , and jGraphviz is a binding for java .
focusing the text field
How to focus the calender after selecting the date from calender .. I am selecting the date and calender is also closing but after that focus is missing . Please help me on this issue .. Regards Sk
which calender ?
java or javascript ?
It seriously depends on the calendar implementation you use . If the calendar is drown by Java tag try to seek the onchange attribute and set it to :
This appears to be JavaScript code , not Java .
Do Applet JSObject javascript calls serialize ?
Do applet javascript calls serialize in any proper way ? I'm considering implementing a model in which two threads send off javascript commands . One responds to requests from the browser ( js ) , and the other hits the browser periodically . My question is this : what happens if these two javascript requests collide ? I'm worried about concurrent javascript requests , as intuition leads me to believe that one of the calls will fail nondeterministically .
Javascript is single-threaded . Only one block of code can be executing at any given time ; any other event , method , etc . that fires will wait until the currently executing code terminates . Google Chrome's javascript engine may be an exception - I recall them mentioning some kind of multi-threaded javascript support in their features , but I'm unsure how it works . In IE 6 , the browser UI will actually become unresponsive while JS code is running ( if you stop at a breakpoint with keyword ' debugger ' , or have IE set to debug , for example ) .
Serialize ? Do you mean synchronize ? JSObject works by passing primitives to a single JSContext JNI NPAPI wrapper which acts on the DOM in the underlying browser implementation . Are you referring to the passing of primitives through JNI ? I don't know much about how chrome's JS engine works , but I assume that since the liveconnect NPAPI in chrome is the same as the others , the ability to write multithreaded javascript has nothing to do with multithreaded JSObject access . The affected code extends the same abstract JSObject class that firefox uses . There are several implementations of JSObject / liveconnect -- a few for netscape / firefox and one for ie ( ocx ) . All behave differently as far as multiple threads go . DOM access isn't threadsafe in general as far as liveconnect is concerned . So , officially , multiple threads accessing the DOM is undefined . If you manage to actually access the DOM through something other than code scoped in DOMService.run() , you'll get crazy deadlocks and race conditions . So , basically , you need all of your java threads to post all DOMActions to your DOM access dispatch thread only .
Display a javascript / css tooltip within a @For loop with Tapestry 4.0 . 1
I'm not at all familiar with Tapestry 4.0 . 1 and need to update a legacy application to display a formatted tooltip for a few links within a @For loop . What is the easiest / best way to go about accomplishing this ? Should I be using the @Script component or is there a simpler way ? By the way , upgrading to a newer version of Tapestry is out of the question . Unfortunate , yes , but out of my control . Thanks in advance for your help . Carl
Maybe the better question would be : How do I pass a value to an inline function call ? I've written a small function to show the tip , but I need to pass the message to it like so : AdUnit Predicate So , how do I pass the message in ?
After posting my question , I managed to come up with a rather hacky ( crappy ? ) solution . Can't say it's my proudest moment as a engineer , but it works . * * Some code omitted to protect the innocent .
IIRC , using the dom to update the structure is preferred to a straight document.write ( ... ) CMA : There was something along the lines of DOM / document.write posted here on SO a while ago
Use the @Any component . For your example , substitute MYTOOLTIP with whatever object is holding the message :
How can I define static properties for Rhino's ScriptableObject ?
Rhino provides Scriptable interface and ScriptableObject helper class to implement a javascript object backed by a java object . When ScriptableObject is constructed , its methods with names starting with jsFunction___ , jsStaticFunction___ , jsGet___ , jsSet___ , jsConstructor are automatically defined for the javascript object . This way you can defined funations , static frunctions , instance properties ( by its accessors ) , and constructor . The question is how to define static properties ? By static properties I mean properties on the constructor , like static methods are methods on the constructor . The only way I see for now is to use finishInit method , and define static properties manually . But what is the right way ?
Currently I have something like this on my mind : Are there other ways ? And is this way correct ? IMPORTANT : Note that constructor for MyObject is not yet defined in scope , when finishInit is called . In order to define static properties , which are instances of MyObject , use the following syntax :
md5 hash for password string in GWT / GWT-Ext ?
I am currently trying to modify an existing GWT-Ext application , that is using plain text passwords in its MySql database . My plan was to use md5 hashes , as the existing passwords can be easily altered with the MySql function and I was expecting to find an easy solution for the GWT-Ext side as well . But as I found out , java.security is not supported by GWT and there doesn't seem to be any other implementation that can be used to change the password string to a md5 hash on client side . Only " solution " I found so far , is to re implement a md5 method via JSNI as described here : http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/ad09475a9944c9f8 There is an existing user extension for Ext-JS , but I couldn't find anything for GWT-Ext : http://extjs.com/forum/showthread.php?p=133516 Does anybody know a more elegant / simple way to solve this problem ? Maybe I should use something else instead of md5 to make sure the passwords are encrypted ? Cheers Frank
Personally , I would say you're doing it wrong . I wouldn't hash a password on the client side ( which is what GWT is ) . If you hash your password , you will undoubtedly want to salt it , otherwise you will be susceptible to rainbow attacks . If you hash + salt it on the client side , your salt will be accessible to your users . If I were you , I would hash + salt your password on the server side . This will allow you to use your standard Java code to perform your MD5 hash . My 2 cents . -JP
Its not a bad scheme if he does something like cram-md5 on the client side , where the client computes a hmac ( md5 hash plus a nonce salt ) and sends it to the server . The down side is that the server needs clear text password to check the hmac .
good point about the rainbow attacks , didn't knew about this before . I also solved it by doing the encryption on the server side , but the idea was , that I wanted to encrypt the password , before sending it to the server , as we currently only use http and no https .
GWT is client-side and server side . Other than that , the post is good advice . Don't hash it on the client side . Have a look at http://www.owasp.org/index.php/Hashing_Java .
Another idea that may fit your need is something called zero knowledge auth . ( Ie . the server never needs to know the user's plain text password . ) Basically , when setting the initial password , the client hashes the user's password N times ( where N is a largish number like 1000 ) , and then sends that final hash to the server along with N . The server stores the hash and N . Later , when the user wants to authenticate , the server tells the client N-1 , and the client hashes the password the user types N-1 times and sends that to the server . The server does 1 more hash on the received hash , and ( hopefully ) gets the stored hash . The server then stores the N-1 hash and N-1 number . Each time the user authenticates , the server decrements the stored N and saves the previous hash . When N gets down to 0 , the user must choose and set a new password . The server must ensure that it never asks for the same iteration , otherwise it is vulnerable to a replay . You can't really enforce that condition from the client side because the client ( especially a browser ) can't reliably keep track of the last N .
Very interesting idea , and never thought of that before . Doesn't really fit in the current solution , but I will keep it in mind for future reference , thanks :-)
Interesting idea so I spent some time thinking about it , but it is vulnerable to a man-in-the-middle attack . On an authentication request , the server sends some number M . The attacker sends ( M-1 ) to the client , and receives hash ( M-1 ) back . The attacker tries to authenticate again , receives challenge ( M-1 ) from the server and responds with hash ( M-1 ) . The attacker is now authenticated .
yes , that does sound like an issue . My first thought would be to require the server to not reuse M after issuing it during a challenge to the client . However , the larger issue remains that Mallory could tell the client M-100 , collect the hash ( M-100 ) from the client , and then login up to 100 times with the intercepted hash . I'll have to go see if the project that I first encountered this in found the same issues and dealt with it or abandoned zero knowledge auth .
I think you're always going to be vulnerable to a man in the middle attack . Keyloggers too . Also drunken confessions of passwords . We can only raise the bar so far with reasonable coding efforts .
You can use gwt-crypto to generate SHA-1 hashes on the client side using :
You should never use an md5 or other hash functions for password encryption . See http://codahale.com/how-to-safely-store-a-password /
TextMate equivalent to gVim Ctrl+P
To auto complete a previously written string . Is it possible ? EDIT I'm editing javascript / java if that matters .
Yes - the autocomplete key is ' escape ' by default . See the TextMate manual for further information .
Thank you !!! it was driving me crazy !!! :) About the manual ... mhhhh ... mmhh well .. Beside having to write my own product user manual ( which I hate and usually I avoid ) do I have to read others them too ??? :) :) :) ;) Thanks again
@Oscar - absolutely . RTFM , man .
Also , Google " Textmate tips " - I seem to pick up something new in every blogpost I read about TM .
Thanks for the hint . I didn't know about http://textmatetips.com .
Has anyone used GWT and can say it really delivers what it promises ?
I am a long time Java web developer and as most web developers I have used quite a lot of JavaScript . Even though I don't hate JavaScript as many other Java developers , I am still aware of its faults . GWT is a way to write javascript using java . Since I know both languages for a long time I am pretty skeptical about this claim . I mean , I having a hard time believing that you can really create full Java dynamic web applications with a rich GUI using just GWT . That is why I am asking here if anyone had the chance to work with GWT on a large scale project . If so , I would really like to hear what they think of it .
Why the close ? This looks like an interesting question to me ..
Some people have the bad habit of clicking ' close ' if they just don't like the question . I don't think this is subjetive nor argumentative at all
Did you end up using GWT ? Did it deliver ?
Hi Dave , No , finally I decided not using it . My final conclusion was that GWT seems like a really good product and the people who use it mostly love it . Nevertheless , I feel like since GWT has a totally different way of doing things , it is a product that once you start using it , you commit for life . And that is something I really stay away from . Thanks for asking .
I've looked at it briefly for an older application at one of my jobs , and I must admit that it was very impressive . All the code was written in Java , and the javascript was built beautifully . It had AJAX , dynamic pages , the works . There are plugins for it as well , such as the Ext GWT framework . It's definitely worth looking into and trying out , but you may find that the development cycle doesn't " feel " right , so you might opt to use regular JavaScript .
good point about the dev environment " feel . " GWT is definitely only for those that enjoy / tolerate the constraints of a language like Java .
As with any tool , it needs to be used properly . One can wield a hammer skillfully and build something nice , or just wave it around at stuff and do more harm than good . Google Wave , I think , has become the prototype of " what's possible " with GWT . It's still rather hard to find good GWT design patterns because the technology is too new , so that can harm efforts to develop a very rich , large-scale web app in GWT . Before beginning such a project , I would recommend looking at examples of the model-view-presenter ( MVP ) pattern and be sure to use it , or something like it , as a foundation for the control flow of your web app . One nice thing about GWT , and writing your code in Java , is that the high degree of abstraction and decoupling necessary for a clean MVP implementation is pretty easy ( thanks to the compiler ) .
I've written fairly large sized app in GWT , and i have to say that i'm even more impressed by GWT than i was when the project started . My general ' feel ' of the platform is that things are really well thought out , and they don't do things unless they can do it well , and can do it well on all browsers ( IE users are still your users ! ) Now , keep in mind that what GWT really excels at is the creation of large , highly dynamic single-page style webapps . If your goal is to enhance an otherwise static page with some javascript effects , than GWT is massive overkill ( gquery may change this , but i don't have experience with gquery ) Some features I enjoy include : The ability to share code between the server side and the client side . ( if your server side is written in java , of course ) . I didn't expect to use this a lot of this at first , but in practice , it can really save a lot of code duplication . However , i find that in general , this only works with code that has been written with GWT in mind - using code that was not written with GWT in mind often doesn't work well . This is because GWT only has a subset of the classes in the JDK , and in javascript , you have to care about performance a lot more than you do on the server side . It aims to achieve the fastest javascript , faster than you would ever write by hand ( because if you did write it by hand , the code would be unmaintainable ) . The unfortunate reality is that the browsers that a lot of people use have incredibly slow javascript engines , so the performance of your javascript code matters a lot . Gwt's compiler is a real optimizing compiler - it will inline methods , intern all your strings . devirtualize your method calls when possible , etc . Because you are compiling for each browser and locale , the compiler can also inline browser-specific and locale-specific code . This Google I / O presentation has some benchmarks a few slides in . It will also automatically sprite your images together to minimize the number of http requests needed , again improving the speed of your site . GWT 2.0 will allow you to combine together arbitrary files . most of the files created by gwt have a strong hash as their filename , which lets you set the files to be cached forever , but not worry about people having old versions if the file changes The code splitting in GWT 2.0 is very impressive and would be very difficult to do by hand . As the size of your application grows , dealing with the size of your javascript matters more and more , and you need to be able to split it into chunks You are coding in a statically typed language . I know some people prefer dynamic typing , but i like to compare this debate to the emacs vs vi debate - there are a lot of smart people on both camps , and arguing on the internet isn't going to change anyone's preference You get to use a lot of the great tools that exist in the java ecosystem , which are generally a lot more mature than the equivilant javascript tools . - junit , java IDEs , java debuggers , refactoring , etc .
Oh , and i guess the biggest downsides is : - compile time - hosted mode is great , but you can't currently use it for the system non-default browser - GWT 2.0 and out of process hosted mode should fix this though . - The java language can be verbose at times , although that is far from a showstopper . ( gwt for scala would be awfully nice :) )
If you have familiarity with both JavaScript and Java , you really are perfectly suited to get the most out of GWT . What many people do not realize is that GWT is pretty well layered and that you can really decide which of those levels you want to work at . For instance , I sometimes write directly against the DOM library for projects . Thats a lot like writing JavaScript code except you're able to use an IDE properly and get the power of a compiler . From the compiler I get static type checking , lots of good compiler optimizations , and ( actually my favorite for maintaining code ) debug mode assertions . Nobody ever really makes much of the ability to do assertions , but it's so nice to be able to compile a debug mode that does expensive checks to tease out bugs and then turn off the debug mode and have the code just evaporate . ( Not just the assert statements go away , but all the code reachable from the asserts also gets compiled out ) . Other times , I write code against GWT's UI library . That code looks a bit like swing or SWT code so it is most comfortable to pure java developers . Working at this level , you don't have to worry as much about the DOM and it is usually possible to construct an application without writing any JavaScript . You do occasionally run into a bug where something doesn't work consistently on a particular browser . The GWT folks consider those bugs . You can kind of pick what level of abstraction you want to work at . There are tradeoffs at each level , but GWT should support them . Also , full disclosure : I'm the dude in the video that Chi linked above , so you might say I'm pretty attached to GWT .
I have created two quite substantial GWT applications in my three years at Google . It delivers what it promises - my apps were far more interactive and far more ajax-y than my knowledge of Javascript and my Javascript tooling would have let me produce using other tools . I also found the apps more interactive and more fun than the purely server-side alternatives I had used before moving to it . It is not free of warts , but it is a very productive environment to do the kinds of apps I do . And do watch Kelly's presentation . It , and some of the others from I / O , give a really clear idea of what GWT can do . You will pretty quickly get a good idea of whether it is the right tool for the task you are envisioning .
I have been developing a green field application on GWT for a year and it has been surprisingly pleasant . The subset of Java used in GWT causes some headaches but nothing major after all . I didn't have too much JavaScript knowledge when I joined the project but I think that was not a problem . The common GWT related problems I have encountered had usually something to do with Ext GWT / GXT framework or FCKEditor integration .
Simply GWT rocks google is making " google wave " fully on GWT .
I think GWT does what it says on the tin ... Top 5 Reasons for choosing GWT : Tapestry can be overly complicated and the learning curve is pretty steep for new developers who are starting out joining the team . Esp . on larger projects . I found that I could develop " richer " applications using GWT seeing that my strength is Java not Javascript . In order for me to implement similar functionality using Tapestry I would have to hand write Javascript which would later become a maintenance nightmare . Browser compatibility , I would spend large amounts of time trying to get my hand written Javascirpt to work on all the different browsers ( like I said Javascript is not my strength :-) The GWT Compiler hides me from this which results in me spending more time writing features . Back button blues , GWT's History listener is handles the browsers back button in comparison to Tapestry . GWT has a smaller footprint because only the data is being sent across the wire apposed to refreshing the entire page . The list goes on but all in all , I am very happy to have made the change and have not looked back since .
I didn't know much Javascript when I tried to create my website . In fact , that is why I had been putting off creating the website . So for me , GWT made a huge difference as it enabled me to create a dynamic , cross-browser website that I definitely would not have been able to create without putting in significant effort into learning Javascript .
I've done a few projects over a few years and it is fantastic . Going back to JS / JSP / request based framework is really horrible . Don't want to give up compile time checks , unit tests in my IDE , IDE refactoring etc , sharing code between different tiers , solid set of widgets , incredibly well thought out framework . Can do so much more so much faster in a maintainable way .
There is a steep learning curve , but for really dynamic ui applications , there is just no way that you can build from hand in javascript as efficiently . What I mean in particular is for instance an application frontend for a service where all the searchable fields and result type s and length were completely unknown . For this type of thing , a dynamic runtime defined ui , there is nothing better than GWT in my opinion . The drawbacks are the steep learning curve ( especially for non-swing Java programmers , traditional request / response servlet api guys and gals ) and getting cornered into GWT once you make that decision .
String data passed to Java Applet by javascript is null when in Java applet
This question may look familliar but I've discovered some rather more pertinent information and tried some other things ( which are detailed below ) so to avoid confusion I've created another question . Here's the JavaScript ( on an aspx page ): pdfXML is got from pdfData which is a hidden field on the page containing the XML that contains base64 encoded pdf data which is passed to the java applet . All the other values being passed to the applet's WriteDocument method have within range sensible values . The XML is like this ( the content of the PDF element is a lot bigger than displayed above , i've truncated the data for space reasons ; the PDF data is about 4Mb ) The signature of the Java method is : What happens is that somehow the xml string data is lost and by the time one gets into the Java the value of the PDFData parameter is null . I've debugged into the JS and the pdfXML param of the js method CallApplet definitely has content . I've also tried to add a param tag in to the applet tag and set its value before calling the applet and used GetParameter() from inside the applet . This results in a blank string rather than a null . This problem doesn't occur on every machine . Our QA department don't get this for example but since this is a client-side issue , one of our customers will probably see this . I'm utterly out of ideas here so any help would be appreciated ( with the obvious proviso that sadly I need to get this working rather than re-engineer this and the legacy systems the applet communicates with to avoid using an applet . )
Sorted the problem . How ? I took JRE 1.6 update 12 off and stuck update 7 ( which is the version we reccomend to those who use our website ) on my machine . Why update 12 stopped working I don't know . Why update 7 is stable I don't know . [ sigh ] It's things like this that make me glad I work mostly with a ' long time between releases ' framework like . net .
Detecting a 64-bit jre in a 32-bit browser ?
Is there any way to detect a 64-bit java install in a 32-bit environment ? The Java Deployment Toolkit detects nothing , but I was wondering if there was some secret browser way of detecting the 64-bit install client-side .
Sun's HotSpot JVM FAQ : When writing Java code , how do I distinguish between 32 and 64-bit operation ? There's no public API that allows you to distinguish between 32 and 64-bit operation . Think of 64-bit as just another platform in the write once , run anywhere tradition . However , if you'd like to write code which is platform specific ( shame on you ) , the system property sun.arch.data.model has the value " 32 " , " 64 " , or " unknown " . You can access this like System.getProperty ( " sun.arch.data.model ") . This property will obviously only actually be set on Sun JVMs / JREs . You might also try to parse the results of System.getProperty ( " java.vm.name ") , but this will also be highly vendor specific .
I guess I could do this in an applet , but I was hoping to get this information before java was necessarily loaded or available .
HtmlUnit property undefined script error
I m submitting a form using java HtmlUnit package . I am able to get pages and submit forms but on one page I m getting a ScriptException error . The message is Cannot set property " disabled " of undefined to " 0 " I think it might be caused by a javascript method that tries to set a variable that has not been declared in the form but I m not sure .
Does viewing the same page in a browser produce a JS error ?
I just tested it again and just noticed the page that loads does have a JS error . Is there a way I can tell HtmlUnit to keep processing like ie does ?
Can you provide a public website to test against ? As I am not able to load the JS in https://mmlab1msslnx.fmr.com/mcwebadm/cgi-bin/edit_local.pl?operation=edit return_address=%2Fmcwebadm%2Fcgi-bin% 2Fmenu.pl selected=22020c341b11de96c3000423d43f1d Also , please use latest HtmlUnit 2.5 version .
I'm not able to provide a public test case . I'm working on creating one . I have checked and I'm using version 2.5 . I was hoping someone had seen something similar to this .
This was caused my a javascript error on the page that was being loaded . I set the webClient.getOptions() . setThrowExceptionOnScriptError ( false ); but it still threw the exception . SOLUTION : If you catch the ScriptException the page is STILL fully loaded and you can just continue processing and ignoring the exception . Example of HTML that fails :
Should I use PHP or JSP for a chat website ?
I want to develop a website web chat application like yahoo . Only difference is that I want to make it web based not desktop . I will be implementing it in jsp / php with ajax . I want to know whether jsp or php will be better for this . What will be advantages or disadvantages of both . Which one of the two would you prefer and why ? Will jsp applicatioon will be slower then php ? I am thinking of using using struts with jsp and ajax . Will using of struts decrease speed ? I know jsp , java and struts but not php . Is php more difficult then jsp ?
How long is a piece of string ? Seriously . We don't know exactly what you want to do but I imagine most of the backend stuff will be very similar in difficulty between the two platforms . Most of the work will be platform independent front-end stuff .
It won't be slower because you are using one over the other . It will be slower only if your implementation is less efficient .
Whatever you choose keep in mind that web based chat app would probably need continuous updates from server to the clients ( so called Comet ) .
Use whichever one that you're a better programmer in . The task can be accomplished in either language just the same . You can argue endlessly about language features , the bottom line will be whatever works best for you .
JSP based web applications are a bit more harder to deploy than PHP based web applications , but you gain the ability of creating Servlets . PHP requires less server administration skills to setup properly and get running , is fast to learn , and allows fast creation of simple applications . None is better than the other , they are different in nature . Check your requirements , and take a decision based on that . If your requirements doesn't favor one over the other , choose whichever your team is more comfortable with .
+1 for basing your decision on * your requirements* .
Exactly ! Great answer . Just because you can program easier in PHP doesn't mean it will always be the best choice . The requirements should be used to point you in the right direction .
I've worked with both JSP and PHP . Even if I prefer PHP , I still work with JSP from time to time depending on my requirements . There is not really a better choice . It always , ** always ** depends on your requirements .
JSP isn't a language - it's just a view / presentation technology - so it's only to build a web Frontend - while the main programming happens somewhere else - in the Java Language , as a so-called Java Servlet . I personally like Java more , but PHP is okay , and if you only know PHP ( which I must assume from the questions :) ) you're better off doing it in PHP now - you can learn Java later ... Apart from that , the others asking for more background info are right - you need to see what technology meets your requirements best ...
People refer to JSP the same way as ASP.NET is referred to . It is a framework .
Which is incorrect , and therefore I point out how it really is :) No , really , maybe people not doing Java development themselves do that . Java folks neither say they build something in JSP instead of PHP , because JSP isn't a language , nor do they refer to JSP as a framework ( because it does not deliver a complete stack of functionalities ) - frameworks are things like struts , gwt , webwork , sitemesh - and even those only deliver the view part - a full stack web framework helps you with a lot more things than just the view .
If you know both well then choose any . But if facing difficulty then PHP is better to stay with . Reasons : fundamentally easy large no . of developer libraries are available . Easy to integrate with other scripting languages But structural syntax becomes a problem as they are so many in cumbersome manner . Use PHP tag library for that works just like JSTL . " Choosing language is not the problem but efficient implementation of code is the only hurdle . "
java equivalent of swfobject
looking for a javascript class like swfobject to embed java and have a simple fallback if the user doesn't have java or refuses the security prompt . thanks , Josh
appletobject may work , but I have not used it .
You could build one pretty easily . Have something like a div set up like this : Then add Java Plugin Detection ( builder ) to your JavaScript . Then if that returns true , then do something like :
Just embed the applet like you normally do and insert the fallback inside or insert a javascript snippet to remove the object : Besides param , you can add other elements , e.g. paragraphs with text or javascript calling some function to replace the object .
This helps ! I got a very strange problem while using applet to do batch file downloading from the server side . The Ajax request seems conflict with applet request , the applet file downloading interrupted with some socket exception . The applet works fine under JRE5.0 , it might be caused by our recent upgrade to JRE6.0 . div id= " java-applet " / div script var t ; function startApplet() { var attributes = { codebase : ' %= request.getContextPath() % ' , code : ' %=appletClass% ' , archive:'applet / SignedApplet.jar ' , width : 0 , height : 0 } ; var parameters = { para1:'value1 ' , para2:'value2 ' , java_arguments : ' -Xms64m -Xmx512m ' } ; var version = ' 1.6 ' ; var buildAppletTag = function() { var tag = ' applet ' ; for ( var attribute in attributes ) { tag += ( ' ' + attribute + ' = "' + attributes[attribute ] + '"') ; } tag += " " ; for ( var parameter in parameters ) { tag += ' param name= "' + parameter + '" value= "' + parameters[parameter ] + '" / ' ; } tag += ' / applet ' ; return tag ; } ; document.getElementById ( " java-applet ") . innerHTML = buildAppletTag ( attributes , parameters , version ); clearTimeout ( t ); } t = setTimeout ( " startApplet() " , 1000 ); // delayed / script
Any function / method in Java to implement a " freeze panes " -like sheet ?
We are using Java and Javascript to try to display a huge sheet with freeze panes , but it is being very difficult . Does someone know about a library , method , script or something , either free or commercial , to do this ? Thanks .
Not totally sure I understand what a sheet with freeze panes means - could you expand on this ?
It means to be able to display a huge sheet , keeping the first row and column freeze . The idea is to be able to scroll through the sheet without losing the view of the first columns or rows which usually contain the column or row titles .
After looking at http://blogs.zoho.com/general/freeze-panes-in-zoho-sheet , I assume you are looking for similar functionality in tables ? One way to do this would be to have two tables , one that was " frozen " rows ( or columns ) that grew or shrunk in size based on how many frozen you had , and the other was the dynamic table that grew or fell in size based on how many unfrozen there were .
Closing popups on session expiry
Here is the thing : my webapp has loads of popups and my boss wants ' em closed on session expiry , coz when session expires and an user presses refresh on a popup , he is being shown the logon page -> user logs on -> user is directed to the dashboard . Now , a dashboard screen in a popup is totally uncool . Here is where google got me : Have javascript to close popup onload . Generate this onload script into the response if session has expired ( checking session expiry from jsp and including onload script conditionally ) . Do you think this is a good way to it ? What is the best practice for this scenario ? P.S : I am not allowed to use AJAX
The best practice is to not use " loads of popups " . That aside , when you talk about closing popup in " onload " event what would really happen is user would refresh the popup and it would close ( which would be REALLY weird from user's standpoint ) OR user would get a prompt from the browser ( close this window ? yes / no ) which is equally weird .
@ChssPly76 - yes , from an user standpoint , it's probably weird . But , designing data-oriented applications without pop-ups is one heck of a challenge .
I'm ok with popups as long as I don't need any of the information behind it . If I do , I get pissed at them and curse the designers .
The _only_ possible excuse for using popup windows is a requirement for application to function without javascript because then you can at least do some stuff via `
The best way would be an XMLHTTP request to check login and close them if required - do this periodically . Astute readers ( meaning everyone ) will notice that this is an AJAX request , but if you phrase it that way it might get accepted as whoever dictated that you ' aren't allowed to use AJAX ' is clearly an idiot .
@Luke the corporate IT teams of non-IT core companies are loaded with idiots who would tell you not to use AJAX :-) : And my boss is one of ' em !
Won't the periodic HTTP request keep the session alive ?
then they are screwed . and so are you if your boss reads that you just called him an idiot ...
@matt b : not if you keep record of the last user activity .
@matt b - George said what I was going to say :)
In a past life , I made a popup manager object that maintained what windows were open . You should probably make one of these if not already done . Then , you can use setTimeout to call a function after so many minutes ( or whatever time you want ) have gone by . This will check for recent activity ( probably via AJAX ) and close the popup if you determine that the session has expired . If not , call setTimeout again with your new time , properly adjusted for most recent activity . ^^before the AJAX edit . Well , since you can't use AJAX , can you put something in the url that will tell you it's a popup ? Then you'll know not to show the login screen when the user hits reload .
If your boss is asking you to achieve this , without using AJAX , then you're in trouble . He should understand that the only connection a browser has to the server ( without refreshing the page ) is javascript ( what he understands to be ajax ) . The best way to do this is to setup a script on the pages to ask the server if the user is still logged in every 30 seconds or so . This script assumes you're using the jQuery framework for rapid development of javascript solutions . This also uses JSON ( Javascript Object-notation ) to test a return-value from the loggedin.php file . Bottom line , you need to use AJAX . Tell your boss there is no other way . If he still doesn't get it , ask him to balance his checkbook without using math .
Or just tell your boss that you're brilliant and figured out a way to do it with Javascript instead of AJAX
Well , the J in AJAX is javascript . If its not async ( A ) and not xml ( X ) based , then he can build a case saying that he's not using AJAX , unfortunately , the example uses JQuery and underneath the hood , it is using the A , J and X of AJAX .
An alternative way to implement modal dialogs in a web application is to : Model the dialog in a DIV , default styled to display : none ; On desired action , inject / append the Modal dialog DIV into the page source Reset the CSS display so the modal dialog DIV is visible , overlaid on top of the page by setting the CSS z-index property Make the modal dialog disappear upon either successful execution or the user cancelling out Because the modal dialog is part of the page source , the dialog will disappear when the session times out . This approach doesn't spawn supporting windows that can be orphaned as the poster is attempting to address . And it fits the requirement of not using AJAX . You can code these by hand , but I don't really recommend it because of having to support various browser . I suggest looking at the Yahoo User Interface . You can tailor it to suit your needs ( IE : only modal dialogs ) , and it would support AJAX if requirements change down the road . Beware of spawning modal dialogs from modal dialogs .
In theory , you could avoid AJAX by using a hidden flash widget ... But more practically , AJAX is the ' right ' solution , and I think you will have to talk to your boss , determine where this ' no AJAX ' rule came from , and convince him that AJAX is the best way to solve this problem . Does he think AJAX would be take too much time to implement ? If so , you should prove him wrong . Does he think it will be hard to maintain ? If so , show how simple the code to do this will be , and how widely used the common AJAX libraries are . If your boss is reasonable , then his goal is to what is best for the product , and you should be able to reason with him .
