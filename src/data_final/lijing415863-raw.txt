How to preview a file on the server in JBoss
I need some ideas on how I can best solve this problem. I have a JBoss Seam application running on JBoss 4.3.3 What a small portion of this application does is generate an html and a pdf document based on an Open Office template. The files that are generated I put inside /tmp/ on the filesystem. I have tried with System.getProperties("tmp.dir") and some other options, and they always return $JBOSS_HOME/bin  I would like to choose the path $JBOSS_HOME/$DEPLOY/myEAR.ear/myWAR.war/WhateverLocationHere/ However, I don't know how I can programatically choose path without giving an absolute path, or setting $JBOSS_HOME and $DEPLOY. Anybody know how I can do this? The second question; I want to easily preview these generated files. Either through JavaScript, or whatever is the easiest way. However, JavaScript cannot access the filesystem on the server, so I cannot open the file through JavaScript. Any easy solutions out there?
Not sure I have a complete grasp of what you are trying to achieve, but I'll give it a try anyway: My assumption is that your final goal is to make some files (PDF, HTML) available to end users via a web application. In that case, why not have Apache serve those file to the end users, so you only need your JBOSS application to know the path of a directory that is mapped to an Apache virtual host. So basically, create a file and save it as /var/www/html/myappfiles/tempfile.pdf (the folder your application knows), and then provide  http://mydomain.com/myappfiles  (an Apache virtual host) to your users. The rest will be done by the web server. You will have to set an environment variable or system property to let your application know where your folder resides (/var/www/html/myappfiles/ in this example). Hopefully I was not way off :)
I'm not sure if this works in JBoss, given that you want a path inside a WAR archive, but you could try using  ServletContext.getRealPath(String) . However, I personally would not want generated files to be inside my deployed application; instead I would configure an external data directory somewhere like  $JBOSS_HOME/server/default/data/myapp
I agree with Peter (yo Pete!). Put the directory outside of your WAR and setup an environment variable pointing to this. Have a read of  this post  by Jacob Orshalick about how to configure environment variables in Seam :  As for previewing PDFs, have a look at how Google Docs handles previewing PDFs - it displays them as an image. To do this with Java check out the  Sun PDF Renderer . 
Not sure how you are generating your PDFs, but if possible, skip the disk IO all together, stash the PDF content in a  byte[]  and flush it out to the user in a servlet setting the mime type to  application/pdf * that responds to a URL which is specified by a link in your client or dynamically set in a  div  by javascript. You're probably taking the memory hit anyways, and in addition to skipping the IO, you don't have to worry about deleting the tmp files when you're done with the preview. * I think this is right. Need to look it up.
I did something like this, and it worked great. Thanks
First, most platforms use  java.io.tmpdir  to set a temporary directory. Some servlet containers redefine this property to be something underneath their tree. Why do you care where the file gets written? Second, I agree with Nicholas: After generating the PDF on the server side, you can generate a URL that, when clicked, sends the file to the browser. If you use MIME type  application/pdf , the browser should do the right thing with it.
