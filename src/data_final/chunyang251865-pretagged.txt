Java	^
->	^
Apache	^
Commons	^
StringEscapeUtils	^
->	G
escapeJavaScript	U

For	P
a	D
very	R
simple	A
ajax	N
name	N
lookup	N
,	,
I'm	L
sending	V
an	D
id	^
from	P
the	D
client	N
webpage	N
to	P
the	D
server	N
(	,
Tomcat	^
5.5	$
,	,
Java	^
5	$
)	,
,	,
looking	V
it	O
up	T
in	P
a	D
database	N
and	&
returning	V
a	D
string	N
,	,
which	O
is	V
assigned	V
to	P
a	D
javascript	N
variable	A
back	N
in	P
the	D
client	N
(	,
and	&
then	R
displayed	V
)	,
.	,
The	D
javascript	A
code	N
that	O
receives	V
the	D
value	N
is	V
pretty	R
standard	A
:	,
To	P
return	V
the	D
string	N
,	,
I	O
originally	R
had	V
this	D
in	P
the	D
server	N
:	,
Which	O
worked	V
perfectly	R
,	,
if	P
unsafe	A
.	,
Later	R
,	,
I	O
replaced	V
it	O
with	P
:	,
But	&
while	P
safer	A
,	,
the	D
resulting	V
string	N
can't	V
be	V
properly	R
displayed	V
if	P
it	O
contains	V
special	A
chars	N
like	V
"	,
"	,
.	,
For	P
instance	N
,	,
using	V
:	,
sends	V
:	,
to	P
the	D
client	N
.	,
The	D
question	N
:	,
is	V
there	R
a	D
simple	A
way	N
to	P
parse	V
the	D
resulting	V
string	N
in	P
Javascript	^
or	&
is	V
there	R
an	D
alternate	N
escape	V
function	V
I	O
can	V
use	V
in	P
java	N
that	O
would	V
prevent	V
this	D
issue	N
?	,

The	^
following	V
works	V
in	P
every	D
browser	N
I've	L
tried	V
:	,
Perhaps	R
your	D
string	N
is	V
being	V
escaped	V
twice	R
by	P
mistake	N
.	,

Yes	!
,	,
I	O
think	V
in	P
this	D
particular	A
case	N
the	D
escape	V
was	V
unnecessary	A
(	,
see	V
my	D
other	A
comment	N
below	P
)	,

Actually	R
,	,
now	R
that	P
I	O
read	V
it	O
over	R
,	,
I	O
think	V
I	O
actually	R
don't	V
need	V
to	P
escape	V
the	D
string	N
I'm	L
sending	V
back	R
at	P
all	X
...	~
That	O
is	V
,	,
StringEscapeUtils.escapeJavaScript	^
would	V
be	V
useful	A
if	P
the	D
resulting	A
value	N
was	V
printed	V
in	P
the	D
page	N
,	,
like	V
:	,
Or	&
am	V
I	O
missing	V
something	N
and	&
there	R
would	V
still	R
be	V
a	D
valid	A
reason	N
to	P
do	V
the	D
escape	V
in	P
the	D
original	A
case	N
?	,
(	,
when	R
it	O
is	V
returned	V
as	P
a	D
series	N
of	P
bytes	S
back	N
to	P
an	D
ajax	^
onreadystatechange	^
handler	^
and	&
assigned	V
to	P
a	D
js	S
variable	A
)	,

