Ajax request parameters , what am I doing wrong ?
I'm formulating an Ajax request using prototype in the following method : And I have a servlet which tries to get the parameter That I put in the ajax method , but isn't finding any parameters in the request object . And if I try to get the attribute I've set it's listed as being null . Am I not instantiating the Ajax request properly or Am I making a mistake in getting the parameters ? EDIT I've changed the javascript to clear any confusion about the name as follows : The Java side is still not getting any parameters , I've added a loop that prints out all the parameters from request.getAttributeNames() ; as follows : and it does nothing aside from print out the line before the loop . I've also tried putting a bigger array in the params and that doesnt work either , the loop still doesn't iterate . I've run the Java end in debug mode and there are no attributes being sent . At least not as far as java can see . I've also tried changing the paramaters to parameters : " step=1 garbage:'hello world ' foo='bar '" because the Prototype docs say you can do that no attributes server side . I've changed the mode to get and appended it to the url and there are no attributes ...
just a quick thought : Tried setting the parameter name to something other than the variable name ? " stepNumber : stepNumber " looks like it could cause some issues ...
trying that now I'll get back to you with an answer .
I've just noticed that the line " alert ( params.stepNumber ); " seems to show undefined . Am I not creating this array correctly ? I've also tried params[ " stepNumber " ] and thats undefined too .
I've changed the array to be step : stepNumber and it's not working . but at least params[ " step " ] is defined ...
Just as an aside ; for somewhat easier way to do Ajax with Java , you might want to check out DWR , http://directwebremoting.org
Thanks I'll have a look at DWR but at the moment I don't have the time to rip out my current code an replace it with other code .
After briefly checking the prototype documentation , your request looks valid . I recommend inspecting the content of the AJAX request directly . Use Firebug or an external HTTP sniffer like Charles Proxy to verify that the POST request contains your data . EDIT I totally missed it - you're definitely defining the object wrong . You can't reuse an existing symbol as an object property without properly delimiting it . When you don't do this ( let's assume stepNumber == 4 ) then your params object looks like this
I've looked at it incharlies proxy and I don't see an entry for the parameters ....
I've fixed this by changing the key to step , still not getting any parameters ....
Use getParameterNames() not getAttributeNames() . Read : http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletRequest.html and look at the interface function descriptions for the differences between them .
Thank you . Replaced the line in the java with : Integer pageNumber = ( Integer.parseInt ( request.getParameter ( " step "))) ; and it works like a charm .
