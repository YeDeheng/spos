Unable to decode hex values in javascript tooltip
I have quite the process that we go through in order to display some e-mail communications in our application . Trying to keep it as general as possible ... -We make a request to a service via XML -Get the XML reply string , send the string to a method to encode any invalid characters as follows : We then send that result of a string to another method to remove any other invalid characters : This string is then " unmarshal'ed " via the SaxParser The object is then sent back to our Display action which generated the response to the calling jsp / javascript to create the page . The issue is some text can contain characters which can't be processed correctly . The following is eventually rendered on the JSP just fine : Which shows up as " This is a new test . Have a * ) . . " in the browser . -The following shows up in a tooltip while hovering over the above text : This then shows up incorrectly when rendered in the tooltip javascript with all the HEX values and not being rendered correctly . Any suggestions on how to make the unknown characters show correctly in javascript ?
Get the XML reply string , send the string to a method to encode any invalid characters as follows : You should be using Apache Commons Lang StringEscapeUtils #escapeXml ( ) for this . This makes no sense . There's nothing outside UTF-8 range . The problem lies somewhere else . Get rid of this method . The issue is some text can contain characters which can't be processed correctly . The following is eventually rendered on the JSP just fine : You need to set the response encoding to UTF-8 and instruct the webbrowser to use UTF-8 . This can be done by putting the following line in top of JSP : See also : Unicode - How to get characters right ?
