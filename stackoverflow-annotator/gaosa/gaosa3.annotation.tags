64843		Write a Servlet that Talks to JMS ( ActiveMQ ) and OnMessage Update the Site	V D N P V P ^ , ^ , & N N D N		Fri Aug 21 2015 16:18:33 GMT+0800 (中国标准时间)
64843		I am building a site that uses a simple AJAX Servlet to talk JMS ( ActiveMQ ) and when a message arrives from the topic to update the site . I have Javascript that creates an XMLHttpRequest for data . The Servlet processes the Get Request and sends back JSON . However I have no idea how to connect my Servlet into my ActiveMQ Message Broker . It just sends back dummy data right now . I am thinking the Servelt should implement the messagelistener . Then onMessage send data to the JavaScript page . But I'm not sure how to do this .	O V V D N P V D A ^ N P V ^ , ^ , & R D N V P D N P V D N , O V ^ O V D ^ P N , D ^ V D N N & V T ^ , R O V D N R P V D ^ P D ^ N ^ , O R V R A N R R , O V V D ^ V V D ^ , R ^ V N P D ^ N , & L R R R P V D ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		You probably need to get a JMS connection from JNDI , like this :	O R V P V D ^ N P ^ , P D ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		Okay ... this is a good way to connect to my Topic , thanks . I already have code like this is another Java Client . But I want the Servelt to implement the messagelistener . Then onMessage send data to the Javascript page .	A , O V D A N P V P D N , ! , O R A N P D V D ^ ^ , & O V D ^ P V D ^ , R ^ V N P D ^ N ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		The problem with having a servlet implement MessageListener is that servlets are synchronous and MessageListeners are asynchronous . Instead you should create some other object to act as the MessageListener and update some state somewhere ( possibly a database or a JMX MBean or a Stateful Session EJB ) when messages come in . Then the servlet can query that state to see if there's data to report back to the client , and your web page can periodically ping the servlet to ask for fresh data .	D N P V D ^ V ^ V D N V A & ^ V A , R O V V D A N P V P D ^ & V D N R , R D N & D ^ ^ & D A N ^ , O N V T , R D ^ V N D N P V P S N P N N P D N , & D N N V R V D N P V P A N ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		Thanks jodonnell .. I have never wrote a JMX MBean or Stateful Session EJB but after a quick google search I think this is the right path to look down . Thanks for the help .	N ^ , O V R V D ^ ^ ^ ^ ^ ^ & P D ^ ^ V O V D V D A N P V T , N P D N ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		Have you tried reading the answers for this question which links to the ActiveMQ Ajax support . Basically ActiveMQ has native support for Ajax so you can use its JavaScript library to directly subscribe from an ActiveMQ topic . Also see the ActiveMQ web samples which show how to do things like real time chat or real time stock portfolio screens using Ajax with ActiveMQ	V O V V D N P D N D N P D ^ ^ N , R ^ V A N P ^ P O V V L A N P R V P D N N , R V D N N N D N R P V N R A N N & A N N N N V ^ P ^		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
64843		As James Strachan says - http://activemq.apache.org/ajax.html is an ideal out-of-the-box solution for your problem . If you still want to create such solution manually you can just create JMS connection in your Ajax servlet ( connection per request ) . Consider using Spring JMS template for that reason ( http://static.springsource.org/spring/docs/2.5.x/reference/jms.html ) . Then just receive the message in the Servlet doGet / doPost method . Consider low timeout value for receiving in that case . Such solution will work for the Queues and durable Topics . For non-durable Topics consider external message listener . Spring MessageListenerContainer is an excellent tool for that purpose : Bean lastTenUpdatesCache will be a singleton bean implementing MesssageListener . This bean would be responsible for caching last ten messages ( just putting it into a java.util list ) . It will be injected into your Ajax servlet so in your doGet / doPost method you can ask it about last 10 messages sent to the topic .	P ^ ^ V G U V D A N N P D N , P O R V P V A N R O V R V ^ N P D ^ ^ , N P N , , V V ^ ^ N P D N , U , , R R V D N P D N N , A N , V A N N P V P D N , A N V V P D ^ & A N , P ^ ^ V A N N , ^ ^ V D A N P D N , ^ ^ V V D ^ N V ^ , D N V V A P V A $ N , R V O P D ^ N , , O V V V P D ^ ^ R P D ^ , ^ N O V V O R A $ N V P D N ,		Fri Aug 21 2015 16:18:34 GMT+0800 (中国标准时间)
