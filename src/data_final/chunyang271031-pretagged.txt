Reading	V
an	D
email	N
string	N
from	P
a	D
cookie	N
in	P
java	N

My	D
application	N
needs	V
to	P
store	N
the	D
users	N
email	N
address	N
in	P
a	D
cookie	N
so	P
that	D
I	O
can	V
pre-populate	V
a	D
login	N
form	N
(	,
username	N
==	~
email	N
address	N
)	,
.	,
I	O
set	V
the	D
cookie	N
value	N
in	P
JavaScript	^
.	,
If	P
I	O
read	V
it	O
from	P
JavaScript	^
,	,
I	O
get	V
foo@bar.com	^
.	,
If	P
I	O
look	V
at	P
it	O
in	P
the	D
cookie	N
viewer	N
in	P
Firefox	^
I	O
get	V
foo@bar.com	^
.	,
When	R
I	O
try	V
to	P
read	V
it	O
on	P
the	D
server-side	N
in	P
Java	^
however	R
,	,
I	O
only	R
get	V
foo	!
.	,
Do	V
I	O
need	V
to	P
do	V
some	D
sort	N
of	P
encoding	V
/	,
decoding	V
here	R
?	,
If	P
so	R
,	,
how	R
do	V
I	O
do	V
it	O
in	P
a	D
way	N
that	P
can	V
be	V
decoded	V
by	P
both	D
JavaScript	^
and	&
Java	^
?	,
Thanks	N
in	P
advance	N
!	,
-Michael	G

You	O
need	V
to	P
escape	V
the	D
value	N
part	N
of	P
your	D
cookie	N
.	,

From	P
the	D
javax.servlet.http.Cookie	^
doco	N
for	P
setValue	^
(	,
String	N
):	,
Assigns	^
a	D
new	A
value	N
to	P
a	D
cookie	N
after	P
the	D
cookie	N
is	V
created	V
.	,
If	P
you	O
use	V
a	D
binary	A
value	N
,	,
you	O
may	V
want	V
to	P
use	V
BASE64	^
encoding	N
.	,
With	P
Version	^
0	$
cookies	N
,	,
values	V
should	V
not	R
contain	V
white	A
space	N
,	,
brackets	N
,	,
parentheses	N
,	,
equals	V
signs	N
,	,
commas	^
,	,
double	A
quotes	N
,	,
slashes	N
,	,
question	N
marks	V
,	,
at	P
signs	N
,	,
colons	N
,	,
and	&
semicolons	N
.	,
Empty	A
values	N
may	V
not	R
behave	V
the	D
same	A
way	N
on	P
all	D
browsers	N
.	,
I'm	L
guessing	V
you	O
need	V
to	P
BASE64	^
encode	^
it	O
on	P
the	D
way	N
in	P
(	,
via	P
JavaScript	^
)	,
and	&
on	P
the	D
way	N
out	P
(	,
via	P
Java	^
)	,

Please	V
see	V
post	N
below	P
about	P
equals	V
sign	N
...	,
(	,
what's	L
with	P
the	D
300	$
char	A
limit	N
on	P
comments	V
?	,
)	E

I	O
have	V
found	V
two	$
solutions	N
to	P
this	D
.	,
Here	R
is	V
the	D
first	A
one	$
.	,
Add	V
back	R
in	P
padding	V
to	P
Base64	^
encoded	A
strings	N
.	,
Inspiration	N
for	P
this	D
came	V
from	P
http://fi.am/entry/urlsafe-base64-encodingdecoding-in-two-lines	U
In	P
this	D
solution	N
,	,
the	D
JavaScript	N
stays	V
the	D
same	A
(	,
base64	$
encode	N
everything	N
)	,
and	&
the	D
server	N
side	N
looks	V
like	R
:	,
On	P
the	D
JavaScript	N
side	N
,	,
you	O
just	R
need	V
to	P
make	V
sure	R
you	O
base64	$
encode	P
the	D
values	N
:	,

The	D
second	A
solution	N
is	V
just	R
to	P
URLEncode	^
the	D
Base64	^
encoded	A
string	N
.	,
I'm	L
using	V
commons	N
codec	V
to	P
do	V
the	D
encoding	N
here	R
.	,
Java	^
Code	^
:	,
But	&
now	R
I	O
have	V
to	P
decode	N
it	O
on	P
the	D
JavaScript	N
side	N
as	P
well	R
...	,
Encode	N
:	,
Decode	N
:	,

